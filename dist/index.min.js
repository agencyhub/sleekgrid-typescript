var T=class{constructor(){this.__nonDataRow=!0}},k="slick-edit-preclick";typeof window!="undefined"&&window.Slick&&(window.Slick.Map=Map);var H=class{constructor(){this._isPropagationStopped=!1;this._isImmediatePropagationStopped=!1}stopPropagation(){this._isPropagationStopped=!0}isPropagationStopped(){return this._isPropagationStopped}stopImmediatePropagation(){this._isImmediatePropagationStopped=!0}isImmediatePropagationStopped(){return this._isImmediatePropagationStopped}},_=class{constructor(){this._handlers=[]}subscribe(t){this._handlers.push(t)}unsubscribe(t){for(var e=this._handlers.length-1;e>=0;e--)this._handlers[e]===t&&this._handlers.splice(e,1)}notify(t,e,s){e=e||new H,s=s||this;for(var i,o=0;o<this._handlers.length&&!(e.isPropagationStopped()||e.isImmediatePropagationStopped());o++)i=this._handlers[o].call(s,e,t);return i}clear(){this._handlers=[]}},B=class{constructor(){this._handlers=[]}subscribe(t,e){return this._handlers.push({event:t,handler:e}),t.subscribe(e),this}unsubscribe(t,e){for(var s=this._handlers.length;s--;)if(this._handlers[s].event===t&&this._handlers[s].handler===e){this._handlers.splice(s,1),t.unsubscribe(e);return}return this}unsubscribeAll(){for(var t=this._handlers.length;t--;)this._handlers[t].event.unsubscribe(this._handlers[t].handler);return this._handlers=[],this}},L={BACKSPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGEDOWN:34,PAGEUP:33,RIGHT:39,TAB:9,UP:38};var x=class{isActive(t){return t?this.activeEditController===t:this.activeEditController!=null}activate(t){if(t!==this.activeEditController){if(this.activeEditController!=null)throw"SleekGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!t.commitCurrentEdit)throw"SleekGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!t.cancelCurrentEdit)throw"SleekGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";this.activeEditController=t}}deactivate(t){if(this.activeEditController!==t)throw"SleekGrid.EditorLock.deactivate: specified editController is not the currently active one";this.activeEditController=null}commitCurrentEdit(){return this.activeEditController?this.activeEditController.commitCurrentEdit():!0}cancelCurrentEdit(){return this.activeEditController?this.activeEditController.cancelCurrentEdit():!0}},W=new x;var V=class extends T{constructor(){super(...arguments);this.__group=!0;this.level=0;this.count=0;this.collapsed=!1;this.rows=[]}},O=class extends T{constructor(){super(...arguments);this.__groupTotals=!0;this.initialized=!1}};var P=class{constructor(t,e,s,i){s===void 0&&i===void 0&&(s=t,i=e),this.fromRow=Math.min(t,s),this.fromCell=Math.min(e,i),this.toRow=Math.max(t,s),this.toCell=Math.max(e,i)}isSingleRow(){return this.fromRow==this.toRow}isSingleCell(){return this.fromRow==this.toRow&&this.fromCell==this.toCell}contains(t,e){return t>=this.fromRow&&t<=this.toRow&&e>=this.fromCell&&e<=this.toCell}toString(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}};var G={name:"",nameIsHtml:!1,resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null,footerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0};var M,D;function S(p,t){if((t==null?void 0:t.frozenColumn)==null){delete t.frozenColumn;return}var e=t.frozenColumn+1;t.frozenColumn=-1;for(var s=0;s<p.length;){var i=p[s++];e>0&&i.visible!==!1?(i.frozen=!0,t.frozenColumn++,e--):i.frozen!==void 0&&delete i.frozen}}function E(p){return p==null?"":p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function X(p,t,e){return z(e)}function F(p){p&&(p.setAttribute("unselectable","on"),p.style.userSelect="none",p.addEventListener("selectstart",()=>!1))}function I(){return M!=null?M:navigator.userAgent.toLowerCase().match(/gecko\//)?4e6:32e6}function A(p){if(!D||p){var t=document.body.appendChild(v("div",{style:"position:absolute;top:-10000px;left:-10000px;width:100px;height:100px;overflow: scroll;border:0"}));D={width:Math.round(t.offsetWidth-t.clientWidth),height:Math.round(t.offsetWidth-t.clientHeight)},t.remove()}return D}function v(p,t,...e){var s=document.createElement(p),i,o,r;if(t)for(i in t)o=t[i],o!=null&&o!==!1&&s.setAttribute(i,o===!0?"":o);if(e)for(r of e)s.appendChild(r);return s}function z(p){return(p+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function U(p,t){if(!Array.isArray(p)||!Array.isArray(t)||p.length!==t.length)return!1;p.sort(),t.sort();for(var e=0;e<p.length;e++)if(p[e]!==t[e])return!1;return!0}function N(p,t){if(t.length==0)return p;for(var e={},s={},i=[],o=0;o<t.length;o++)e[t[o]]=o;for(o=0;o<p.length;o++)s[p[o].id]=o;function r(a){for(var d=a;d<p.length;d++){var c=p[d];if(a!=d&&e[c.id]!=null)break;i.push(c),s[c.id]=null}}e[p[0].id]==null&&r(0);for(var l of t)o=s[l],o!=null&&r(o);for(o=0;o<p.length;o++){var n=p[o];s[n.id]!=null&&(i.push(n),s[n.id]=null)}return i}function j(){var p;(p=this==null?void 0:this.classList)==null||p.add("ui-state-hover")}function K(){var p;(p=this==null?void 0:this.classList)==null||p.remove("ui-state-hover")}var J={addNewRowCssClass:"new-row",alwaysAllowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,asyncEditorLoadDelay:100,asyncEditorLoading:!1,asyncPostCleanupDelay:40,asyncPostRenderDelay:50,autoEdit:!0,autoHeight:!1,cellFlashingCssClass:"flashing",dataItemColumnValueExtractor:null,defaultColumnWidth:80,defaultFormatter:X,editable:!1,editorFactory:null,editorLock:W,enableAddRow:!1,enableAsyncPostRender:!1,enableAsyncPostRenderCleanup:!1,enableCellNavigation:!0,enableColumnReorder:!0,enableTabKeyNavigation:!0,enableTextSelectionOnCells:!1,explicitInitialization:!1,footerRowHeight:25,forceFitColumns:!1,forceSyncScrolling:!1,formatterFactory:null,frozenBottom:!1,frozenRow:-1,fullWidthRows:!1,groupingPanel:!1,groupingPanelHeight:34,headerRowHeight:25,leaveSpaceForNewRows:!1,useLegacyUI:!0,minBuffer:3,multiColumnSort:!1,multiSelect:!0,renderAllCells:!1,rowHeight:25,selectedCellCssClass:"selected",showCellSelection:!0,showColumnHeader:!0,showFooterRow:!1,showGroupingPanel:!0,showHeaderRow:!1,showTopPanel:!1,suppressActiveCellChangeOnEdit:!1,topPanelHeight:25};var Y=class{constructor(t,e,s,i){this._activeCellNode=null;this._actualFrozenRow=-1;this._cellCssClasses={};this._cellHeightDiff=0;this._cellWidthDiff=0;this._colLeft=[];this._colRight=[];this._currentEditor=null;this._footerRowH=0;this._frozenRowsHeight=0;this._groupingPanelH=0;this._hasFrozenRows=!1;this._headerColumnWidthDiff=0;this._headerRowH=0;this._hEditorLoader=null;this._hPostRender=null;this._hPostRenderCleanup=null;this._hRender=null;this._ignoreScrollUntil=0;this._initialized=!1;this._numVisibleRows=0;this._page=0;this._pageOffset=0;this._pagingActive=!1;this._pagingIsLastPage=!1;this._paneBottomH=0;this._paneTopH=0;this._plugins=[];this._postProcessCleanupQueue=[];this._postProcessedRows={};this._postProcessFromRow=null;this._postProcessGroupId=0;this._postProcessToRow=null;this._rowsCache={};this._rtl=!1;this._rtlE="right";this._rtlS="left";this._scrollLeft=0;this._scrollLeftPrev=0;this._scrolLLeftRendered=0;this._scrollTop=0;this._scrollTopPrev=0;this._scrollTopRendered=0;this._selectedRows=[];this._sortColumns=[];this._tabbingDirection=1;this._topPanelH=0;this._uid="sleekgrid_"+Math.round(1e6*Math.random());this._viewportTopH=0;this._vScrollDir=1;this._boundAncestorScroll=[];this.onActiveCellChanged=new _;this.onActiveCellPositionChanged=new _;this.onAddNewRow=new _;this.onBeforeCellEditorDestroy=new _;this.onBeforeDestroy=new _;this.onBeforeEditCell=new _;this.onBeforeFooterRowCellDestroy=new _;this.onBeforeHeaderCellDestroy=new _;this.onBeforeHeaderRowCellDestroy=new _;this.onCellChange=new _;this.onCellCssStylesChanged=new _;this.onClick=new _;this.onColumnsReordered=new _;this.onColumnsResized=new _;this.onContextMenu=new _;this.onDblClick=new _;this.onDrag=new _;this.onDragEnd=new _;this.onDragInit=new _;this.onDragStart=new _;this.onFooterRowCellRendered=new _;this.onHeaderCellRendered=new _;this.onHeaderClick=new _;this.onHeaderContextMenu=new _;this.onHeaderMouseEnter=new _;this.onHeaderMouseLeave=new _;this.onHeaderRowCellRendered=new _;this.onKeyDown=new _;this.onMouseEnter=new _;this.onMouseLeave=new _;this.onScroll=new _;this.onSelectedRowsChanged=new _;this.onSort=new _;this.onValidationError=new _;this.onViewportChanged=new _;this.handleSelectedRangesChanged=(t,e)=>{var s=this._selectedRows.slice(0);this._selectedRows=[];for(var d={},c=this._cols,i=0;i<e.length;i++)for(var o=e[i].fromRow;o<=e[i].toRow;o++){d[o]||(this._selectedRows.push(o),d[o]={});for(var r=e[i].fromCell;r<=e[i].toCell;r++)this.canCellBeSelected(o,r)&&(d[o][c[r].id]=this._options.selectedCellCssClass)}if(this.setCellCssStyles(this._options.selectedCellCssClass,d),!U(s,this._selectedRows)){var l=t&&t.detail&&t.detail.caller||"click",n=this._selectedRows.filter(h=>s.indexOf(h)<0),a=s.filter(h=>this._selectedRows.indexOf(h)<0);this.trigger(this.onSelectedRowsChanged,{rows:this.getSelectedRows(),previousSelectedRows:s,caller:l,changedSelectedRows:n,changedUnselectedRows:a},t)}this._selectedRows=[];for(var d={},c=this._cols,i=0;i<e.length;i++)for(var o=e[i].fromRow;o<=e[i].toRow;o++){d[o]||(this._selectedRows.push(o),d[o]={});for(var r=e[i].fromCell;r<=e[i].toCell;r++)this.canCellBeSelected(o,r)&&(d[o][c[r].id]=this._options.selectedCellCssClass)}};this.viewOnRowCountChanged=()=>{this.updateRowCount(),this.render()};this.viewOnRowsChanged=(t,e)=>{this.invalidateRows(e.rows),this.render(),this.updateFooterTotals()};this.viewOnDataChanged=()=>{this.invalidate(),this.render()};this.resizeCanvas=()=>{if(!!this._initialized){this._paneTopH=0,this._paneBottomH=0,this._viewportTopH=0,this.getViewportWidth(),this.getViewportHeight(),this._hasFrozenRows?this._options.frozenBottom?(this._paneTopH=this._viewportH-this._frozenRowsHeight-this._scrollDims.height,this._paneBottomH=this._frozenRowsHeight+this._scrollDims.height):(this._paneTopH=this._frozenRowsHeight,this._paneBottomH=this._viewportH-this._frozenRowsHeight):this._paneTopH=this._viewportH,this._paneTopH+=this._topPanelH+this._headerRowH+this._footerRowH,this.hasFrozenColumns()&&this._options.autoHeight&&(this._paneTopH+=this._scrollDims.height),this._viewportTopH=this._paneTopH-this._topPanelH-this._headerRowH-this._footerRowH,this._options.autoHeight?(this.hasFrozenColumns()&&(this._container.style.height=this._paneTopH+parseFloat(getComputedStyle(this._headerColsL.parentElement).height)+"px"),this._paneTopL.style.position="relative"):this._paneTopL.style.position="",this._paneTopL.style.top=(parseFloat(getComputedStyle(this._paneHeaderL).height)||(this._options.showHeaderRow?this._options.headerRowHeight:0)+this._groupingPanelH)+"px",this._paneTopL.style.height=this._paneTopH+"px";var t=this._paneTopL.offsetTop+this._paneTopH;this._options.autoHeight||(this._viewportTopL.style.height=this._viewportTopH+"px"),this.hasFrozenColumns()?(this._paneTopR.style.top=this._paneTopL.style.top,this._paneTopR.style.height=this._paneTopH+"px",this._viewportTopR.style.height=this._viewportTopH+"px",this._hasFrozenRows&&(this._paneBottomL.style.top=t+"px",this._paneBottomL.style.height=this._paneBottomH+"px",this._paneBottomR.style.top=t+"px",this._paneBottomR.style.height=this._paneBottomH+"px",this._viewportBottomR.style.height=this._paneBottomH+"px")):this._hasFrozenRows&&(this._paneBottomL.style.width="100%",this._paneBottomL.style.height=this._paneBottomH+"px",this._paneBottomL.style.top=t+"px"),this._hasFrozenRows?(this._viewportBottomL.style.height=this._paneBottomH+"px",this._options.frozenBottom?(this._canvasBottomL.style.height=this._frozenRowsHeight+"px",this.hasFrozenColumns()&&(this._canvasBottomR.style.height=this._frozenRowsHeight+"px")):(this._canvasTopL.style.height=this._frozenRowsHeight+"px",this.hasFrozenColumns()&&(this._canvasTopR.style.height=this._frozenRowsHeight+"px"))):this._viewportTopR.style.height=this._viewportTopH+"px",(!this._scrollDims||!this._scrollDims.width)&&(this._scrollDims=A(!0)),this._options.forceFitColumns&&this.autosizeColumns(),this.updateRowCount(),this.handleScroll(),this._scrolLLeftRendered=-1,this.render()}};this.handleHeaderRowScroll=()=>{if(!(this._ignoreScrollUntil>=new Date().getTime())){var t=this.hasFrozenColumns?this._headerRowColsR.parentElement.scrollLeft:this._headerRowColsL.parentElement.scrollLeft;t!=this._scrollContainerX.scrollLeft&&(this._scrollContainerX.scrollLeft=t)}};this.handleFooterRowScroll=()=>{if(!(this._ignoreScrollUntil>=new Date().getTime())){var t=this.hasFrozenColumns?this._footerRowColsR.parentElement.scrollLeft:this._footerRowColsL.parentElement.scrollLeft;t!=this._scrollContainerX.scrollLeft&&(this._scrollContainerX.scrollLeft=t)}};this.handleActiveCellPositionChange=()=>{if(!!this._activeCellNode&&(this.trigger(this.onActiveCellPositionChanged,{}),this._currentEditor)){var t=this.getActiveCellPosition();this._currentEditor.show&&this._currentEditor.hide&&(t.visible?this._currentEditor.show():this._currentEditor.hide()),this._currentEditor.position&&this._currentEditor.position(t)}};if(this._data=e,this._colDefaults=Object.assign({},G),typeof jQuery!="undefined"&&t instanceof jQuery?this._container=t[0]:t instanceof Element?this._container=t:typeof t=="string"&&(this._container=document.querySelector(t)),this._container==null)throw new Error("SleekGrid requires a valid container, "+t+" does not exist in the DOM.");this._rtl=document.body.classList.contains("rtl")||typeof getComputedStyle!="undefined"&&getComputedStyle(this._container).direction=="rtl",this._rtl&&(this._rtlS="right",this._rtlE="left"),i=Object.assign({},J,i),this._options=i,this.validateAndEnforceOptions(),this._colDefaults.width=i.defaultColumnWidth,S(s,this._options),this.setInitialCols(s),this._editController={commitCurrentEdit:this.commitCurrentEdit.bind(this),cancelCurrentEdit:this.cancelCurrentEdit.bind(this)},typeof $!="undefined"?$(this._container).empty():this._container.innerHTML="",this._container.style.overflow="hidden",this._container.style.outline="0",this._container.classList.add(this._uid),this._options.useLegacyUI&&this._container.classList.add("ui-widget"),/relative|absolute|fixed/.test(getComputedStyle(this._container).position)||(this._container.style.position="relative"),this._container.appendChild(this._focusSink1=v("div",{class:"slick-focus-sink",hideFocus:"",style:"position:fixed;width:0!important;height:0!important;top:0;left:0;outline:0!important;",tabIndex:"0"})),i.groupingPanel&&this._container.appendChild(this._groupingPanel=v("div",{class:"slick-grouping-panel",style:"overflow:hidden; position:relative;"+(i.showGroupingPanel?"":" display: none")}));let o=this._options.useLegacyUI?" ui-state-default":"";var r=this.getCanvasWidth()+(this._scrollDims=A()).width+"px";this._paneHeaderL=v("div",{class:"slick-pane slick-pane-header slick-pane-left",tabIndex:"0"},v("div",{class:"slick-header slick-header-left"+o,style:!i.showColumnHeader&&"display: none"},this._headerColsL=v("div",{class:"slick-header-columns slick-header-columns-left",style:this._rtlS+":-1000px"}))),this._paneHeaderR=v("div",{class:"slick-pane slick-pane-header slick-pane-right",tabIndex:"0"},v("div",{class:"slick-header slick-header-right"+o,style:!i.showColumnHeader&&"display: none"},this._headerColsR=v("div",{class:"slick-header-columns slick-header-columns-right",style:this._rtlS+":-1000px"})));var l=v("div",{class:"slick-headerrow"+o,style:!i.showHeaderRow&&"display: none"},this._headerRowColsL=v("div",{class:"slick-headerrow-columns slick-headerrow-columns-left"}),this._headerRowSpacerL=v("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:r})),n=v("div",{class:"slick-top-panel-scroller"+o,style:!i.showTopPanel&&"display: none"},this._topPanelL=v("div",{class:"slick-top-panel",style:"width: 10000px"}));this._viewportTopL=v("div",{class:"slick-viewport slick-viewport-top slick-viewport-left",tabIndex:"0",hideFocus:""},this._canvasTopL=v("div",{class:"grid-canvas grid-canvas-top grid-canvas-left",tabIndex:"0",hideFocus:""}));var a=v("div",{class:"slick-footerrow"+o,style:!i.showFooterRow&&"display: none"},this._footerRowColsL=v("div",{class:"slick-footerrow-columns slick-footerrow-columns-left"}),this._footerRowSpacerL=v("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:r}));this._paneTopL=v("div",{class:"slick-pane slick-pane-top slick-pane-left",tabIndex:"0"},l,n,this._viewportTopL,a);var d=v("div",{class:"slick-headerrow"+o,style:!i.showHeaderRow&&"display: none"},this._headerRowColsR=v("div",{class:"slick-headerrow-columns slick-headerrow-columns-right"}),this._headerRowSpacerR=v("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:r})),c=v("div",{class:"slick-top-panel-scroller"+o,style:!i.showTopPanel&&"display: none"},this._topPanelR=v("div",{class:"slick-top-panel",style:"width: 10000px"}));this._viewportTopR=v("div",{class:"slick-viewport slick-viewport-top slick-viewport-right",tabIndex:"0",hideFocus:""},this._canvasTopR=v("div",{class:"grid-canvas grid-canvas-top grid-canvas-right",tabIndex:"0",hideFocus:""}));var h=v("div",{class:"slick-footer-row"+o,style:!i.showFooterRow&&"display: none"},this._footerRowColsR=v("div",{class:"slick-footerrow-columns slick-footerrow-columns-right"}),this._footerRowSpacerR=v("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:r}));this._paneTopR=v("div",{class:"slick-pane slick-pane-top slick-pane-right",tabIndex:"0"},d,c,this._viewportTopR,h),this._paneBottomL=v("div",{class:"slick-pane slick-pane-bottom slick-pane-left",tabIndex:"0"},this._viewportBottomL=v("div",{class:"slick-viewport slick-viewport-bottom slick-viewport-left",tabIndex:"0",hideFocus:""},this._canvasBottomL=v("div",{class:"grid-canvas grid-canvas-bottom grid-canvas-left",tabIndex:"0",hideFocus:""}))),this._paneBottomR=v("div",{class:"slick-pane slick-pane-bottom slick-pane-right",tabIndex:"0"},this._viewportBottomR=v("div",{class:"slick-viewport slick-viewport-bottom slick-viewport-right",tabIndex:"0",hideFocus:""}),this._canvasBottomR=v("div",{class:"grid-canvas grid-canvas-bottom grid-canvas-right",tabIndex:"0",hideFocus:""})),this._container.append(this._paneHeaderL,this._paneHeaderR,this._paneTopL,this._paneTopR,this._paneBottomL,this._focusSink2=this._focusSink1.cloneNode()),i.viewportClass&&this.getViewports().forEach(f=>f.classList.add(i.viewportClass)),i.explicitInitialization||this.init(),this.bindToData()}init(){if(!this._initialized){this._initialized=!0,this.getViewportWidth(),this.getViewportHeight(),this.measureCellPaddingAndBorder(),F(this._headerColsL),F(this._headerColsR);var t=this.getViewports();typeof $!="undefined"&&!this._options.enableTextSelectionOnCells&&$(t).on("selectstart.ui",function(){return $(this).is("input,textarea")}),this.adjustFrozenRowOption(),this.setPaneVisibility(),this.setScroller(),this.setOverflow(),this.updateViewColLeftRight(),this.createColumnHeaders(),this.createColumnFooters(),this.setupColumnSort(),this.createCssRules(),this.resizeCanvas(),this.bindAncestorScrollEvents(),this._container.addEventListener("resize",this.resizeCanvas),t.forEach(s=>s.addEventListener("scroll",this.handleScroll.bind(this))),typeof $!="undefined"&&$.fn.mousewheel&&(this.hasFrozenColumns()||this._hasFrozenRows)&&$(t).on("mousewheel",this.handleMouseWheel.bind(this)),[this._headerColsL.parentElement,this._headerColsR.parentElement].forEach(s=>{s.addEventListener("contextmenu",this.handleHeaderContextMenu.bind(this)),s.addEventListener("click",this.handleHeaderClick.bind(this)),s.addEventListener("mouseenter",i=>i.target.closest(".slick-header-column")&&this.handleHeaderMouseEnter(i)),s.addEventListener("mouseleave",i=>i.target.closest(".slick-header-column")&&this.handleHeaderMouseLeave(i))}),this._headerRowColsL.parentElement.addEventListener("scroll",this.handleHeaderRowScroll),this._headerRowColsR.parentElement.addEventListener("scroll",this.handleHeaderRowScroll),this._footerRowColsL.parentElement.addEventListener("scroll",this.handleFooterRowScroll),this._footerRowColsR.parentElement.addEventListener("scroll",this.handleFooterRowScroll),[this._focusSink1,this._focusSink2].forEach(s=>s.addEventListener("keydown",this.handleKeyDown.bind(this)));var e=Array.from(this.getCanvases());e.forEach(s=>{s.addEventListener("keydown",this.handleKeyDown.bind(this)),s.addEventListener("click",this.handleClick.bind(this)),s.addEventListener("dblclick",this.handleDblClick.bind(this)),s.addEventListener("contextmenu",this.handleContextMenu.bind(this))}),typeof $!="undefined"&&$.fn.drag&&$(e).on("draginit",this.handleDragInit.bind(this)).on("dragstart",{distance:3},this.handleDragStart.bind(this)).on("drag",this.handleDrag.bind(this)).on("dragend",this.handleDragEnd.bind(this)),e.forEach(s=>{s.addEventListener("mouseenter",i=>i.target.closest(".slick-cell")&&this.handleMouseEnter(i)),s.addEventListener("mouseleave",i=>i.target.closest(".slick-cell")&&this.handleMouseLeave(i))}),navigator.userAgent.toLowerCase().match(/webkit/)&&navigator.userAgent.toLowerCase().match(/macintosh/)&&typeof $!="undefined"&&$(e).on("mousewheel",this.handleMouseWheel.bind(this))}}hasFrozenColumns(){return this._frozenCols>0}registerPlugin(t){this._plugins.unshift(t),t.init(this)}unregisterPlugin(t){for(var e=this._plugins.length;e>=0;e--)if(this._plugins[e]===t){this._plugins[e].destroy&&this._plugins[e].destroy(),this._plugins.splice(e,1);break}}getPluginByName(t){for(var e=this._plugins.length-1;e>=0;e--)if(this._plugins[e].pluginName===t)return this._plugins[e]}setSelectionModel(t){this._selectionModel&&(this._selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged),this._selectionModel.destroy&&this._selectionModel.destroy()),this._selectionModel=t,this._selectionModel&&(this._selectionModel.init(this),this._selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged))}getScrollBarDimensions(){return this._scrollDims}getDisplayedScrollbarDimensions(){return{width:this._viewportHasVScroll?this._scrollDims.width:0,height:this._viewportHasHScroll?this._scrollDims.height:0}}getAbsoluteColumnMinWidth(){return this._absoluteColMinWidth}getSelectionModel(){return this._selectionModel}getCanvasNode(){return this._canvasTopL}getCanvases(){var t=[this._canvasTopL,this._canvasTopR,this._canvasBottomL,this._canvasBottomR];return typeof $!="undefined"?$(t):t}getActiveCanvasNode(t){return this.setActiveCanvasNode(t),this._activeCanvasNode}setActiveCanvasNode(t){t&&(this._activeCanvasNode=t.target.closest(".grid-canvas"))}getViewportNode(){return this._viewportTopL}getViewports(){return[this._viewportTopL,this._viewportTopR,this._viewportBottomL,this._viewportBottomR]}getActiveViewportNode(t){return this.setActiveViewportNode(t),this._activeViewportNode}setActiveViewportNode(t){t&&(this._activeViewportNode=t.target.closest(".slick-viewport"))}calcHeaderWidths(){this._headersWidthL=this._headersWidthR=0;for(var t=this._scrollDims.width,e=this._cols,s=this._frozenCols,i=0,o=e.length;i<o;i++){var r=e[i].width;s>0&&i>=s?this._headersWidthR+=r:this._headersWidthL+=r}s>0?(this._headersWidthL=this._headersWidthL+1e3,this._headersWidthR=Math.max(this._headersWidthR,this._viewportW)+this._headersWidthL,this._headersWidthR+=t):(this._headersWidthL+=t,this._headersWidthL=Math.max(this._headersWidthL,this._viewportW)+1e3)}getCanvasWidth(){var t=this._viewportHasVScroll?this._viewportW-this._scrollDims.width:this._viewportW,e=this._cols,s=e.length,i=this._frozenCols;for(this._canvasWidthL=this._canvasWidthR=0;s--;)i>0&&s>=i?this._canvasWidthR+=e[s].width:this._canvasWidthL+=e[s].width;var o=this._canvasWidthL+this._canvasWidthR;return this._options.fullWidthRows?Math.max(o,t):o}updateCanvasWidth(t){var e=this._canvasWidth,s=this._canvasWidthL,i=this._canvasWidthR,o;this._canvasWidth=this.getCanvasWidth();var r=this._scrollDims.width;if(o=this._canvasWidth!==e||this._canvasWidthL!==s||this._canvasWidthR!==i,o||this.hasFrozenColumns()||this._hasFrozenRows){var l=this._canvasWidthL+"px",n=this._canvasWidthR+"px";if(this._canvasTopL.style.width=l,this.calcHeaderWidths(),this._headerColsL.style.width=this._headersWidthL+"px",this._headerColsR.style.width=this._headersWidthR+"px",this._groupingPanel&&(this._groupingPanel.style.width=this._canvasWidth+"px"),this.hasFrozenColumns()){var a=this._viewportW-this._canvasWidthL+"px";this._canvasTopR.style.width=n,this._paneHeaderL.style.width=l,this._paneHeaderR.style[this._rtlS]=l,this._paneHeaderR.style.width=a,this._paneTopL.style.width=l,this._paneTopR.style[this._rtlS]=l,this._paneTopR.style.width=a,this._headerRowColsL.style.width=l,this._headerRowColsL.parentElement.style.width=l,this._headerRowColsR.style.width=n,this._headerRowColsR.parentElement.style.width=a,this._footerRowColsL.style.width=l,this._footerRowColsL.parentElement.style.width=l,this._footerRowColsR.style.width=n,this._footerRowColsR.parentElement.style.width=a,this._viewportTopL.style.width=l,this._viewportTopR.style.width=a,this._hasFrozenRows&&(this._paneBottomL.style.width=l,this._paneBottomR.style[this._rtlS]=l,this._viewportBottomL.style.width=l,this._viewportBottomR.style.width=a,this._canvasBottomL.style.width=l,this._canvasBottomR.style.width=n)}else this._paneHeaderL.style.width="100%",this._paneTopL.style.width="100%",this._headerRowColsL.parentElement.style.width="100%",this._headerRowColsL.style.width=this._canvasWidth+"px",this._footerRowColsL.parentElement.style.width="100%",this._footerRowColsL.style.width=this._canvasWidth+"px",this._viewportTopL.style.width="100%",this._hasFrozenRows&&(this._viewportBottomL.style.width="100%",this._canvasBottomL.style.width=l);this._viewportHasHScroll=this._canvasWidth>this._viewportW-r}var d=this._canvasWidth+(this._viewportHasVScroll?r:0)+"px";this._headerRowSpacerL.style.width=d,this._headerRowSpacerR.style.width=d,this._footerRowSpacerL.style.width=d,this._footerRowSpacerR.style.width=d,(o||t)&&this.applyColumnWidths()}bindAncestorScrollEvents(){for(var t=this._hasFrozenRows&&!this._options.frozenBottom?this._canvasBottomL:this._canvasTopL;(t=t.parentNode)!=document.body&&t!=null;)(t==this._viewportTopL||t.scrollWidth!=t.clientWidth||t.scrollHeight!=t.clientHeight)&&(t.addEventListener("scroll",this.handleActiveCellPositionChange),this._boundAncestorScroll.push(t))}unbindAncestorScrollEvents(){if(this._boundAncestorScroll)for(var t of this._boundAncestorScroll)t.removeEventListener("scroll",this.handleActiveCellPositionChange);this._boundAncestorScroll=[]}updateColumnHeader(t,e,s){if(!!this._initialized){var i=this.getColumnIndex(t);if(i!=null){var o=this._cols[i],r=this._frozenCols>0&&i>=this._frozenCols?this._headerColsR.children.item(i-this._frozenCols):this._headerColsL.children.item(i);if(!!r){e!==void 0&&(o.name=e),s!==void 0&&(o.toolTip=s),this.trigger(this.onBeforeHeaderCellDestroy,{node:r,column:o}),r.title=s||"";var l=r.firstElementChild;l&&(l.innerHTML=e),this.trigger(this.onHeaderCellRendered,{node:r,column:o})}}}}getHeader(){return this._headerColsL}getHeaderColumn(t){var e=typeof t=="number"?t:this.getColumnIndex(t);return e==null?null:this._frozenCols>0&&e>=this._frozenCols?this._headerColsR.children.item(e-this._frozenCols):this._headerColsL.children.item(e)}getGroupingPanel(){return this._groupingPanel}getHeaderRow(){return this._headerRowColsL}getHeaderRowColumn(t){var e=this.getColumnIndex(t);if(e!=null){var s,i=this._frozenCols;return i<=0||e<i?s=this._headerRowColsL:(s=this._headerRowColsR,e-=i),s.childNodes.item(e)}}getFooterRow(){return this._footerRowColsL}getFooterRowColumn(t){var e=this.getColumnIndex(t);if(e==null)return null;var s,i=this._frozenCols;return i<=0||e<i?s=this._footerRowColsL:(s=this._footerRowColsR,e-=i),s.childNodes.item(e)}createColumnFooters(){[this._footerRowColsL,this._footerRowColsR].forEach(l=>l.querySelectorAll(".slick-footerrow-column").forEach(n=>{var a=this.getColumnFromNode(n);a&&this.trigger(this.onBeforeFooterRowCellDestroy,{node:n,column:a})}));let t=typeof $!="undefined";t?($(this._footerRowColsL).empty(),$(this._footerRowColsR).empty()):(this._footerRowColsL.innerHTML="",this._footerRowColsR.innerHTML="");for(var e=this._cols,s=this._frozenCols,i=0;i<e.length;i++){var o=e[i],r=v("div",{class:"slick-footerrow-column l"+i+" r"+i+(this._options.useLegacyUI?" ui-state-default":"")});r.dataset.c=i.toString(),t&&$(r).data("column",o),o.footerCssClass?r.classList.add(o.footerCssClass):o.cssClass&&r.classList.add(o.cssClass),(s>0&&i>=s?this._footerRowColsR:this._footerRowColsL).appendChild(r),this.trigger(this.onFooterRowCellRendered,{node:r,column:o})}}formatGroupTotal(t,e){if(e.formatter!=null){var s=new T;s[e.field]=t;try{return e.formatter(-1,-1,t,e,s)}catch(i){}}return typeof t=="number"&&typeof Q!="undefined"&&Q.formatNumber?e.sourceItem&&e.sourceItem.displayFormat?Q.formatNumber(t,e.sourceItem.displayFormat):Q.formatNumber(t,"#,##0.##"):z(t==null?void 0:t.toString())}groupTotalText(t,e,s){var i=s.substring(0,1).toUpperCase()+s.substring(1),o=typeof Q!="undefined"&&Q.tryGetText&&Q.tryGetText(i)||i,r=t[s][e.field];return r=this.formatGroupTotal(r,e),"<span class='aggregate agg-"+s+"'  title='"+o+"'>"+r+"</span>"}groupTotalsFormatter(t,e){if(!t||!e)return"";var s=null,i=this;return["sum","avg","min","max","cnt"].forEach(function(o){if(s==null&&t[o]&&t[o][e.field]!=null)return s=i.groupTotalText(t,e,o),!1}),s||""}createColumnHeaders(){[this._headerColsL,this._headerColsR].forEach(c=>c.querySelectorAll(".slick-header-column").forEach(h=>{var f=this.getColumnFromNode(h);f&&this.trigger(this.onBeforeHeaderCellDestroy,{node:h,column:f})}));let t=typeof $!="undefined";t?($(this._headerColsL).empty(),$(this._headerColsR).empty()):(this._headerColsL.innerHTML="",this._headerColsR.innerHTML=""),this.calcHeaderWidths(),this._headerColsL.style.width=this._headersWidthL+"px",this._headerColsR.style.width=this._headersWidthR+"px";for(var e=this._cols,s=this._frozenCols,i=0;i<e.length;i++){var o=e[i],r=s>0&&i>=s?this._headerColsR:this._headerColsL,l=document.createElement("span");l.className="slick-column-name",o.nameIsHtml?l.innerHTML=o.name:l.innerText=o.name;var n=v("div",{class:"slick-header-column"+(this._options.useLegacyUI?" ui-state-default ":""),id:""+this._uid+o.id,title:o.toolTip||"",style:"width: "+(o.width-this._headerColumnWidthDiff)+"px"},l);if(n.dataset.c=i.toString(),t&&$(n).data("column",o),o.headerCssClass&&n.classList.add(o.headerCssClass),i<s&&n.classList.add("frozen"),r.appendChild(n),(this._options.enableColumnReorder||o.sortable)&&this._options.useLegacyUI&&(n.addEventListener("mouseenter",j),n.addEventListener("mouseleave",K)),o.sortable&&(n.classList.add("slick-header-sortable"),n.appendChild(v("span",{class:"slick-sort-indicator"}))),this.trigger(this.onHeaderCellRendered,{node:n,column:o}),this._options.showHeaderRow){var a=s>0&&i>=s?this._headerRowColsR:this._headerRowColsL,d=v("div",{class:"slick-headerrow-column l"+i+" r"+i+(this._options.useLegacyUI?" ui-state-default":"")});d.dataset.c=i.toString(),t&&$(d).data("column",o),a.appendChild(d),this.trigger(this.onHeaderRowCellRendered,{node:d,column:o})}}this.setSortColumns(this._sortColumns),this.setupColumnResize(),this._options.enableColumnReorder&&this.setupColumnReorder()}setupColumnSort(){[this._headerColsL,this._headerColsR].forEach(t=>t.addEventListener("click",e=>{var s=e.target;if(!s.classList.contains("slick-resizable-handle")){var i=s.closest(".slick-header-column");if(!!i){var o=this.getColumnFromNode(i);if(o.sortable){if(!this.getEditorLock().commitCurrentEdit())return;for(var r=null,l=0;l<this._sortColumns.length;l++)if(this._sortColumns[l].columnId==o.id){r=this._sortColumns[l],r.sortAsc=!r.sortAsc;break}if(e.metaKey&&this._options.multiColumnSort?r&&this._sortColumns.splice(l,1):((!e.shiftKey&&!e.metaKey||!this._options.multiColumnSort)&&(this._sortColumns=[]),r?this._sortColumns.length==0&&this._sortColumns.push(r):(r={columnId:o.id,sortAsc:o.defaultSortAsc},this._sortColumns.push(r))),this.setSortColumns(this._sortColumns),!this._options.multiColumnSort)this.trigger(this.onSort,{multiColumnSort:!1,sortCol:o,sortAsc:r.sortAsc},e);else{var n=this._initCols;this.trigger(this.onSort,{multiColumnSort:!0,sortCols:this._sortColumns.map(a=>({sortCol:n[this.getInitialColumnIndex(a.columnId)],sortAsc:a.sortAsc}))},e)}}}}}))}setupColumnReorder(){$([this._headerColsL,this._headerColsR]).filter(":ui-sortable").sortable("destroy");var t=null,e=()=>{this._scrollContainerX.scrollLeft=this._scrollContainerX.scrollLeft+10},s=()=>{this._scrollContainerX.scrollLeft=this._scrollContainerX.scrollLeft-10},i,o=this._options.groupingPanel;$([this._headerColsL,this._headerColsR]).sortable({containment:o?void 0:"parent",distance:3,axis:o?void 0:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder"+(this._options.useLegacyUI?" ui-state-default":"")+" slick-header-column",forcePlaceholderSize:o?!0:void 0,appendTo:o?"body":void 0,start:(r,l)=>{l.placeholder.width(l.helper.outerWidth()-this._headerColumnWidthDiff),i=!this.hasFrozenColumns()||l.placeholder.offset()[this._rtlS]+Math.round(l.placeholder.width())>$(this._scrollContainerX).offset()[this._rtlS],$(l.helper).addClass("slick-header-column-active")},beforeStop:(r,l)=>{if($(l.helper).removeClass("slick-header-column-active"),o){var n=$(this.getGroupingPanel()),a=n.find(".slick-dropped-grouping").length;a>0&&(n.find(".slick-dropped-placeholder").hide(),n.find(".slick-dropped-grouping").show())}},sort:r=>{i&&r.originalEvent.pageX>this._container.clientWidth?t||(t=setInterval(e,100)):i&&r.originalEvent.pageX<$(this._scrollContainerX).offset().left?t||(t=setInterval(s,100)):(clearInterval(t),t=null)},stop:r=>{var l=!1;if(clearInterval(t),t=null,l||!this.getEditorLock().commitCurrentEdit()){$(r.target).sortable("cancel");return}var n=N(this._initCols,this._headerColsL.sortable("toArray").map(a=>a.substring(this._uid.length)));n=N(n,this._headerColsR.sortable("toArray").map(a=>a.substring(this._uid.length))),this.setColumns(n),this.trigger(this.onColumnsReordered,{}),r.stopPropagation(),this.setupColumnResize()}})}setupColumnResize(){if(!(typeof $=="undefined"||!$.fn||!$.fn.drag)){var t,e,s,i,o,r,l,n,a,d,c=this._cols;r=$([this._headerColsL,this._headerColsR]).children(),r.find(".slick-resizable-handle").remove(),r.each(h=>{c[h].resizable&&(a===void 0&&(a=h),d=h)}),a!==void 0&&r.each((h,f)=>{h<a||this._options.forceFitColumns&&h>=d||(t=$(f),$("<div class='slick-resizable-handle' />").appendTo(f).on("dragstart",(C,R)=>{if(!this.getEditorLock().commitCurrentEdit())return!1;o=C.pageX,$(C.target).parent().addClass("slick-header-column-active");var m=null,g=null;if(r.each((b,y)=>{c[b].previousWidth=$(y).outerWidth()}),this._options.forceFitColumns)for(m=0,g=0,e=h+1;e<r.length;e++)i=c[e],i.resizable&&(g!=null&&(i.maxWidth?g+=i.maxWidth-i.previousWidth:g=null),m+=i.previousWidth-Math.max(i.minWidth||0,this._absoluteColMinWidth));var u=0,w=0;for(e=0;e<=h;e++)i=c[e],i.resizable&&(w!=null&&(i.maxWidth?w+=i.maxWidth-i.previousWidth:w=null),u+=i.previousWidth-Math.max(i.minWidth||0,this._absoluteColMinWidth));m===null&&(m=1e5),u===null&&(u=1e5),g===null&&(g=1e5),w===null&&(w=1e5),n=o+Math.min(m,w),l=o-Math.min(u,g)}).on("drag",(C,R)=>{var m,g=Math.min(n,Math.max(l,C.pageX))-o,u;if(g<0){u=g;var w=0,b=0;for(e=h;e>=0;e--)i=c[e],i.resizable&&(m=Math.max(i.minWidth||0,this._absoluteColMinWidth),u&&i.previousWidth+u<m?(u+=i.previousWidth-m,i.width=m):(i.width=i.previousWidth+u,u=0));var y=this._frozenCols;for(s=0;s<=h;s++)i=c[s],y>0&&s>=y?b+=i.width:w+=i.width;if(this._options.forceFitColumns)for(u=-g,e=h+1;e<r.length;e++)i=c[e],i.resizable&&(u&&i.maxWidth&&i.maxWidth-i.previousWidth<u?(u-=i.maxWidth-i.previousWidth,i.width=i.maxWidth):(i.width=i.previousWidth+u,u=0),y>0&&e>=y?b+=i.width:w+=i.width);else for(e=h+1;e<r.length;e++)i=c[e],y>=0&&e>=y?b+=i.width:w+=i.width}else{u=g;var w=0,b=0;for(e=h;e>=0;e--)i=c[e],i.resizable&&(u&&i.maxWidth&&i.maxWidth-i.previousWidth<u?(u-=i.maxWidth-i.previousWidth,i.width=i.maxWidth):(i.width=i.previousWidth+u,u=0));for(s=0;s<=h;s++)i=c[s],y>0&&s>=y?b+=i.width:w+=i.width;if(this._options.forceFitColumns)for(u=-g,e=h+1;e<r.length;e++)i=c[e],i.resizable&&(m=Math.max(i.minWidth||0,this._absoluteColMinWidth),u&&i.previousWidth+u<m?(u+=i.previousWidth-m,i.width=m):(i.width=i.previousWidth+u,u=0),y&&e>=y?b+=i.width:w+=i.width);else for(e=h+1;e<r.length;e++)i=c[e],y>0&&e>=y?b+=i.width:w+=i.width}this.hasFrozenColumns()&&w!=this._canvasWidthL&&(this._headerColsL.style.width=w+1e3+"px",this._paneHeaderR.style[this._rtlS]=w+"px"),this.applyColumnHeaderWidths(),this._options.syncColumnCellResize&&this.applyColumnWidths()}).on("dragend",C=>{var R;for($(C.target).parent().removeClass("slick-header-column-active"),e=0;e<r.length;e++)i=c[e],R=$(r[e]).outerWidth(),i.previousWidth!==R&&i.rerenderOnResize&&this.invalidateAllRows();this.updateCanvasWidth(!0),this.render(),this.trigger(this.onColumnsResized)}))})}}getVBoxDelta(t){var e=getComputedStyle(t);if(t.style.boxSizing=="border-box")return 0;var s=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=0;return s.forEach(o=>i+=parseFloat(e.getPropertyValue(o))||0),i}adjustFrozenRowOption(){if(this._options.frozenRow=this._options.frozenRow>=0&&this._options.frozenRow<this._numVisibleRows?this._options.frozenRow:-1,this._options.frozenRow>-1){this._hasFrozenRows=!0,this._frozenRowsHeight=this._options.frozenRow*this._options.rowHeight;var t=this.getDataLength()||this._data.length;this._actualFrozenRow=this._options.frozenBottom?t-this._options.frozenRow:this._options.frozenRow}else this._hasFrozenRows=!1}setPaneVisibility(){this._paneHeaderR.style.display=this._paneTopR.style.display=this._hasFrozenRows?"":"none",this._paneBottomL.style.display=this._hasFrozenRows?"":"none",this._paneBottomR.style.display=this._hasFrozenRows&&this.hasFrozenColumns()?"":"none"}setOverflow(){var t=this._hasFrozenRows,e=this.hasFrozenColumns(),s=this._options.alwaysAllowHorizontalScroll,i=this._options.alwaysShowVerticalScroll;this._viewportTopL.style.overflowX=this._viewportTopR.style.overflowX=t&&!s?"hidden":e?"scroll":"auto",this._viewportTopL.style.overflowY=this._viewportBottomL.style.overflowY=!e&&i?"scroll":e?"hidden":t?"scroll":"auto",this._viewportTopR.style.overflowY=i||t?"scroll":"auto",this._viewportBottomL.style.overflowX=this._viewportBottomR.style.overflowX=e&&!s?"scroll":"auto",this._viewportBottomR.style.overflowY=i?"scroll":"auto",this._options.viewportClass&&this.getViewports().forEach(o=>o.classList.add(this._options.viewportClass))}setScroller(){this.hasFrozenColumns()?this._hasFrozenRows?this._options.frozenBottom?(this._scrollContainerX=this._viewportBottomR,this._scrollContainerY=this._viewportTopR):this._scrollContainerX=this._scrollContainerY=this._viewportBottomR:this._scrollContainerX=this._scrollContainerY=this._viewportTopR:this._hasFrozenRows?this._options.frozenBottom?(this._scrollContainerX=this._viewportBottomL,this._scrollContainerY=this._viewportTopL):this._scrollContainerX=this._scrollContainerY=this._viewportBottomL:this._scrollContainerX=this._scrollContainerY=this._viewportTopL}measureCellPaddingAndBorder(){let t=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],e=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var s=this._headerColsL.appendChild(v("div",{class:"slick-header-column"+(this._options.useLegacyUI?" ui-state-default":""),style:"visibility:hidden"}));this._headerColumnWidthDiff=0;var i=getComputedStyle(s);i.boxSizing!="border-box"&&t.forEach(r=>this._headerColumnWidthDiff+=parseFloat(i.getPropertyValue(r))||0),s.remove();var o=this._canvasTopL.appendChild(v("div",{class:"slick-row"},s=v("div",{class:"slick-cell",id:"",style:"visibility: hidden"})));s.innerHTML="-",this._cellWidthDiff=this._cellHeightDiff=0,i=getComputedStyle(s),i.boxSizing!="border-box"&&(t.forEach(r=>this._cellWidthDiff+=parseFloat(i.getPropertyValue(r))||0),e.forEach(r=>this._cellHeightDiff+=parseFloat(i.getPropertyValue(r))||0)),o.remove(),this._absoluteColMinWidth=Math.max(this._headerColumnWidthDiff,this._cellWidthDiff)}createCssRules(){var t=this._styleNode=document.createElement("style");t.dataset.uid=this._uid;for(var e=this._options.rowHeight-this._cellHeightDiff,s=["."+this._uid+" .slick-group-header-column { "+this._rtlS+": 1000px; }","."+this._uid+" .slick-header-column { "+this._rtlS+": 1000px; }","."+this._uid+" .slick-top-panel { height:"+this._options.topPanelHeight+"px; }","."+this._uid+" .slick-grouping-panel { height:"+this._options.groupingPanelHeight+"px; }","."+this._uid+" .slick-headerrow-columns { height:"+this._options.headerRowHeight+"px; }","."+this._uid+" .slick-cell { height:"+e+"px; }","."+this._uid+" .slick-row { height:"+this._options.rowHeight+"px; }","."+this._uid+" .slick-footerrow-columns { height:"+this._options.footerRowHeight+"px; }"],i=this._cols,o=0;o<i.length;o++)s.push("."+this._uid+" .l"+o+" { }"),s.push("."+this._uid+" .r"+o+" { }");t.appendChild(document.createTextNode(s.join(" "))),document.head.appendChild(t)}getColumnCssRules(t){if(!this._stylesheet){var e=document.querySelector("style[data-uid='"+this._uid+"']");if(e&&e.sheet)this._stylesheet=e.sheet;else for(var s=document.styleSheets,i=0;i<s.length;i++)if((s[i].ownerNode||s[i].owningElement)==this._styleNode){this._stylesheet=s[i];break}if(!this._stylesheet)throw new Error("Cannot find stylesheet.");this._columnCssRulesL=[],this._columnCssRulesR=[];for(var o=this._stylesheet.cssRules||this._stylesheet.rules,r,l,i=0;i<o.length;i++){var n=o[i].selectorText;(r=/\.l\d+/.exec(n))?(l=parseInt(r[0].substring(2,r[0].length),10),this._columnCssRulesL[l]=o[i]):(r=/\.r\d+/.exec(n))&&(l=parseInt(r[0].substring(2,r[0].length),10),this._columnCssRulesR[l]=o[i])}}return this._rtl?{right:this._columnCssRulesL[t],left:this._columnCssRulesR[t]}:{left:this._columnCssRulesL[t],right:this._columnCssRulesR[t]}}removeCssRules(){this._styleNode.remove(),this._stylesheet=null}destroy(){this.getEditorLock().cancelCurrentEdit(),this.trigger(this.onBeforeDestroy);for(var t=this._plugins.length;t--;)this.unregisterPlugin(this._plugins[t]);this._options.enableColumnReorder&&$([this._headerColsL,this._headerColsR]).filter(":ui-sortable").sortable("destroy"),this.unbindAncestorScrollEvents(),$(this._container).off(".slickgrid"),this.removeCssRules(),this.getCanvases().off("draginit dragstart dragend drag"),$(this._container).empty().removeClass(this._uid);for(var e in this)if(!!Object.prototype.hasOwnProperty.call(this,e)){if(e.startsWith("on")){var s=this[e];(s==null?void 0:s.clear)&&(s==null?void 0:s.subscribe)&&(s==null||s.clear())}delete this[e]}}trigger(t,e,s){return s=s||new H,e=e||{},e.grid=this,t.notify(e,s,this)}getEditorLock(){return this._options.editorLock}getEditController(){return this._editController}getColumnIndex(t){return this._colById[t]}getInitialColumnIndex(t){return this._initColById[t]}autosizeColumns(){var t,e,s=[],i=0,o=0,r,l=this._viewportHasVScroll?this._viewportW-this._scrollDims.width:this._viewportW,n=this._cols;for(t=0;t<n.length;t++)e=n[t],s.push(e.width),o+=e.width,e.resizable&&(i+=e.width-Math.max(e.minWidth,this._absoluteColMinWidth));for(r=o;o>l&&i;){var a=(o-l)/i;for(t=0;t<n.length&&o>l;t++){e=n[t];var d=s[t];if(!(!e.resizable||d<=e.minWidth||d<=this._absoluteColMinWidth)){var c=Math.max(e.minWidth,this._absoluteColMinWidth),h=Math.floor(a*(d-c))||1;h=Math.min(h,d-c),o-=h,i-=h,s[t]-=h}}if(r<=o)break;r=o}for(r=o;o<l;){var f=l/o;for(t=0;t<n.length&&o<l;t++){e=n[t];var C=s[t],R;!e.resizable||e.maxWidth<=C?R=0:R=Math.min(Math.floor(f*C)-C,e.maxWidth-C||1e6)||1,o+=R,s[t]+=o<=l?R:0}if(r>=o)break;r=o}var m=!1;for(t=0;t<n.length;t++)n[t].rerenderOnResize&&n[t].width!=s[t]&&(m=!0),n[t].width=s[t];this.applyColumnHeaderWidths(),this.updateCanvasWidth(!0),m&&(this.invalidateAllRows(),this.render())}applyColumnHeaderWidths(){if(!!this._initialized){for(var t,e=this._cols,s=e.length,i=this._frozenCols,o=this._headerColsL.children,r=this._headerColsR.children,l=0,n=o.length+r.length;l<n&&l<s;l++)t=(i&&l>=i?r:o).item(l),t.style.width=e[l].width+"px";this.updateViewColLeftRight()}}applyColumnWidths(){for(var t=0,e,s,i=this._cols,o=this._frozenCols,r=0;r<i.length;r++)o==r&&(t=0),e=i[r].width,s=this.getColumnCssRules(r),s[this._rtlS].style[this._rtlS]=t+"px",s[this._rtlE].style[this._rtlE]=(o>0&&r>=o?this._canvasWidthR:this._canvasWidthL)-t-e+"px",t+=e}setSortColumn(t,e){this.setSortColumns([{columnId:t,sortAsc:e}])}setSortColumns(t){this._sortColumns=t||[];var e=Array.from(this._headerColsL.children).concat(Array.from(this._headerColsR.children));e.forEach(s=>{s.classList.remove("slick-header-column-sorted");var i=s.querySelector(".slick-sort-indicator");i&&i.classList.remove("slick-sort-indicator-asc","slick-sort-indicator-desc")}),this._sortColumns.forEach(s=>{s.sortAsc==null&&(s.sortAsc=!0);var i=this.getColumnIndex(s.columnId);if(i!=null){var o=e[i];if(o){o.classList.add("slick-header-column-sorted");var r=o.querySelector(".slick-sort-indicator");r&&r.classList.add(s.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}}})}getSortColumns(){return this._sortColumns}getColumns(){return this._cols}getInitialColumns(){return this._initCols}updateViewColLeftRight(){this._colLeft=[],this._colRight=[];for(var t=0,e,s=this._cols,i,o=s.length,r=this._frozenCols,i=0;i<o;i++)r===i&&(t=0),e=t+s[i].width,this._colLeft[i]=t,this._colRight[i]=e,t=e}setInitialCols(t){var e=this._colDefaults,s={},i=[],o=[],r={},l,n,a;for(l=0;l<t.length;l++){n=t[l];for(a in e)n[a]===void 0&&(n[a]=this._colDefaults[a]);n.minWidth&&n.width<n.minWidth&&(n.width=n.minWidth),n.maxWidth&&n.width>n.maxWidth&&(n.width=n.maxWidth),s[n.id]=l,n.visible!==!1&&(n.frozen?i:o).push(n)}for(this._frozenCols=i.length,i.length>0&&(o=i.concat(o)),l=0;l<o.length;l++)n=o[l],r[n.id]=l;this._initCols=t,this._initColById=s,this._cols=o,this._colById=r}setColumns(t){var e;this.setInitialCols(t),this.updateViewColLeftRight(),this._initialized&&(this.setPaneVisibility(),this.setOverflow(),this.invalidateAllRows(),this.createColumnHeaders(),this.createColumnFooters(),this.updateFooterTotals(),this.removeCssRules(),this.createCssRules(),this.resizeCanvas(),this.updateCanvasWidth(),this.applyColumnWidths(),this.handleScroll(),(e=this.getSelectionModel())==null||e.refreshSelections())}getOptions(){return this._options}setOptions(t,e,s,i){var o;!this.getEditorLock().commitCurrentEdit()||(this.makeActiveCellNormal(),t.showColumnHeader!==void 0&&this.setColumnHeaderVisibility(t.showColumnHeader),this._options.enableAddRow!==t.enableAddRow&&this.invalidateRow(this.getDataLength()),this._options=$.extend(this._options,t),this.validateAndEnforceOptions(),this.adjustFrozenRowOption(),this.getViewports().forEach(r=>r.style.overflowY=this._options.autoHeight?"hidden":"auto"),i||this.setOverflow(),t.columns&&!s?(S(t.columns,this._options),this.setColumns((o=t.columns)!=null?o:this._initCols)):t.frozenColumn!=null&&(S(this._initCols,this._options),this.setColumns(this._initCols)),this.setScroller(),e||this.render())}validateAndEnforceOptions(){this._options.autoHeight&&(this._options.leaveSpaceForNewRows=!1)}bindToData(){this._data&&(this._data.onRowCountChanged&&this._data.onRowCountChanged.subscribe(this.viewOnRowCountChanged),this._data.onRowsChanged&&this._data.onRowsChanged.subscribe(this.viewOnRowsChanged),this._data.onDataChanged&&this._data.onDataChanged.subscribe(this.viewOnDataChanged))}unbindFromData(){this._data&&(this._data.onRowCountChanged&&this._data.onRowCountChanged.unsubscribe(this.viewOnRowCountChanged),this._data.onRowsChanged&&this._data.onRowsChanged.unsubscribe(this.viewOnRowsChanged),this._data.onDataChanged&&this._data.onDataChanged.unsubscribe(this.viewOnDataChanged))}setData(t,e){this.unbindFromData(),this._data=t,this.bindToData(),this.invalidateAllRows(),this.updateRowCount(),e&&this.scrollTo(0)}getData(){return this._data}getDataLength(){return this._data.getLength?this._data.getLength():this._data.length}getDataLengthIncludingAddNew(){return this.getDataLength()+(this._options.enableAddRow&&(!this._pagingActive||this._pagingIsLastPage)?1:0)}getDataItem(t){return this._data.getItem?this._data.getItem(t):this._data[t]}getTopPanel(){return this._topPanelL}setTopPanelVisibility(t){this._options.showTopPanel!=t&&(this._options.showTopPanel=!!t,$([this._topPanelL.parentElement,this._topPanelR.parentElement])[t?"slideDown":"slideUp"]("fast",this.resizeCanvas))}setColumnHeaderVisibility(t,e){if(this._options.showColumnHeader!=t){this._options.showColumnHeader=t;var s=$([this._headerColsL.parentElement,this._headerColsR.parentElement]);t?e?s.slideDown("fast",this.resizeCanvas):(s.show(),this.resizeCanvas()):e?s.slideUp("fast",this.resizeCanvas):(s.hide(),this.resizeCanvas())}}setFooterRowVisibility(t){this._options.showFooterRow!=t&&(this._options.showFooterRow=!!t,$([this._footerRowColsL.parentElement,this._footerRowColsR.parentElement])[t?"slideDown":"slideUp"]("fast",this.resizeCanvas))}setGroupingPanelVisibility(t){if(this._options.showGroupingPanel!=t){if(this._options.showGroupingPanel=t,!this._options.groupingPanel)return;t?$(this._groupingPanel).slideDown("fast",this.resizeCanvas):$(this._groupingPanel).slideUp("fast",this.resizeCanvas)}}setHeaderRowVisibility(t){this._options.showHeaderRow!=t&&(this._options.showHeaderRow=t,$([this._headerRowColsL.parentElement,this._headerRowColsR.parentElement])[t?"slideDown":"slideUp"]("fast",this.resizeCanvas))}getContainerNode(){return this._container}getUID(){return this._uid}getRowTop(t){return this._options.rowHeight*t-this._pageOffset}getRowFromPosition(t){return Math.floor((t+this._pageOffset)/this._options.rowHeight)}scrollTo(t){t=Math.max(t,0),t=Math.min(t,this._virtualHeight-Math.round($(this._scrollContainerY).height())+(this._viewportHasHScroll||this.hasFrozenColumns()?this._scrollDims.height:0));var e=this._pageOffset;this._page=Math.min(this._numberOfPages-1,Math.floor(t/this._pageHeight)),this._pageOffset=Math.round(this._page*this._jumpinessCoefficient);var s=t-this._pageOffset;if(this._pageOffset!=e){var i=this.getVisibleRange(s);this.cleanupRows(i),this.updateRowPositions()}this._scrollTopPrev!=s&&(this._vScrollDir=this._scrollTopPrev+e<s+this._pageOffset?1:-1,this._scrollTopRendered=this._scrollTop=this._scrollTopPrev=s,this.hasFrozenColumns()&&(this._viewportTopL.scrollTop=s),this._hasFrozenRows&&(this._viewportBottomL.scrollTop=this._viewportBottomR.scrollTop=s),this._scrollContainerY.scrollTop=s,this.trigger(this.onViewportChanged))}getFormatter(t,e){var s=this._data,i=s.getItemMetadata&&s.getItemMetadata(t),o=i&&i.columns,r=o&&(o[e.id]||o[this.getInitialColumnIndex(e.id)]);return r&&r.formatter||i&&i.formatter||e.formatter||this._options.formatterFactory&&this._options.formatterFactory.getFormatter(e)||this._options.defaultFormatter}getEditor(t,e){var s=this._cols[e],i=this._data.getItemMetadata&&this._data.getItemMetadata(t),o=i&&i.columns;return o&&o[s.id]&&o[s.id].editor!==void 0?o[s.id].editor:o&&o[e]&&o[e].editor!==void 0?o[e].editor:s.editor||this._options.editorFactory&&this._options.editorFactory.getEditor(s)}getDataItemValueForColumn(t,e){return this._options.dataItemColumnValueExtractor?this._options.dataItemColumnValueExtractor(t,e):t[e.field]}appendRowHtml(t,e,s,i,o){var r=this.getDataItem(s),l=s<o&&!r,n="slick-row"+(this._hasFrozenRows&&s<=this._options.frozenRow?" frozen":"")+(l?" loading":"")+(s===this._activeRow?" active":"")+(s%2==1?" odd":" even");r||(n+=" "+this._options.addNewRowCssClass);var a=this._data.getItemMetadata&&this._data.getItemMetadata(s);a&&a.cssClasses&&(n+=" "+a.cssClasses);var d=this.getFrozenRowOffset(s),c="<div class='"+(this._options.useLegacyUI?"ui-widget-content ":"")+n+"' style='top:"+(this.getRowTop(s)-d)+"px'>";t.push(c),this.hasFrozenColumns()&&e.push(c);for(var h,f,C=this._cols,R=this._frozenCols,m=0,g=C.length;m<g;m++){var u=null;if(f=C[m],h=1,a&&a.columns&&(u=a.columns[f.id]||a.columns[m],h=u&&u.colspan||1,h==="*"&&(h=g-m)),this._colRight[Math.min(g-1,m+h-1)]>i.leftPx){if(this._colLeft[m]>i.rightPx)break;this.appendCellHtml(R>0&&m>=R?e:t,s,m,h,r,u)}h>1&&(m+=h-1)}t.push("</div>"),this.hasFrozenColumns()&&e.push("</div>")}appendCellHtml(t,e,s,i,o,r){var u,w,b;var l=this._cols,n=this._frozenCols,a=l[s],d="slick-cell l"+s+" r"+Math.min(l.length-1,s+i-1)+(a.cssClass?" "+a.cssClass:"");s<n&&(d+=" frozen"),e===this._activeRow&&s===this._activeCell&&(d+=" active"),r&&r.cssClasses&&(d+=" "+r.cssClasses);for(var c in this._cellCssClasses)this._cellCssClasses[c][e]&&this._cellCssClasses[c][e][a.id]&&(d+=" "+this._cellCssClasses[c][e][a.id]);var h;if(o){var f=this.getDataItemValueForColumn(o,a);h=this.getFormatter(e,a)(e,s,f,a,o,this)}if(h==null)t.push('<div class="'+E(d)+'"></div>');else if(typeof h=="string")t.push('<div class="'+E(d)+'">'+h+"</div>");else{(u=h.addClass)!=null&&u.length&&(d+=" "+h.addClass),t.push('<div class="'+E(d)+'"'),(w=h.addClass)!=null&&w.length&&t.push(' data-fmtcls="'+E(h.addClass)+'"');var C=h.addAttrs;if(C!=null){var R=[];for(var m in C)t.push(m+'="'+E(C[m])+'"'),R.push(m);t.push(' data-fmtatt="'+E(R.join(","))+'"')}var g=h.toolTip;g!=null&&g.length&&t.push('tooltip="'+E(g)+'"'),(b=h.text)!=null&&b.length?t.push(">"+h.text+"</div>"):t.push("></div>")}this._rowsCache[e].cellRenderQueue.push(s),this._rowsCache[e].cellColSpans[s]=i}cleanupRows(t){var e;for(var s in this._rowsCache){var i=!0;e=parseInt(s,10),this._hasFrozenRows&&(this._options.frozenBottom&&e>=this._actualFrozenRow||!this._options.frozenBottom&&e<=this._actualFrozenRow)&&(i=!1),e!==this._activeRow&&(e<t.top||e>t.bottom)&&i&&this.removeRowFromCache(e)}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidate(){this.updateRowCount(),this.invalidateAllRows(),this.render(),this.updateFooterTotals()}invalidateAllRows(){this._currentEditor&&this.makeActiveCellNormal();for(var t in this._rowsCache)this.removeRowFromCache(parseInt(t,10));this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}queuePostProcessedRowForCleanup(t,e,s){var r,l;this._postProcessGroupId++;for(var i in e)if(e.hasOwnProperty(i)){var o=parseInt(i,10);this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,cellNode:t.cellNodesByColumnIdx[o|0],columnIdx:o|0,rowIdx:s})}this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,rowNodeL:t.rowNodeL,rowNodeR:t.rowNodeR}),(r=t.rowNodeL)==null||r.remove(),(l=t.rowNodeR)==null||l.remove()}queuePostProcessedCellForCleanup(t,e,s){this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,cellNode:t,columnIdx:e,rowIdx:s}),$(t).detach()}removeRowFromCache(t){var s,i,o,r;var e=this._rowsCache[t];!e||(this._options.enableAsyncPostRenderCleanup&&this._postProcessedRows[t]?this.queuePostProcessedRowForCleanup(e,this._postProcessedRows[t],t):((i=(s=e.rowNodeL)==null?void 0:s.parentElement)==null||i.removeChild(e.rowNodeL),(r=(o=e.rowNodeR)==null?void 0:o.parentElement)==null||r.removeChild(e.rowNodeR)),delete this._rowsCache[t],delete this._postProcessedRows[t])}invalidateRows(t){var e,s;if(!(!t||!t.length)){for(this._vScrollDir=0,e=0,s=t.length;e<s;e++)this._currentEditor&&this._activeRow===t[e]&&this.makeActiveCellNormal(),this._rowsCache[t[e]]&&this.removeRowFromCache(t[e]);this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}}invalidateRow(t){this.invalidateRows([t])}applyFormatResultToCellNode(t,e){var l,n,a,d;var s=(l=e.dataset)==null?void 0:l.fmtcls;s!=null&&s.length>0&&(e.classList.remove(...s.split(" ")),delete e.dataset.fmtcls);var i=(n=e.dataset)==null?void 0:n.fmtatt;if(i!=null&&i.length>0){for(var o of i.split(","))e.removeAttribute(o);delete e.dataset.fmtatt}if(e.removeAttribute("tooltip"),t==null){e.innerHTML="";return}if(typeof t=="string"){e.innerHTML=t;return}if(e.innerHTML=t.text,(a=t.addClass)!=null&&a.length&&(e.classList.add(...t.addClass.split(" ")),e.dataset.fmtcls=t.addClass),t.addAttrs!=null){var r=Object.keys(t.addAttrs);if(r.length){for(var o of r)e.setAttribute(o,t.addAttrs[o]);e.dataset.fmtatt=r.join(",")}}(d=t.toolTip)!=null&&d.length&&e.setAttribute("tooltip",t.toolTip)}updateCell(t,e){var s=this.getCellNode(t,e);if(!!s){var i=this._cols[e],o=this.getDataItem(t);if(this._currentEditor&&this._activeRow===t&&this._activeCell===e)this._currentEditor.loadValue(o);else{var r=o?this.getFormatter(t,i)(t,e,this.getDataItemValueForColumn(o,i),i,o):"";this.applyFormatResultToCellNode(r,s),this.invalidatePostProcessingResults(t)}}}updateRow(t){var e=this._rowsCache[t];if(!!e){this.ensureCellNodesInRowsCache(t);var s=this.getDataItem(t),i;for(var o in e.cellNodesByColumnIdx)if(!!e.cellNodesByColumnIdx.hasOwnProperty(o)){var r=parseInt(o,10),l=this._cols[r],n=e.cellNodesByColumnIdx[r];t===this._activeRow&&r===this._activeCell&&this._currentEditor?this._currentEditor.loadValue(s):(i=s?this.getFormatter(t,l)(t,r,this.getDataItemValueForColumn(s,l),l,s):"",this.applyFormatResultToCellNode(i,n))}this.invalidatePostProcessingResults(t)}}getViewportHeight(){if((!this._options.autoHeight||this.hasFrozenColumns())&&(this._topPanelH=this._options.showTopPanel?this._options.topPanelHeight+this.getVBoxDelta(this._topPanelL.parentElement):0,this._headerRowH=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowColsL.parentElement):0,this._footerRowH=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowColsL.parentElement):0),this._options.autoHeight)this._viewportH=this._options.rowHeight*this.getDataLengthIncludingAddNew(),this.hasFrozenColumns()||(this._viewportH+=this._paneHeaderL.offsetHeight,this._viewportH+=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowColsL.parentElement):0,this._viewportH+=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowColsL.parentElement):0,this._viewportH+=this.getCanvasWidth()>this._viewportW?this._scrollDims.height:0);else{var t=this._options.showColumnHeader?parseFloat(getComputedStyle(this._headerColsL.parentElement).height)+this.getVBoxDelta(this._headerColsL.parentElement):0;this._groupingPanelH=this._options.groupingPanel&&this._options.showGroupingPanel?this._options.groupingPanelHeight+this.getVBoxDelta(this._groupingPanel):0;var e=getComputedStyle(this._container);this._viewportH=parseFloat(e.height)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-t-this._topPanelH-this._headerRowH-this._footerRowH-this._groupingPanelH}return this._numVisibleRows=Math.ceil(this._viewportH/this._options.rowHeight),this._viewportH}getViewportWidth(){this._viewportW=parseFloat(getComputedStyle(this._container).width)}updatePagingStatusFromView(t){this._pagingActive=t.pageSize!==0,this._pagingIsLastPage=t.pageNum==t.totalPages-1}updateRowCount(){if(!!this._initialized){var t=this.getDataLengthIncludingAddNew(),e=0,s=this._hasFrozenRows&&!this._options.frozenBottom?Math.round(parseFloat(getComputedStyle(this._canvasBottomL).height)):Math.round(parseFloat(getComputedStyle(this._canvasTopL).height));if(this._hasFrozenRows)var e=this.getDataLength()-this._options.frozenRow;else var e=t+(this._options.leaveSpaceForNewRows?this._numVisibleRows-1:0);var i=Math.round(parseFloat(getComputedStyle(this._scrollContainerY).height)),o=this._viewportHasVScroll;this._viewportHasVScroll=!this._options.autoHeight&&e*this._options.rowHeight>i,this.makeActiveCellNormal();var r=t-1;for(var l in this._rowsCache){var n=parseInt(l,10);n>=r&&this.removeRowFromCache(n)}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup(),this._virtualHeight=Math.max(this._options.rowHeight*e,i-this._scrollDims.height),this._activeCellNode&&this._activeRow>r&&this.resetActiveCell(),this._virtualHeight<I()?(this._realScrollHeight=this._pageHeight=this._virtualHeight,this._numberOfPages=1,this._jumpinessCoefficient=0):(this._realScrollHeight=I(),this._pageHeight=this._realScrollHeight/100,this._numberOfPages=Math.floor(this._virtualHeight/this._pageHeight),this._jumpinessCoefficient=(this._virtualHeight-this._realScrollHeight)/(this._numberOfPages-1)),this._realScrollHeight!==s&&(this._hasFrozenRows&&!this._options.frozenBottom?(this._canvasBottomL.style.height=this._realScrollHeight+"px",this.hasFrozenColumns()&&(this._canvasBottomR.style.height=this._realScrollHeight+"px")):(this._canvasTopL.style.height=this._realScrollHeight+"px",this._canvasTopR.style.height=this._realScrollHeight+"px"),this._scrollTop=this._scrollContainerY.scrollTop);var a=this._scrollTop+this._pageOffset<=this._virtualHeight-i;this._virtualHeight==0||this._scrollTop==0?this._page=this._pageOffset=0:a?this.scrollTo(this._scrollTop+this._pageOffset):this.scrollTo(this._virtualHeight-i),this._realScrollHeight!=s&&this._options.autoHeight&&this.resizeCanvas(),this._options.forceFitColumns&&o!=this._viewportHasVScroll&&this.autosizeColumns(),this.updateCanvasWidth(!1)}}getViewport(t,e){return this.getVisibleRange(t,e)}getVisibleRange(t,e){return t==null&&(t=this._scrollTop),e==null&&(e=this._scrollLeft),{top:this.getRowFromPosition(t),bottom:this.getRowFromPosition(t+this._viewportH)+1,leftPx:e,rightPx:e+this._viewportW}}getRenderedRange(t,e){var s=this.getVisibleRange(t,e),i=Math.round(this._viewportH/this._options.rowHeight),o=this._options.minBuffer||3;return this._vScrollDir==-1?(s.top-=i,s.bottom+=o):this._vScrollDir==1?(s.top-=o,s.bottom+=i):(s.top-=o,s.bottom+=o),s.top=Math.max(0,s.top),s.bottom=Math.min(this.getDataLengthIncludingAddNew()-1,s.bottom),this._options.renderAllCells?(s.leftPx=0,s.rightPx=this._canvasWidth):(s.leftPx-=this._viewportW,s.rightPx+=this._viewportW,s.leftPx=Math.max(0,s.leftPx),s.rightPx=Math.min(this._canvasWidth,s.rightPx)),s}ensureCellNodesInRowsCache(t){var o,r,l,n;var e=this._rowsCache[t];if(e&&e.cellRenderQueue.length)for(var s=(l=(o=e.rowNodeR)==null?void 0:o.lastElementChild)!=null?l:(r=e.rowNodeL)==null?void 0:r.lastElementChild;s&&e.cellRenderQueue.length;){var i=e.cellRenderQueue.pop();e.cellNodesByColumnIdx[i]=s,s=s.previousElementSibling,s==null&&(s=(n=e.rowNodeL)==null?void 0:n.lastElementChild)}}cleanUpCells(t,e){if(!(this._hasFrozenRows&&(this._options.frozenBottom&&e>this._actualFrozenRow||e<=this._actualFrozenRow))){var s=0,i=this._rowsCache[e],o=[],r=this._frozenCols;for(var l in i.cellNodesByColumnIdx)if(!!i.cellNodesByColumnIdx.hasOwnProperty(l)){var n=parseInt(l,10);if(!(n<r)){var a=i.cellColSpans[n],d=this._cols;(this._colLeft[n]>t.rightPx||this._colRight[Math.min(d.length-1,n+a-1)]<t.leftPx)&&(e==this._activeRow&&n===this._activeCell||o.push(n))}}var c,h;for(this._postProcessGroupId++;(c=o.pop())!=null;)h=i.cellNodesByColumnIdx[c],this._options.enableAsyncPostRenderCleanup&&this._postProcessedRows[e]&&this._postProcessedRows[e][c]?this.queuePostProcessedCellForCleanup(h,c,e):h.parentElement.removeChild(h),delete i.cellColSpans[c],delete i.cellNodesByColumnIdx[c],this._postProcessedRows[e]&&delete this._postProcessedRows[e][c],s++}}cleanUpAndRenderCells(t){for(var e,s=[],i=[],o,r=0,l,n=this._cols,a=t.top,d=t.bottom;a<=d;a++)if(e=this._rowsCache[a],!!e){this.ensureCellNodesInRowsCache(a),this.cleanUpCells(t,a),o=0;var c=this._data.getItemMetadata&&this._data.getItemMetadata(a);c=c&&c.columns;for(var h=this.getDataItem(a),f=0,C=n.length;f<C&&!(this._colLeft[f]>t.rightPx);f++){if((l=e.cellColSpans[f])!=null){f+=l>1?l-1:0;continue}var R=null;l=1,c&&(R=c[n[f].id]||c[f],l=R&&R.colspan||1,l==="*"&&(l=C-f)),this._colRight[Math.min(C-1,f+l-1)]>t.leftPx&&(this.appendCellHtml(s,a,f,l,h,R),o++),f+=l>1?l-1:0}o&&(r+=o,i.push(a))}if(!!s.length){var m=document.createElement("div");m.innerHTML=s.join("");for(var g,u,w=this._frozenCols;(g=i.pop())!=null;){e=this._rowsCache[g];for(var b;(b=e.cellRenderQueue.pop())!=null;)u=m.lastElementChild,w>0&&b>=w?e.rowNodeR.appendChild(u):e.rowNodeL.appendChild(u),e.cellNodesByColumnIdx[b]=u}}}renderRows(t){for(var e=[],s=[],i=[],o=!1,r=this.getDataLength(),l=t.top,n=t.bottom;l<=n;l++)this._rowsCache[l]||this._hasFrozenRows&&this._options.frozenBottom&&l==r||(i.push(l),this._rowsCache[l]={rowNodeL:null,rowNodeR:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},this.appendRowHtml(e,s,l,t,r),this._activeCellNode&&this._activeRow===l&&(o=!0));if(!!i.length){var a=document.createElement("div"),d=document.createElement("div");a.innerHTML=e.join(""),d.innerHTML=s.join("");for(var c=this._hasFrozenRows,h=this._actualFrozenRow,f=this._frozenCols>0,C=this._canvasTopL,R=this._canvasTopR,m=this._canvasBottomL,g=this._canvasBottomR,l=0,n=i.length;l<n;l++){var u=this._rowsCache[i[l]];u.rowNodeL=a.firstElementChild,u.rowNodeR=d.firstElementChild,c&&i[l]>=h?(u.rowNodeL&&m.appendChild(u.rowNodeL),f&&u.rowNodeR&&g.appendChild(u.rowNodeR)):(u.rowNodeL&&C.appendChild(u.rowNodeL),f&&u.rowNodeR&&R.appendChild(u.rowNodeR))}o&&(this._activeCellNode=this.getCellNode(this._activeRow,this._activeCell))}}startPostProcessing(){!this._options.enableAsyncPostRender||(clearTimeout(this._hPostRender),this._options.asyncPostRenderDelay<0?this.asyncPostProcessRows():this._hPostRender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay))}startPostProcessingCleanup(){!this._options.enableAsyncPostRenderCleanup||(clearTimeout(this._hPostRenderCleanup),this._options.asyncPostCleanupDelay<0?this.asyncPostProcessCleanupRows():this._hPostRenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostCleanupDelay))}invalidatePostProcessingResults(t){if(this._options.enableAsyncPostRenderCleanup)for(var e in this._postProcessedRows[t])this._postProcessedRows[t].hasOwnProperty(e)&&(this._postProcessedRows[t][e]="C");else delete this._postProcessedRows[t];this._postProcessFromRow=Math.min(this._postProcessFromRow,t),this._postProcessToRow=Math.max(this._postProcessToRow,t),this.startPostProcessing()}updateRowPositions(){for(var t in this._rowsCache){var e=this._rowsCache[t],s=this.getRowTop(parseInt(t,10))+"px";e.rowNodeL&&(e.rowNodeL.style.top=s),e.rowNodeR&&(e.rowNodeR.style.top=s)}}updateFooterTotals(){if(!(!this._options.showFooterRow||!this._initialized)){var t=null;this._data.getGrandTotals&&(t=this._data.getGrandTotals());for(var e=this._cols,s=0;s<e.length;s++){var i=e[s],o;i.field&&t&&(o=i.groupTotalsFormatter&&i.groupTotalsFormatter(t,i,this)||this.groupTotalsFormatter&&this.groupTotalsFormatter(t,i)||""),this.getFooterRowColumn(i.id).innerHTML=o}}}render(){if(!!this._initialized){var t=this.getVisibleRange(),e=this.getRenderedRange();if(this.cleanupRows(e),this._scrolLLeftRendered!=this._scrollLeft){if(this._hasFrozenRows){var s=Object.assign({},e);this._options.frozenBottom?(s.top=this._actualFrozenRow,s.bottom=this.getDataLength()):(s.top=0,s.bottom=this._options.frozenRow),this.cleanUpAndRenderCells(s)}this.cleanUpAndRenderCells(e)}this.renderRows(e),this._hasFrozenRows&&(this._options.frozenBottom?this.renderRows({top:this._actualFrozenRow,bottom:this.getDataLength()-1,leftPx:e.leftPx,rightPx:e.rightPx}):this.renderRows({top:0,bottom:this._options.frozenRow-1,leftPx:e.leftPx,rightPx:e.rightPx})),this._postProcessFromRow=t.top,this._postProcessToRow=Math.min(this.getDataLengthIncludingAddNew()-1,t.bottom),this.startPostProcessing(),this._scrollTopRendered=this._scrollTop,this._scrolLLeftRendered=this._scrollLeft,this._hRender=null}}handleMouseWheel(t,e,s,i){s=(typeof s=="undefined"?t.originalEvent.deltaX:s)||0,i=(typeof i=="undefined"?t.originalEvent.deltaY:i)||0,this._scrollTop=Math.max(0,this._scrollContainerY.scrollTop-i*this._options.rowHeight),this._scrollLeft=this._scrollContainerX.scrollLeft+s*10;var o=this._handleScroll(!0);o&&t.preventDefault()}handleScroll(){return this._scrollTop=this._scrollContainerY.scrollTop,this._scrollLeft=this._scrollContainerX.scrollLeft,this._handleScroll(!1)}_handleScroll(t){var e=this._scrollContainerY.scrollHeight-this._scrollContainerY.clientHeight,s=this._scrollContainerY.scrollWidth-this._scrollContainerY.clientWidth;e=Math.max(0,e),s=Math.max(0,s),this._scrollTop>e&&(this._scrollTop=e),this._scrollLeft>s&&(this._scrollLeft=s);var i=Math.abs(this._scrollTop-this._scrollTopPrev),o=Math.abs(this._scrollLeft-this._scrollLeftPrev);if((o||i)&&(this._ignoreScrollUntil=new Date().getTime()+100),o&&(this._scrollLeftPrev=this._scrollLeft,this._scrollContainerX.scrollLeft=this._scrollLeft,this.hasFrozenColumns()?(this._headerColsR.parentElement.scrollLeft=this._scrollLeft,this._topPanelR.parentElement.scrollLeft=this._scrollLeft,this._headerRowColsR.parentElement.scrollLeft=this._scrollLeft,this._footerRowColsR.parentElement.scrollLeft=this._scrollLeft,this._hasFrozenRows&&(this._viewportTopR.scrollLeft=this._scrollLeft)):(this._headerColsL.parentElement.scrollLeft=this._scrollLeft,this._topPanelL.parentElement.scrollLeft=this._scrollLeft,this._headerRowColsL.parentElement.scrollLeft=this._scrollLeft,this._footerRowColsL.parentElement.scrollLeft=this._scrollLeft,this._hasFrozenRows&&(this._viewportTopL.scrollLeft=this._scrollLeft))),i)if(this._vScrollDir=this._scrollTopPrev<this._scrollTop?1:-1,this._scrollTopPrev=this._scrollTop,t&&(this._scrollContainerY.scrollTop=this._scrollTop),this.hasFrozenColumns()&&(this._hasFrozenRows&&!this._options.frozenBottom?this._viewportBottomL.scrollTop=this._scrollTop:this._viewportTopL.scrollTop=this._scrollTop),i<this._viewportH)this.scrollTo(this._scrollTop+this._pageOffset);else{var r=this._pageOffset;this._realScrollHeight==this._viewportH?this._page=0:this._page=Math.min(this._numberOfPages-1,Math.floor(this._scrollTop*((this._virtualHeight-this._viewportH)/(this._realScrollHeight-this._viewportH))*(1/this._pageHeight))),this._pageOffset=Math.round(this._page*this._jumpinessCoefficient),r!=this._pageOffset&&this.invalidateAllRows()}return(o||i)&&(this._hRender&&clearTimeout(this._hRender),(Math.abs(this._scrollTopRendered-this._scrollTop)>20||Math.abs(this._scrolLLeftRendered-this._scrollLeft)>20)&&(this._options.forceSyncScrolling||Math.abs(this._scrollTopRendered-this._scrollTop)<this._viewportH&&Math.abs(this._scrolLLeftRendered-this._scrollLeft)<this._viewportW?this.render():this._hRender=setTimeout(this.render.bind(this),50),this.trigger(this.onViewportChanged))),this.trigger(this.onScroll,{scrollLeft:this._scrollLeft,scrollTop:this._scrollTop}),!!(o||i)}asyncPostProcessRows(){for(var t=this.getDataLength(),e=this._cols;this._postProcessFromRow<=this._postProcessToRow;){var s=this._vScrollDir>=0?this._postProcessFromRow++:this._postProcessToRow--,i=this._rowsCache[s];if(!(!i||s>=t)){this._postProcessedRows[s]||(this._postProcessedRows[s]={}),this.ensureCellNodesInRowsCache(s);for(var o in i.cellNodesByColumnIdx)if(!!i.cellNodesByColumnIdx.hasOwnProperty(o)){var r=parseInt(o,10),l=e[r],n=this._postProcessedRows[s][r];if(n!=="R"){if(l.asyncPostRender||l.asyncPostRenderCleanup){var a=i.cellNodesByColumnIdx[r];a&&l.asyncPostRender&&l.asyncPostRender(a,s,this.getDataItem(s),l,n==="C")}this._postProcessedRows[s][r]="R"}}if(this._options.asyncPostRenderDelay>=0){this._hPostRender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay);return}}}}asyncPostProcessCleanupRows(){for(var t=this._cols;this._postProcessCleanupQueue.length>0;){for(var e=this._postProcessCleanupQueue[0].groupId;this._postProcessCleanupQueue.length>0&&this._postProcessCleanupQueue[0].groupId==e;){var s=this._postProcessCleanupQueue.shift();if(s.rowNodeL&&s.rowNodeL.remove(),s.rowNodeR&&s.rowNodeR.remove(),s.cellNode!=null){var i=t[s.columnIdx];i&&i.asyncPostRenderCleanup&&(i.asyncPostRenderCleanup(s.cellNode,s.rowIdx,i),s.cellNode.remove())}}if(this._options.asyncPostRenderDelay>=0){this._hPostRenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostCleanupDelay);return}}}updateCellCssStylesOnRenderedRows(t,e){var s,i,o,r;for(var l in this._rowsCache){if(r=e&&e[l],o=t&&t[l],r)for(i in r)(!o||r[i]!=o[i])&&(s=this.getCellNode(parseInt(l,10),this.getColumnIndex(i)),s&&$(s).removeClass(r[i]));if(o)for(i in o)(!r||r[i]!=o[i])&&(s=this.getCellNode(parseInt(l,10),this.getColumnIndex(i)),s&&$(s).addClass(o[i]))}}addCellCssStyles(t,e){if(this._cellCssClasses[t])throw"addCellCssStyles: cell CSS hash with key '"+t+"' already exists.";this._cellCssClasses[t]=e,this.updateCellCssStylesOnRenderedRows(e,null),this.trigger(this.onCellCssStylesChanged,{key:t,hash:e})}removeCellCssStyles(t){!this._cellCssClasses[t]||(this.updateCellCssStylesOnRenderedRows(null,this._cellCssClasses[t]),delete this._cellCssClasses[t],this.trigger(this.onCellCssStylesChanged,{key:t,hash:null}))}setCellCssStyles(t,e){var s=this._cellCssClasses[t];this._cellCssClasses[t]=e,this.updateCellCssStylesOnRenderedRows(e,s),this.trigger(this.onCellCssStylesChanged,{key:t,hash:e})}getCellCssStyles(t){return this._cellCssClasses[t]}flashCell(t,e,s){if(s=s||100,this._rowsCache[t]){var i=$(this.getCellNode(t,e));r(4)}var o=this._options.cellFlashingCssClass;function r(l){!l||setTimeout(function(){i.queue(function(){i.toggleClass(o).dequeue(),r(l-1)})},s)}}handleDragInit(t,e){var s=this.getCellFromEvent(t);if(!s||!this.cellExists(s.row,s.cell))return!1;var i=this.trigger(this.onDragInit,e,t);return t.isImmediatePropagationStopped()?i:!1}handleDragStart(t,e){var s=this.getCellFromEvent(t);if(!s||!this.cellExists(s.row,s.cell))return!1;var i=this.trigger(this.onDragStart,e,t);return t.isImmediatePropagationStopped()?i:!1}handleDrag(t,e){return this.trigger(this.onDrag,e,t)}handleDragEnd(t,e){this.trigger(this.onDragEnd,e,t)}handleKeyDown(t){this.trigger(this.onKeyDown,{row:this._activeRow,cell:this._activeCell},t);var e=t.isImmediatePropagationStopped();if(!e&&!t.shiftKey&&!t.altKey){if(this._options.editable&&this._currentEditor&&this._currentEditor.keyCaptureList&&this._currentEditor.keyCaptureList.indexOf(t.which)>=0)return;t.which==L.HOME?t.ctrlKey?(this.navigateTop(),e=!0):e=this.navigateRowStart():t.which==L.END&&(t.ctrlKey?(this.navigateBottom(),e=!0):e=this.navigateRowEnd())}if(!e)if(!t.shiftKey&&!t.altKey&&!t.ctrlKey){if(this._options.editable&&this._currentEditor&&this._currentEditor.keyCaptureList&&this._currentEditor.keyCaptureList.indexOf(t.which)>=0)return;if(t.which==L.ESCAPE){if(!this.getEditorLock().isActive())return;this.cancelEditAndSetFocus()}else t.which==L.PAGEDOWN?(this.navigatePageDown(),e=!0):t.which==L.PAGEUP?(this.navigatePageUp(),e=!0):t.which==L.LEFT?e=this.navigateLeft():t.which==L.RIGHT?e=this.navigateRight():t.which==L.UP?e=this.navigateUp():t.which==L.DOWN?e=this.navigateDown():t.which==L.TAB?this._options.enableTabKeyNavigation&&(e=this.navigateNext()):t.which==L.ENTER&&(this._options.editable&&(this._currentEditor?this._activeRow===this.getDataLength()?this.navigateDown():this.commitEditAndSetFocus():this.getEditorLock().commitCurrentEdit()&&this.makeActiveCellEditable()),e=!0)}else t.which==L.TAB&&t.shiftKey&&!t.ctrlKey&&!t.altKey&&(e=this.navigatePrev());if(e){t.stopPropagation(),t.preventDefault();try{t.originalEvent.keyCode=0}catch(s){}}}handleClick(t){this._currentEditor||(t.target!=document.activeElement||$(t.target).hasClass("slick-cell"))&&this.setFocus();var e=this.getCellFromEvent(t);if(!(!e||this._currentEditor!=null&&this._activeRow==e.row&&this._activeCell==e.cell)&&(this.trigger(this.onClick,{row:e.row,cell:e.cell},t),!t.isImmediatePropagationStopped()&&this.canCellBeActive(e.row,e.cell)&&(!this.getEditorLock().isActive()||this.getEditorLock().commitCurrentEdit()))){var s=t.target&&t.target.classList.contains(k),i=this._cols[e.cell],o=!!(this._options.editable&&i&&i.editor&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(this.getCellNode(e.row,e.cell),null,s,o,t)}}handleContextMenu(t){var e=$(t.target).closest(".slick-cell",this._container);e.length!==0&&(this._activeCellNode===e[0]&&this._currentEditor!=null||this.trigger(this.onContextMenu,{},t))}handleDblClick(t){var e=this.getCellFromEvent(t);!e||this._currentEditor!=null&&this._activeRow==e.row&&this._activeCell==e.cell||(this.trigger(this.onDblClick,{row:e.row,cell:e.cell},t),!t.isImmediatePropagationStopped()&&this._options.editable&&this.gotoCell(e.row,e.cell,!0))}handleHeaderMouseEnter(t){let e=this.getColumnFromNode(t.target);e&&this.trigger(this.onHeaderMouseEnter,{column:e},t)}handleHeaderMouseLeave(t){let e=this.getColumnFromNode(t.target);e&&this.trigger(this.onHeaderMouseLeave,{column:e},t)}handleHeaderContextMenu(t){var e=t.target.closest(".slick-header-column"),s=this.getColumnFromNode(e);s&&this.trigger(this.onHeaderContextMenu,{column:s},t)}handleHeaderClick(t){var e=t.target.closest(".slick-header-column"),s=this.getColumnFromNode(e);s&&this.trigger(this.onHeaderClick,{column:s},t)}handleMouseEnter(t){this.trigger(this.onMouseEnter,{},t)}handleMouseLeave(t){this.trigger(this.onMouseLeave,{},t)}cellExists(t,e){return!(t<0||t>=this.getDataLength()||e<0||e>=this._cols.length)}getCellFromPoint(t,e){for(var s=this.getRowFromPosition(e),i=0,o=this._cols,r=0,l=0;l<o.length&&r<t;l++)r+=o[l].width,i++;return i<0&&(i=0),{row:s,cell:i-1}}getCellFromNode(t){if(t==null)return null;var e=t.dataset.c;if(e!=null)return parseInt(e,10);var s=/\sl(\d+)\s/.exec(" "+t.className+" ");return s?parseInt(s[1],10):null}getColumnFromNode(t){if(t==null)return null;var e=this.getCellFromNode(t);return e===null&&typeof $!="undefined"?$(e).data("column"):this._cols[e]}getRowFromNode(t){if(t!=null)for(var e in this._rowsCache){var s=this._rowsCache[e];if(s.rowNodeL===t||s.rowNodeR===t)return parseInt(e,10)}return null}getFrozenRowOffset(t){var e=this._hasFrozenRows?this._options.frozenBottom?t>=this._actualFrozenRow?this._realScrollHeight<this._viewportTopH?this._actualFrozenRow*this._options.rowHeight:this._realScrollHeight:0:t>=this._actualFrozenRow?this._frozenRowsHeight:0:0;return e}getCellFromEvent(t){var e,s,i=t.target.closest(".slick-cell");if(!i)return null;if(e=this.getRowFromNode(i.parentNode),this._hasFrozenRows){var o=i.closest(".grid-canvas").getBoundingClientRect(),r=0,l=i.closest(".grid-canvas-bottom")!=null;l&&(r=this._options.frozenBottom?Math.round(parseFloat(getComputedStyle(this._canvasTopL).height)):this._frozenRowsHeight),e=this.getCellFromPoint(t.clientX-o[this._rtlS]-document.body.scrollLeft,t.clientY-o.top+document.body.scrollTop+r+document.body.scrollTop).row}return s=this.getCellFromNode(i),e==null||s==null?null:{row:e,cell:s}}getCellNodeBox(t,e){if(!this.cellExists(t,e))return null;for(var s=this.getFrozenRowOffset(t),i=this._cols,o=this._frozenCols,r=this.getRowTop(t)-s,l=r+this._options.rowHeight-1,n=0,a=0;a<e;a++)n+=i[a].width,a==o-1&&(n=0);var d=n+i[e].width;return this._rtl?{top:r,right:n,bottom:l,left:d}:{top:r,left:n,bottom:l,right:d}}resetActiveCell(){this.setActiveCellInternal(null,!1)}focus(){this.setFocus()}setFocus(){this._tabbingDirection==-1?this._focusSink1.focus():this._focusSink2.focus()}scrollCellIntoView(t,e,s){if(this.scrollRowIntoView(t,s),!(e<this._frozenCols)){var i=this.getColspan(t,e);this.internalScrollColumnIntoView(this._colLeft[e],this._colRight[e+(i>1?i-1:0)])}}scrollColumnIntoView(t){this.internalScrollColumnIntoView(this._colLeft[t],this._colRight[t])}internalScrollColumnIntoView(t,e){var s=this._scrollLeft+parseFloat(getComputedStyle(this._scrollContainerX).width)-(this._viewportHasVScroll?this._scrollDims.width:0),i;if(t<this._scrollLeft)i=t;else if(e>s)i=Math.min(t,e-this._scrollContainerX.clientWidth);else return;this._scrollContainerX.scrollLeft=i,this.handleScroll(),this.render()}setActiveCellInternal(t,e,s,i,o){if(this._activeCellNode!=null){this.makeActiveCellNormal(),this._activeCellNode.classList.remove("active");var r=this._rowsCache[this._activeRow];r&&(r.rowNodeL&&r.rowNodeL.classList.remove("active"),r.rowNodeR&&r.rowNodeR.classList.remove("active"))}if(this._activeCellNode=t,this._activeCellNode!=null){var l=this._activeCellNode.getBoundingClientRect(),n=Math.floor(this._activeCellNode.closest(".grid-canvas").getBoundingClientRect().top+document.body.scrollTop),a=this._activeCellNode.closest(".grid-canvas-bottom")!=null;this._hasFrozenRows&&a&&(n-=this._options.frozenBottom?Math.round(parseFloat(getComputedStyle(this._canvasTopL).height)):this._frozenRowsHeight);var d=this.getCellFromPoint(l[this._rtlS]+document.body.scrollLeft,Math.ceil(l.top+document.body.scrollTop)-n);if(this._activeRow=d.row,this._activeCell=this._activePosX=this.getCellFromNode(this._activeCellNode),this._options.showCellSelection){this._activeCellNode.classList.add("active");var r=this._rowsCache[this._activeRow];r&&(r.rowNodeL&&r.rowNodeL.classList.add("active"),r.rowNodeR&&r.rowNodeR.classList.add("active"))}e==null&&(e=this._activeRow==this.getDataLength()||this._options.autoEdit),this._options.editable&&e&&this.isCellPotentiallyEditable(this._activeRow,this._activeCell)&&(clearTimeout(this._hEditorLoader),this._options.asyncEditorLoading?this._hEditorLoader=setTimeout(()=>{this.makeActiveCellEditable(void 0,s,o)},this._options.asyncEditorLoadDelay):this.makeActiveCellEditable(void 0,s,o))}else this._activeRow=this._activeCell=null;i||this.trigger(this.onActiveCellChanged,this.getActiveCell())}clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(e){}else if(window.getSelection){var t=window.getSelection();t&&t.removeAllRanges&&t.removeAllRanges()}}isCellPotentiallyEditable(t,e){var s=this.getDataLength();return!(t<s&&!this.getDataItem(t)||this._cols[e].cannotTriggerInsert&&t>=s||!this.getEditor(t,e))}makeActiveCellNormal(){if(!!this._currentEditor){if(this.trigger(this.onBeforeCellEditorDestroy,{editor:this._currentEditor}),this._currentEditor.destroy(),this._currentEditor=null,this._activeCellNode){var t=this.getDataItem(this._activeRow);if(this._activeCellNode.classList.remove("editable","invalid"),t){var e=this._cols[this._activeCell],s=t?this.getFormatter(this._activeRow,e)(this._activeRow,this._activeCell,this.getDataItemValueForColumn(t,e),e,t):"";this.applyFormatResultToCellNode(s,this._activeCellNode),this.invalidatePostProcessingResults(this._activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&this.clearTextSelection(),this.getEditorLock().deactivate(this._editController)}}editActiveCell(t){this.makeActiveCellEditable(t)}makeActiveCellEditable(t,e,s){if(!!this._activeCellNode){if(!this._options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";if(clearTimeout(this._hEditorLoader),!!this.isCellPotentiallyEditable(this._activeRow,this._activeCell)){var i=this._cols[this._activeCell],o=this.getDataItem(this._activeRow);if(this.trigger(this.onBeforeEditCell,{row:this._activeRow,cell:this._activeCell,item:o,column:i})===!1){this.setFocus();return}this.getEditorLock().activate(this._editController),this._activeCellNode.classList.add("editable");var r=t||this.getEditor(this._activeRow,this._activeCell);!t&&!r.suppressClearOnEdit&&(this._activeCellNode.innerHTML="");var l=this._data.getItemMetadata&&this._data.getItemMetadata(this._activeRow);l=l&&l.columns;var n=l&&(l[i.id]||l[this._activeCell]);this._currentEditor=new r({grid:this,gridPosition:this.absBox(this._container),position:this.absBox(this._activeCellNode),container:this._activeCellNode,column:i,item:o||{},event:s,commitChanges:this.commitEditAndSetFocus,cancelChanges:this.cancelEditAndSetFocus}),o&&(this._currentEditor.loadValue(o),e&&this._currentEditor.preClick&&this._currentEditor.preClick()),this._serializedEditorValue=this._currentEditor.serializeValue(),this._currentEditor.position&&this.handleActiveCellPositionChange()}}}commitEditAndSetFocus(){this.getEditorLock().commitCurrentEdit()&&(this.setFocus(),this._options.autoEdit&&this.navigateDown())}cancelEditAndSetFocus(){this.getEditorLock().cancelCurrentEdit()&&this.setFocus()}absBox(t){var e={top:t.offsetTop,bottom:0,width:t.offsetWidth,height:t.offsetHeight,visible:!0};e[this._rtlS]=t.offsetLeft,e[this._rtlE]=0,e.bottom=e.top+e.height,e[this._rtlE]=e[this._rtlS]+e.width;for(var s=t.offsetParent;(t=t.parentNode)!=document.body;)e.visible&&t.scrollHeight!=t.offsetHeight&&getComputedStyle(t).overflowY!=="visible"&&(e.visible=e.bottom>t.scrollTop&&e.top<t.scrollTop+t.clientHeight),e.visible&&t.scrollWidth!=t.offsetWidth&&getComputedStyle(t).overflowX!="visible"&&(e.visible=e[this._rtlE]>t.scrollLeft&&e[this._rtlS]<t.scrollLeft+t.clientWidth),e[this._rtlS]-=t.scrollLeft,e.top-=t.scrollTop,t===s&&(e.right+=t.offsetLeft,e.top+=t.offsetTop,s=t.offsetParent),e.bottom=e.top+e.height,e[this._rtlE]=e[this._rtlS]+e.width;return e}getActiveCellPosition(){return this.absBox(this._activeCellNode)}getGridPosition(){return this.absBox(this._container)}getCellEditor(){return this._currentEditor}getActiveCell(){return this._activeCellNode?{row:this._activeRow,cell:this._activeCell}:null}getActiveCellNode(){return this._activeCellNode}scrollActiveCellIntoView(){this._activeRow!=null&&this._activeCell!=null&&this.scrollCellIntoView(this._activeRow,this._activeCell)}scrollRowIntoView(t,e){if(!this._hasFrozenRows||!this._options.frozenBottom&&t>this._actualFrozenRow-1||this._options.frozenBottom&&t<this._actualFrozenRow-1){var s=Math.round(parseFloat(getComputedStyle(this._scrollContainerY).height)),i=this._hasFrozenRows&&!this._options.frozenBottom?t-this._options.frozenRow:t,o=i*this._options.rowHeight,r=(i+1)*this._options.rowHeight-s+(this._viewportHasHScroll?this._scrollDims.height:0);(i+1)*this._options.rowHeight>this._scrollTop+s+this._pageOffset?(this.scrollTo(e?o:r),this.render()):i*this._options.rowHeight<this._scrollTop+this._pageOffset&&(this.scrollTo(e?r:o),this.render())}}scrollRowToTop(t){this.scrollTo(t*this._options.rowHeight),this.render()}scrollPage(t){var e=t*this._numVisibleRows;if(this.scrollTo((this.getRowFromPosition(this._scrollTop)+e)*this._options.rowHeight),this.render(),this._options.enableCellNavigation&&this._activeRow!=null){var s=this._activeRow+e,i=this.getDataLengthIncludingAddNew();s>=i&&(s=i-1),s<0&&(s=0);for(var o=0,r=null,l=this._activePosX;o<=this._activePosX;)this.canCellBeActive(s,o)&&(r=o),o+=this.getColspan(s,o);r!=null?(this.setActiveCellInternal(this.getCellNode(s,r)),this._activePosX=l):this.resetActiveCell()}}navigatePageDown(){this.scrollPage(1)}navigatePageUp(){this.scrollPage(-1)}navigateTop(){this.navigateToRow(0)}navigateBottom(){this.navigateToRow(this.getDataLength()-1)}navigateToRow(t){var e=this.getDataLength();if(!e)return!0;if(t<0?t=0:t>=e&&(t=e-1),this.scrollCellIntoView(t,0,!0),this._options.enableCellNavigation&&this._activeRow!=null){for(var s=0,i=null,o=this._activePosX;s<=this._activePosX;)this.canCellBeActive(t,s)&&(i=s),s+=this.getColspan(t,s);i!=null?(this.setActiveCellInternal(this.getCellNode(t,i)),this._activePosX=o):this.resetActiveCell()}return!0}getColspan(t,e){var s=this._data.getItemMetadata&&this._data.getItemMetadata(t);if(!s||!s.columns)return 1;var i=this._cols,o=i[e]&&(s.columns[i[e].id]||s.columns[e]),r=o&&o.colspan;return r==="*"?r=i.length-e:r=r||1,r}findFirstFocusableCell(t){for(var e=0,s=this._cols;e<s.length;){if(this.canCellBeActive(t,e))return e;e+=this.getColspan(t,e)}return null}findLastFocusableCell(t){for(var e=0,s=null,i=this._cols;e<i.length;)this.canCellBeActive(t,e)&&(s=e),e+=this.getColspan(t,e);return s}gotoRight(t,e,s){var i=this._cols;if(e>=i.length)return null;do e+=this.getColspan(t,e);while(e<i.length&&!this.canCellBeActive(t,e));return e<i.length?{row:t,cell:e,posX:e}:null}gotoLeft(t,e,s){if(e<=0)return null;var i=this.findFirstFocusableCell(t);if(i===null||i>=e)return null;for(var o={row:t,cell:i,posX:i},r;;){if(r=this.gotoRight(o.row,o.cell,o.posX),!r)return null;if(r.cell>=e)return o;o=r}}gotoDown(t,e,s){for(var i,o=this.getDataLengthIncludingAddNew();;){if(++t>=o)return null;for(i=e=0;e<=s;)i=e,e+=this.getColspan(t,e);if(this.canCellBeActive(t,i))return{row:t,cell:i,posX:s}}}gotoUp(t,e,s){for(var i;;){if(--t<0)return null;for(i=e=0;e<=s;)i=e,e+=this.getColspan(t,e);if(this.canCellBeActive(t,i))return{row:t,cell:i,posX:s}}}gotoNext(t,e,s){if(t==null&&e==null&&(t=e=s=0,this.canCellBeActive(t,e)))return{row:t,cell:e,posX:e};var i=this.gotoRight(t,e,s);if(i)return i;for(var o=null,r=this.getDataLengthIncludingAddNew();++t<r;)if(o=this.findFirstFocusableCell(t),o!=null)return{row:t,cell:o,posX:o};return null}gotoPrev(t,e,s){var i=this._cols;if(t==null&&e==null&&(t=this.getDataLengthIncludingAddNew()-1,e=s=i.length-1,this.canCellBeActive(t,e)))return{row:t,cell:e,posX:e};for(var o,r;!o&&(o=this.gotoLeft(t,e,s),!o);){if(--t<0)return null;e=0,r=this.findLastFocusableCell(t),r!=null&&(o={row:t,cell:r,posX:r})}return o}gotoRowStart(t){var e=this.findFirstFocusableCell(t);return e===null?null:{row:t,cell:e,posX:e}}gotoRowEnd(t){var e=this.findLastFocusableCell(t);return e===null?null:{row:t,cell:e,posX:e}}navigateRight(){return this.navigate("right")}navigateLeft(){return this.navigate("left")}navigateDown(){return this.navigate("down")}navigateUp(){return this.navigate("up")}navigateNext(){return this.navigate("next")}navigatePrev(){return this.navigate("prev")}navigateRowStart(){return this.navigate("home")}navigateRowEnd(){return this.navigate("end")}navigate(t){if(!this._options.enableCellNavigation||!this._activeCellNode&&t!="prev"&&t!="next")return!1;if(!this.getEditorLock().commitCurrentEdit())return!0;this.setFocus();var e={up:-1,down:1,prev:-1,next:1,home:-1,end:1};e[this._rtlS]=-1,e[this._rtlE]=1,this._tabbingDirection=e[t];var s={up:this.gotoUp,down:this.gotoDown,prev:this.gotoPrev,next:this.gotoNext,home:this.gotoRowStart,end:this.gotoRowEnd};s[this._rtlS]=this.gotoLeft,s[this._rtlE]=this.gotoRight;var i=s[t].bind(this),o=i(this._activeRow,this._activeCell,this._activePosX);if(o){if(this._hasFrozenRows&&this._options.frozenBottom&&o.row==this.getDataLength())return;var r=o.row==this.getDataLength();return(!this._options.frozenBottom&&o.row>=this._actualFrozenRow||this._options.frozenBottom&&o.row<this._actualFrozenRow)&&this.scrollCellIntoView(o.row,o.cell,!r),this.setActiveCellInternal(this.getCellNode(o.row,o.cell)),this._activePosX=o.posX,!0}else return this.setActiveCellInternal(this.getCellNode(this._activeRow,this._activeCell)),!1}getCellNode(t,e){return this._rowsCache[t]?(this.ensureCellNodesInRowsCache(t),this._rowsCache[t].cellNodesByColumnIdx[e]):null}setActiveCell(t,e){if(!!this._initialized){var s=this._cols;t>this.getDataLength()||t<0||e>=s.length||e<0||!this._options.enableCellNavigation||(this.scrollCellIntoView(t,e,!1),this.setActiveCellInternal(this.getCellNode(t,e),!1))}}canCellBeActive(t,e){var s=this._cols;if(!this._options.enableCellNavigation||t>=this.getDataLengthIncludingAddNew()||t<0||e>=s.length||e<0)return!1;var i=this._data.getItemMetadata&&this._data.getItemMetadata(t);if(i&&typeof i.focusable=="boolean")return i.focusable;var o=i&&i.columns;return o&&s[e]&&o[s[e].id]&&typeof o[s[e].id].focusable=="boolean"?o[s[e].id].focusable:o&&o[e]&&typeof o[e].focusable=="boolean"?o[e].focusable:s[e].focusable}canCellBeSelected(t,e){var s=this._cols;if(t>=this.getDataLength()||t<0||e>=s.length||e<0)return!1;var i=this._data.getItemMetadata&&this._data.getItemMetadata(t);if(i&&typeof i.selectable=="boolean")return i.selectable;var o=i&&i.columns&&(i.columns[s[e].id]||i.columns[e]);return o&&typeof o.selectable=="boolean"?o.selectable:s[e].selectable}gotoCell(t,e,s){if(!!this._initialized&&!!this.canCellBeActive(t,e)&&!!this.getEditorLock().commitCurrentEdit()){this.scrollCellIntoView(t,e,!1);var i=this.getCellNode(t,e);this.setActiveCellInternal(i,s||t===this.getDataLength()||this._options.autoEdit),this._currentEditor||this.setFocus()}}commitCurrentEdit(){var t=this.getDataItem(this._activeRow),e=this._cols[this._activeCell],s=this;if(this._currentEditor){if(this._currentEditor.isValueChanged()){var i=this._currentEditor.validate();if(i.valid){if(this._activeRow<this.getDataLength()){var o={row:this._activeRow,cell:s._activeCell,editor:this._currentEditor,serializedValue:this._currentEditor.serializeValue(),prevSerializedValue:this._serializedEditorValue,execute:function(){this.editor.applyValue(t,this.serializedValue),s.updateRow(this.row),s.trigger(s.onCellChange,{row:this.activeRow,cell:s._activeCell,item:t})},undo:function(){this.editor.applyValue(t,this.prevSerializedValue),s.updateRow(this.row),s.trigger(s.onCellChange,{row:this.activeRow,cell:s._activeCell,item:t})}};this._options.editCommandHandler?(this.makeActiveCellNormal(),this._options.editCommandHandler(t,e,o)):(o.execute(),this.makeActiveCellNormal())}else{var r={};this._currentEditor.applyValue(r,this._currentEditor.serializeValue()),this.makeActiveCellNormal(),this.trigger(this.onAddNewRow,{item:r,column:e})}return!this.getEditorLock().isActive()}else return this._activeCellNode.classList.remove("invalid"),this._activeCellNode.offsetWidth,this._activeCellNode.classList.add("invalid"),this.trigger(this.onValidationError,{editor:this._currentEditor,cellNode:this._activeCellNode,validationResults:i,row:this._activeRow,cell:this._activeCell,column:e}),this._currentEditor.focus(),!1}this.makeActiveCellNormal()}return!0}cancelCurrentEdit(){return this.makeActiveCellNormal(),!0}rowsToRanges(t){for(var e=[],s=this._cols.length-1,i=0;i<t.length;i++)e.push(new P(t[i],0,t[i],s));return e}getSelectedRows(){if(!this._selectionModel)throw"Selection model is not set";return this._selectedRows}setSelectedRows(t){if(!this._selectionModel)throw"Selection model is not set";this._selectionModel.setSelectedRanges(this.rowsToRanges(t))}};export{x as EditorLock,_ as Event,H as EventData,B as EventHandler,W as GlobalEditorLock,Y as Grid,V as Group,O as GroupTotals,T as NonDataRow,P as Range,G as columnDefaults,J as gridDefaults,L as keyCode,k as preClickClassName};
