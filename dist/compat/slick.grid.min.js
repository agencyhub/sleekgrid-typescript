var Slick=Slick||{};Slick._=(()=>{var I=Object.defineProperty;var ie=Object.getOwnPropertyDescriptor;var se=Object.getOwnPropertyNames;var oe=Object.prototype.hasOwnProperty;var re=(u,e)=>{for(var t in e)I(u,t,{get:e[t],enumerable:!0})},le=(u,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of se(e))!oe.call(u,s)&&s!==t&&I(u,s,{get:()=>e[s],enumerable:!(i=ie(e,s))||i.enumerable});return u};var ne=u=>le(I({},"__esModule",{value:!0}),u);var ae={};re(ae,{Grid:()=>X,columnDefaults:()=>z,gridDefaults:()=>G});var z={name:"",nameIsHtml:!1,resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null,footerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0};var{Event:f,EventData:j,GlobalEditorLock:U,keyCode:P,NonDataRow:K,preClickClassName:Y,Range:J}=Slick;var A,N;function D(u,e){if((e==null?void 0:e.frozenColumn)==null){delete e.frozenColumn;return}var t=e.frozenColumn+1;e.frozenColumn=-1;for(var i=0;i<u.length;){var s=u[i++];t>0&&s.visible!==!1?(s.frozen=!0,e.frozenColumn++,t--):s.frozen!==void 0&&delete s.frozen}}function x(u){return u==null?"":u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function q(u,e,t){return V(t)}function k(u){u&&(u.setAttribute("unselectable","on"),u.style.userSelect="none",u.addEventListener("selectstart",()=>!1))}function B(){return A!=null?A:navigator.userAgent.toLowerCase().match(/gecko\//)?4e6:32e6}function W(u){if(!N||u){var e=document.body.appendChild(p("div",{style:"position:absolute;top:-10000px;left:-10000px;width:100px;height:100px;overflow: scroll;border:0"}));N={width:Math.round(e.offsetWidth-e.clientWidth),height:Math.round(e.offsetWidth-e.clientHeight)},e.remove()}return N}function p(u,e,...t){var i=document.createElement(u),s,o,r;if(e)for(s in e)o=e[s],o!=null&&o!==!1&&i.setAttribute(s,o===!0?"":o);if(t)for(r of t)i.appendChild(r);return i}function V(u){return(u+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Z(u,e){if(!Array.isArray(u)||!Array.isArray(e)||u.length!==e.length)return!1;u.sort(),e.sort();for(var t=0;t<u.length;t++)if(u[t]!==e[t])return!1;return!0}function O(u,e){if(e.length==0)return u;for(var t={},i={},s=[],o=0;o<e.length;o++)t[e[o]]=o;for(o=0;o<u.length;o++)i[u[o].id]=o;function r(a){for(var h=a;h<u.length;h++){var v=u[h];if(a!=h&&t[v.id]!=null)break;s.push(v),i[v.id]=null}}t[u[0].id]==null&&r(0);for(var l of e)o=i[l],o!=null&&r(o);for(o=0;o<u.length;o++){var n=u[o];i[n.id]!=null&&(s.push(n),i[n.id]=null)}return s}function ee(){var u;(u=this==null?void 0:this.classList)==null||u.add("ui-state-hover")}function te(){var u;(u=this==null?void 0:this.classList)==null||u.remove("ui-state-hover")}var G={addNewRowCssClass:"new-row",alwaysAllowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,asyncEditorLoadDelay:100,asyncEditorLoading:!1,asyncPostCleanupDelay:40,asyncPostRenderDelay:50,autoEdit:!0,autoHeight:!1,cellFlashingCssClass:"flashing",dataItemColumnValueExtractor:null,defaultColumnWidth:80,defaultFormatter:q,editable:!1,editorFactory:null,editorLock:U,enableAddRow:!1,enableAsyncPostRender:!1,enableAsyncPostRenderCleanup:!1,enableCellNavigation:!0,enableColumnReorder:!0,enableTabKeyNavigation:!0,enableTextSelectionOnCells:!1,explicitInitialization:!1,footerRowHeight:32,forceFitColumns:!1,forceSyncScrolling:!1,formatterFactory:null,frozenBottom:!1,frozenRow:-1,fullWidthRows:!1,groupingPanel:!1,groupingPanelHeight:34,headerRowHeight:32,leaveSpaceForNewRows:!1,useLegacyUI:!0,minBuffer:3,multiColumnSort:!1,multiSelect:!0,renderAllCells:!1,rowHeight:32,selectedCellCssClass:"selected",showCellSelection:!0,showColumnHeader:!0,showFooterRow:!1,showGroupingPanel:!0,showHeaderRow:!1,showTopPanel:!1,suppressActiveCellChangeOnEdit:!1,topPanelHeight:25};var X=class{constructor(e,t,i,s){this._activeCellNode=null;this._actualFrozenRow=-1;this._cellCssClasses={};this._cellHeightDiff=0;this._cellWidthDiff=0;this._colLeft=[];this._colRight=[];this._currentEditor=null;this._footerRowH=0;this._frozenRowsHeight=0;this._groupingPanelH=0;this._hasFrozenRows=!1;this._headerColumnWidthDiff=0;this._headerRowH=0;this._hEditorLoader=null;this._hPostRender=null;this._hPostRenderCleanup=null;this._hRender=null;this._ignoreScrollUntil=0;this._initialized=!1;this._numVisibleRows=0;this._page=0;this._pageOffset=0;this._pagingActive=!1;this._pagingIsLastPage=!1;this._paneBottomH=0;this._paneTopH=0;this._plugins=[];this._postProcessCleanupQueue=[];this._postProcessedRows={};this._postProcessFromRow=null;this._postProcessGroupId=0;this._postProcessToRow=null;this._rowsCache={};this._rtl=!1;this._rtlE="right";this._rtlS="left";this._scrollLeft=0;this._scrollLeftPrev=0;this._scrolLLeftRendered=0;this._scrollTop=0;this._scrollTopPrev=0;this._scrollTopRendered=0;this._selectedRows=[];this._sortColumns=[];this._tabbingDirection=1;this._topPanelH=0;this._uid="sleekgrid_"+Math.round(1e6*Math.random());this._viewportTopH=0;this._vScrollDir=1;this._boundAncestorScroll=[];this.onActiveCellChanged=new f;this.onActiveCellPositionChanged=new f;this.onAddNewRow=new f;this.onBeforeCellEditorDestroy=new f;this.onBeforeDestroy=new f;this.onBeforeEditCell=new f;this.onBeforeFooterRowCellDestroy=new f;this.onBeforeHeaderCellDestroy=new f;this.onBeforeHeaderRowCellDestroy=new f;this.onCellChange=new f;this.onCellCssStylesChanged=new f;this.onClick=new f;this.onColumnsReordered=new f;this.onColumnsResized=new f;this.onContextMenu=new f;this.onDblClick=new f;this.onDrag=new f;this.onDragEnd=new f;this.onDragInit=new f;this.onDragStart=new f;this.onFooterRowCellRendered=new f;this.onHeaderCellRendered=new f;this.onHeaderClick=new f;this.onHeaderContextMenu=new f;this.onHeaderMouseEnter=new f;this.onHeaderMouseLeave=new f;this.onHeaderRowCellRendered=new f;this.onKeyDown=new f;this.onMouseEnter=new f;this.onMouseLeave=new f;this.onScroll=new f;this.onSelectedRowsChanged=new f;this.onSort=new f;this.onValidationError=new f;this.onViewportChanged=new f;this.handleSelectedRangesChanged=(e,t)=>{var i=this._selectedRows.slice(0);this._selectedRows=[];for(var h={},v=this._cols,s=0;s<t.length;s++)for(var o=t[s].fromRow;o<=t[s].toRow;o++){h[o]||(this._selectedRows.push(o),h[o]={});for(var r=t[s].fromCell;r<=t[s].toCell;r++)this.canCellBeSelected(o,r)&&(h[o][v[r].id]=this._options.selectedCellCssClass)}if(this.setCellCssStyles(this._options.selectedCellCssClass,h),!Z(i,this._selectedRows)){var l=e&&e.detail&&e.detail.caller||"click",n=this._selectedRows.filter(c=>i.indexOf(c)<0),a=i.filter(c=>this._selectedRows.indexOf(c)<0);this.trigger(this.onSelectedRowsChanged,{rows:this.getSelectedRows(),previousSelectedRows:i,caller:l,changedSelectedRows:n,changedUnselectedRows:a},e)}this._selectedRows=[];for(var h={},v=this._cols,s=0;s<t.length;s++)for(var o=t[s].fromRow;o<=t[s].toRow;o++){h[o]||(this._selectedRows.push(o),h[o]={});for(var r=t[s].fromCell;r<=t[s].toCell;r++)this.canCellBeSelected(o,r)&&(h[o][v[r].id]=this._options.selectedCellCssClass)}};this.viewOnRowCountChanged=()=>{this.updateRowCount(),this.render()};this.viewOnRowsChanged=(e,t)=>{this.invalidateRows(t.rows),this.render(),this.updateFooterTotals()};this.viewOnDataChanged=()=>{this.invalidate(),this.render()};this.resizeCanvas=()=>{if(!!this._initialized){this._paneTopH=0,this._paneBottomH=0,this._viewportTopH=0,this.getViewportWidth(),this.getViewportHeight(),this._hasFrozenRows?this._options.frozenBottom?(this._paneTopH=this._viewportH-this._frozenRowsHeight-this._scrollDims.height,this._paneBottomH=this._frozenRowsHeight+this._scrollDims.height):(this._paneTopH=this._frozenRowsHeight,this._paneBottomH=this._viewportH-this._frozenRowsHeight):this._paneTopH=this._viewportH,this._paneTopH+=this._topPanelH+this._headerRowH+this._footerRowH,this.hasFrozenColumns()&&this._options.autoHeight&&(this._paneTopH+=this._scrollDims.height),this._viewportTopH=this._paneTopH-this._topPanelH-this._headerRowH-this._footerRowH,this._options.autoHeight?(this.hasFrozenColumns()&&(this._container.style.height=this._paneTopH+parseFloat(getComputedStyle(this._headerColsL.parentElement).height)+"px"),this._paneTopL.style.position="relative"):this._paneTopL.style.position="",this._paneTopL.style.top=this._groupingPanelH+(parseFloat(getComputedStyle(this._paneHeaderL).height)||this._headerRowH)+"px",this._paneTopL.style.height=this._paneTopH+"px";var e=this._paneTopL.offsetTop+this._paneTopH;this._options.autoHeight||(this._viewportTopL.style.height=this._viewportTopH+"px"),this.hasFrozenColumns()?(this._paneTopR.style.top=this._paneTopL.style.top,this._paneTopR.style.height=this._paneTopH+"px",this._viewportTopR.style.height=this._viewportTopH+"px",this._hasFrozenRows&&(this._paneBottomL.style.top=e+"px",this._paneBottomL.style.height=this._paneBottomH+"px",this._paneBottomR.style.top=e+"px",this._paneBottomR.style.height=this._paneBottomH+"px",this._viewportBottomR.style.height=this._paneBottomH+"px")):this._hasFrozenRows&&(this._paneBottomL.style.width="100%",this._paneBottomL.style.height=this._paneBottomH+"px",this._paneBottomL.style.top=e+"px"),this._hasFrozenRows?(this._viewportBottomL.style.height=this._paneBottomH+"px",this._options.frozenBottom?(this._canvasBottomL.style.height=this._frozenRowsHeight+"px",this.hasFrozenColumns()&&(this._canvasBottomR.style.height=this._frozenRowsHeight+"px")):(this._canvasTopL.style.height=this._frozenRowsHeight+"px",this.hasFrozenColumns()&&(this._canvasTopR.style.height=this._frozenRowsHeight+"px"))):this._viewportTopR.style.height=this._viewportTopH+"px",(!this._scrollDims||!this._scrollDims.width)&&(this._scrollDims=W(!0)),this._options.forceFitColumns&&this.autosizeColumns(),this.updateRowCount(),this.handleScroll(),this._scrolLLeftRendered=-1,this.render()}};this.handleHeaderRowScroll=()=>{if(!(this._ignoreScrollUntil>=new Date().getTime())){var e=this.hasFrozenColumns?this._headerRowColsR.parentElement.scrollLeft:this._headerRowColsL.parentElement.scrollLeft;e!=this._scrollContainerX.scrollLeft&&(this._scrollContainerX.scrollLeft=e)}};this.handleFooterRowScroll=()=>{if(!(this._ignoreScrollUntil>=new Date().getTime())){var e=this.hasFrozenColumns?this._footerRowColsR.parentElement.scrollLeft:this._footerRowColsL.parentElement.scrollLeft;e!=this._scrollContainerX.scrollLeft&&(this._scrollContainerX.scrollLeft=e)}};this.handleActiveCellPositionChange=()=>{if(!!this._activeCellNode&&(this.trigger(this.onActiveCellPositionChanged,{}),this._currentEditor)){var e=this.getActiveCellPosition();this._currentEditor.show&&this._currentEditor.hide&&(e.visible?this._currentEditor.show():this._currentEditor.hide()),this._currentEditor.position&&this._currentEditor.position(e)}};if(this._data=t,this._colDefaults=Object.assign({},z),typeof jQuery!="undefined"&&e instanceof jQuery?this._container=e[0]:e instanceof Element?this._container=e:typeof e=="string"&&(this._container=document.querySelector(e)),this._container==null)throw new Error("SleekGrid requires a valid container, "+e+" does not exist in the DOM.");this._container.classList.add("slick-container"),this._rtl=document.body.classList.contains("rtl")||typeof getComputedStyle!="undefined"&&getComputedStyle(this._container).direction=="rtl",this._rtl&&(this._rtlS="right",this._rtlE="left"),s!=null&&s.createPreHeaderPanel&&(s.groupingPanel==null&&(s.groupingPanel=!0),s.groupingPanelHeight==null&&s.preHeaderPanelHeight!=null&&(s.groupingPanelHeight=s.preHeaderPanelHeight),s.showGroupingPanel==null&&s.showPreHeaderPanel!=null&&(s.showGroupingPanel=s.showPreHeaderPanel)),s=Object.assign({},G,s),this._options=s,this.validateAndEnforceOptions(),this._colDefaults.width=s.defaultColumnWidth,D(i,this._options),this.setInitialCols(i),this._editController={commitCurrentEdit:this.commitCurrentEdit.bind(this),cancelCurrentEdit:this.cancelCurrentEdit.bind(this)},typeof $!="undefined"?$(this._container).empty():this._container.innerHTML="",this._container.style.overflow="hidden",this._container.style.outline="0",this._container.classList.add(this._uid),this._options.useLegacyUI&&this._container.classList.add("ui-widget"),/relative|absolute|fixed/.test(getComputedStyle(this._container).position)||(this._container.style.position="relative"),this._container.appendChild(this._focusSink1=p("div",{class:"slick-focus-sink",hideFocus:"",style:"position:fixed;width:0!important;height:0!important;top:0;left:0;outline:0!important;",tabIndex:"0"})),s.groupingPanel&&(this._container.appendChild(this._groupingPanel=p("div",{class:"slick-grouping-panel",style:"overflow:hidden; position:relative;"+(s.showGroupingPanel?"":" display: none")})),s.createPreHeaderPanel&&this._groupingPanel.appendChild(p("div",{class:"slick-preheader-panel"})));let o=this._options.useLegacyUI?" ui-state-default":"";var r=this.getCanvasWidth()+(this._scrollDims=W()).width+"px";this._paneHeaderL=p("div",{class:"slick-pane slick-pane-header slick-pane-left",tabIndex:"0"},p("div",{class:"slick-header slick-header-left"+o,style:!s.showColumnHeader&&"display: none"},this._headerColsL=p("div",{class:"slick-header-columns slick-header-columns-left",style:this._rtlS+":-1000px"}))),this._paneHeaderR=p("div",{class:"slick-pane slick-pane-header slick-pane-right",tabIndex:"0"},p("div",{class:"slick-header slick-header-right"+o,style:!s.showColumnHeader&&"display: none"},this._headerColsR=p("div",{class:"slick-header-columns slick-header-columns-right",style:this._rtlS+":-1000px"})));var l=p("div",{class:"slick-headerrow"+o,style:!s.showHeaderRow&&"display: none"},this._headerRowColsL=p("div",{class:"slick-headerrow-columns slick-headerrow-columns-left"}),this._headerRowSpacerL=p("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:r})),n=p("div",{class:"slick-top-panel-scroller"+o,style:!s.showTopPanel&&"display: none"},this._topPanelL=p("div",{class:"slick-top-panel",style:"width: 10000px"}));this._viewportTopL=p("div",{class:"slick-viewport slick-viewport-top slick-viewport-left",tabIndex:"0",hideFocus:""},this._canvasTopL=p("div",{class:"grid-canvas grid-canvas-top grid-canvas-left",tabIndex:"0",hideFocus:""}));var a=p("div",{class:"slick-footerrow"+o,style:!s.showFooterRow&&"display: none"},this._footerRowColsL=p("div",{class:"slick-footerrow-columns slick-footerrow-columns-left"}),this._footerRowSpacerL=p("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:r}));this._paneTopL=p("div",{class:"slick-pane slick-pane-top slick-pane-left",tabIndex:"0"},l,n,this._viewportTopL,a);var h=p("div",{class:"slick-headerrow"+o,style:!s.showHeaderRow&&"display: none"},this._headerRowColsR=p("div",{class:"slick-headerrow-columns slick-headerrow-columns-right"}),this._headerRowSpacerR=p("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:r})),v=p("div",{class:"slick-top-panel-scroller"+o,style:!s.showTopPanel&&"display: none"},this._topPanelR=p("div",{class:"slick-top-panel",style:"width: 10000px"}));this._viewportTopR=p("div",{class:"slick-viewport slick-viewport-top slick-viewport-right",tabIndex:"0",hideFocus:""},this._canvasTopR=p("div",{class:"grid-canvas grid-canvas-top grid-canvas-right",tabIndex:"0",hideFocus:""}));var c=p("div",{class:"slick-footer-row"+o,style:!s.showFooterRow&&"display: none"},this._footerRowColsR=p("div",{class:"slick-footerrow-columns slick-footerrow-columns-right"}),this._footerRowSpacerR=p("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:r}));this._paneTopR=p("div",{class:"slick-pane slick-pane-top slick-pane-right",tabIndex:"0"},h,v,this._viewportTopR,c),this._paneBottomL=p("div",{class:"slick-pane slick-pane-bottom slick-pane-left",tabIndex:"0"},this._viewportBottomL=p("div",{class:"slick-viewport slick-viewport-bottom slick-viewport-left",tabIndex:"0",hideFocus:""},this._canvasBottomL=p("div",{class:"grid-canvas grid-canvas-bottom grid-canvas-left",tabIndex:"0",hideFocus:""}))),this._paneBottomR=p("div",{class:"slick-pane slick-pane-bottom slick-pane-right",tabIndex:"0"},this._viewportBottomR=p("div",{class:"slick-viewport slick-viewport-bottom slick-viewport-right",tabIndex:"0",hideFocus:""}),this._canvasBottomR=p("div",{class:"grid-canvas grid-canvas-bottom grid-canvas-right",tabIndex:"0",hideFocus:""})),this._container.append(this._paneHeaderL,this._paneHeaderR,this._paneTopL,this._paneTopR,this._paneBottomL,this._paneBottomR,this._focusSink2=this._focusSink1.cloneNode()),s.viewportClass&&this.getViewports().forEach(_=>_.classList.add(s.viewportClass)),s.explicitInitialization||this.init(),this.bindToData()}init(){if(!this._initialized){this._initialized=!0,this.getViewportWidth(),this.getViewportHeight(),this.measureCellPaddingAndBorder(),k(this._headerColsL),k(this._headerColsR);var e=this.getViewports();typeof $!="undefined"&&!this._options.enableTextSelectionOnCells&&$(e).on("selectstart.ui",function(){return $(this).is("input,textarea")}),this.adjustFrozenRowOption(),this.setPaneVisibility(),this.setScroller(),this.setOverflow(),this.updateViewColLeftRight(),this.createColumnHeaders(),this.createColumnFooters(),this.setupColumnSort(),this.createCssRules(),this.resizeCanvas(),this.bindAncestorScrollEvents(),this._container.addEventListener("resize",this.resizeCanvas),e.forEach(i=>i.addEventListener("scroll",this.handleScroll.bind(this))),typeof $!="undefined"&&$.fn.mousewheel&&(this.hasFrozenColumns()||this._hasFrozenRows)&&$(e).on("mousewheel",this.handleMouseWheel.bind(this)),[this._headerColsL.parentElement,this._headerColsR.parentElement].forEach(i=>{i.addEventListener("contextmenu",this.handleHeaderContextMenu.bind(this)),i.addEventListener("click",this.handleHeaderClick.bind(this)),i.addEventListener("mouseenter",s=>s.target.closest(".slick-header-column")&&this.handleHeaderMouseEnter(s)),i.addEventListener("mouseleave",s=>s.target.closest(".slick-header-column")&&this.handleHeaderMouseLeave(s))}),this._headerRowColsL.parentElement.addEventListener("scroll",this.handleHeaderRowScroll),this._headerRowColsR.parentElement.addEventListener("scroll",this.handleHeaderRowScroll),this._footerRowColsL.parentElement.addEventListener("scroll",this.handleFooterRowScroll),this._footerRowColsR.parentElement.addEventListener("scroll",this.handleFooterRowScroll),[this._focusSink1,this._focusSink2].forEach(i=>i.addEventListener("keydown",this.handleKeyDown.bind(this)));var t=Array.from(this.getCanvases());t.forEach(i=>{i.addEventListener("keydown",this.handleKeyDown.bind(this)),i.addEventListener("click",this.handleClick.bind(this)),i.addEventListener("dblclick",this.handleDblClick.bind(this)),i.addEventListener("contextmenu",this.handleContextMenu.bind(this))}),typeof $!="undefined"&&$.fn.drag&&$(t).on("draginit",this.handleDragInit.bind(this)).on("dragstart",{distance:3},this.handleDragStart.bind(this)).on("drag",this.handleDrag.bind(this)).on("dragend",this.handleDragEnd.bind(this)),t.forEach(i=>{i.addEventListener("mouseenter",s=>s.target.closest(".slick-cell")&&this.handleMouseEnter(s)),i.addEventListener("mouseleave",s=>s.target.closest(".slick-cell")&&this.handleMouseLeave(s))}),navigator.userAgent.toLowerCase().match(/webkit/)&&navigator.userAgent.toLowerCase().match(/macintosh/)&&typeof $!="undefined"&&$(t).on("mousewheel",this.handleMouseWheel.bind(this))}}hasFrozenColumns(){return this._frozenCols>0}registerPlugin(e){this._plugins.unshift(e),e.init(this)}unregisterPlugin(e){for(var t=this._plugins.length;t>=0;t--)if(this._plugins[t]===e){this._plugins[t].destroy&&this._plugins[t].destroy(),this._plugins.splice(t,1);break}}getPluginByName(e){for(var t=this._plugins.length-1;t>=0;t--)if(this._plugins[t].pluginName===e)return this._plugins[t]}setSelectionModel(e){this._selectionModel&&(this._selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged),this._selectionModel.destroy&&this._selectionModel.destroy()),this._selectionModel=e,this._selectionModel&&(this._selectionModel.init(this),this._selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged))}getScrollBarDimensions(){return this._scrollDims}getDisplayedScrollbarDimensions(){return{width:this._viewportHasVScroll?this._scrollDims.width:0,height:this._viewportHasHScroll?this._scrollDims.height:0}}getAbsoluteColumnMinWidth(){return this._absoluteColMinWidth}getSelectionModel(){return this._selectionModel}getCanvasNode(){return this._canvasTopL}getCanvases(){var e=[this._canvasTopL,this._canvasTopR,this._canvasBottomL,this._canvasBottomR];return typeof $!="undefined"?$(e):e}getActiveCanvasNode(e){return this.setActiveCanvasNode(e),this._activeCanvasNode}setActiveCanvasNode(e){e&&(this._activeCanvasNode=e.target.closest(".grid-canvas"))}getViewportNode(){return this._viewportTopL}getViewports(){return[this._viewportTopL,this._viewportTopR,this._viewportBottomL,this._viewportBottomR]}getActiveViewportNode(e){return this.setActiveViewportNode(e),this._activeViewportNode}setActiveViewportNode(e){e&&(this._activeViewportNode=e.target.closest(".slick-viewport"))}calcHeaderWidths(){this._headersWidthL=this._headersWidthR=0;for(var e=this._scrollDims.width,t=this._cols,i=this._frozenCols,s=0,o=t.length;s<o;s++){var r=t[s].width;i>0&&s>=i?this._headersWidthR+=r:this._headersWidthL+=r}i>0?(this._headersWidthL=this._headersWidthL+1e3,this._headersWidthR=Math.max(this._headersWidthR,this._viewportW)+this._headersWidthL,this._headersWidthR+=e):(this._headersWidthL+=e,this._headersWidthL=Math.max(this._headersWidthL,this._viewportW)+1e3)}getCanvasWidth(){var e=this._viewportHasVScroll?this._viewportW-this._scrollDims.width:this._viewportW,t=this._cols,i=t.length,s=this._frozenCols;for(this._canvasWidthL=this._canvasWidthR=0;i--;)s>0&&i>=s?this._canvasWidthR+=t[i].width:this._canvasWidthL+=t[i].width;var o=this._canvasWidthL+this._canvasWidthR;return this._options.fullWidthRows?Math.max(o,e):o}updateCanvasWidth(e){var t=this._canvasWidth,i=this._canvasWidthL,s=this._canvasWidthR,o;this._canvasWidth=this.getCanvasWidth();var r=this._scrollDims.width;if(o=this._canvasWidth!==t||this._canvasWidthL!==i||this._canvasWidthR!==s,o||this.hasFrozenColumns()||this._hasFrozenRows){var l=this._canvasWidthL+"px",n=this._canvasWidthR+"px";if(this._canvasTopL.style.width=l,this.calcHeaderWidths(),this._headerColsL.style.width=this._headersWidthL+"px",this._headerColsR.style.width=this._headersWidthR+"px",this._groupingPanel&&(this._groupingPanel.style.width=this._canvasWidth+"px"),this.hasFrozenColumns()){var a=this._viewportW-this._canvasWidthL+"px";this._canvasTopR.style.width=n,this._paneHeaderL.style.width=l,this._paneHeaderR.style[this._rtlS]=l,this._paneHeaderR.style.width=a,this._paneTopL.style.width=l,this._paneTopR.style[this._rtlS]=l,this._paneTopR.style.width=a,this._headerRowColsL.style.width=l,this._headerRowColsL.parentElement.style.width=l,this._headerRowColsR.style.width=n,this._headerRowColsR.parentElement.style.width=a,this._footerRowColsL.style.width=l,this._footerRowColsL.parentElement.style.width=l,this._footerRowColsR.style.width=n,this._footerRowColsR.parentElement.style.width=a,this._viewportTopL.style.width=l,this._viewportTopR.style.width=a,this._hasFrozenRows&&(this._paneBottomL.style.width=l,this._paneBottomR.style[this._rtlS]=l,this._viewportBottomL.style.width=l,this._viewportBottomR.style.width=a,this._canvasBottomL.style.width=l,this._canvasBottomR.style.width=n)}else this._paneHeaderL.style.width="100%",this._paneTopL.style.width="100%",this._headerRowColsL.parentElement.style.width="100%",this._headerRowColsL.style.width=this._canvasWidth+"px",this._footerRowColsL.parentElement.style.width="100%",this._footerRowColsL.style.width=this._canvasWidth+"px",this._viewportTopL.style.width="100%",this._hasFrozenRows&&(this._viewportBottomL.style.width="100%",this._canvasBottomL.style.width=l);this._viewportHasHScroll=this._canvasWidth>this._viewportW-r}var h=this._canvasWidth+(this._viewportHasVScroll?r:0)+"px";this._headerRowSpacerL.style.width=h,this._headerRowSpacerR.style.width=h,this._footerRowSpacerL.style.width=h,this._footerRowSpacerR.style.width=h,(o||e)&&this.applyColumnWidths()}bindAncestorScrollEvents(){for(var e=this._hasFrozenRows&&!this._options.frozenBottom?this._canvasBottomL:this._canvasTopL;(e=e.parentNode)!=document.body&&e!=null;)(e==this._viewportTopL||e.scrollWidth!=e.clientWidth||e.scrollHeight!=e.clientHeight)&&(e.addEventListener("scroll",this.handleActiveCellPositionChange),this._boundAncestorScroll.push(e))}unbindAncestorScrollEvents(){if(this._boundAncestorScroll)for(var e of this._boundAncestorScroll)e.removeEventListener("scroll",this.handleActiveCellPositionChange);this._boundAncestorScroll=[]}updateColumnHeader(e,t,i){if(!!this._initialized){var s=this.getColumnIndex(e);if(s!=null){var o=this._cols[s],r=this._frozenCols>0&&s>=this._frozenCols?this._headerColsR.children.item(s-this._frozenCols):this._headerColsL.children.item(s);if(!!r){t!==void 0&&(o.name=t),i!==void 0&&(o.toolTip=i),this.trigger(this.onBeforeHeaderCellDestroy,{node:r,column:o}),r.title=i||"";var l=r.firstElementChild;l&&(l.innerHTML=t),this.trigger(this.onHeaderCellRendered,{node:r,column:o})}}}}getHeader(){return this._headerColsL}getHeaderColumn(e){var t=typeof e=="number"?e:this.getColumnIndex(e);return t==null?null:this._frozenCols>0&&t>=this._frozenCols?this._headerColsR.children.item(t-this._frozenCols):this._headerColsL.children.item(t)}getGroupingPanel(){return this._groupingPanel}getPreHeaderPanel(){var e;return(e=this._groupingPanel)==null?void 0:e.querySelector(".slick-preheader-panel")}getHeaderRow(){return this._headerRowColsL}getHeaderRowColumn(e){var t=this.getColumnIndex(e);if(t!=null){var i,s=this._frozenCols;return s<=0||t<s?i=this._headerRowColsL:(i=this._headerRowColsR,t-=s),i.childNodes.item(t)}}getFooterRow(){return this._footerRowColsL}getFooterRowColumn(e){var t=this.getColumnIndex(e);if(t==null)return null;var i,s=this._frozenCols;return s<=0||t<s?i=this._footerRowColsL:(i=this._footerRowColsR,t-=s),i.childNodes.item(t)}createColumnFooters(){[this._footerRowColsL,this._footerRowColsR].forEach(l=>l.querySelectorAll(".slick-footerrow-column").forEach(n=>{var a=this.getColumnFromNode(n);a&&this.trigger(this.onBeforeFooterRowCellDestroy,{node:n,column:a})}));let e=typeof $!="undefined";e?($(this._footerRowColsL).empty(),$(this._footerRowColsR).empty()):(this._footerRowColsL.innerHTML="",this._footerRowColsR.innerHTML="");for(var t=this._cols,i=this._frozenCols,s=0;s<t.length;s++){var o=t[s],r=p("div",{class:"slick-footerrow-column l"+s+" r"+s+(this._options.useLegacyUI?" ui-state-default":"")});r.dataset.c=s.toString(),e&&$(r).data("column",o),o.footerCssClass?r.classList.add(o.footerCssClass):o.cssClass&&r.classList.add(o.cssClass),(i>0&&s>=i?this._footerRowColsR:this._footerRowColsL).appendChild(r),this.trigger(this.onFooterRowCellRendered,{node:r,column:o})}}formatGroupTotal(e,t){if(t.formatter!=null){var i=new K;i[t.field]=e;try{return t.formatter(-1,-1,e,t,i)}catch(s){}}return typeof e=="number"&&typeof Q!="undefined"&&Q.formatNumber?t.sourceItem&&t.sourceItem.displayFormat?Q.formatNumber(e,t.sourceItem.displayFormat):Q.formatNumber(e,"#,##0.##"):V(e==null?void 0:e.toString())}groupTotalText(e,t,i){var s=i.substring(0,1).toUpperCase()+i.substring(1),o=typeof Q!="undefined"&&Q.tryGetText&&Q.tryGetText(s)||s,r=e[i][t.field];return r=this.formatGroupTotal(r,t),"<span class='aggregate agg-"+i+"'  title='"+o+"'>"+r+"</span>"}groupTotalsFormatter(e,t){if(!e||!t)return"";var i=null,s=this;return["sum","avg","min","max","cnt"].forEach(function(o){if(i==null&&e[o]&&e[o][t.field]!=null)return i=s.groupTotalText(e,t,o),!1}),i||""}createColumnHeaders(){[this._headerColsL,this._headerColsR].forEach(v=>v.querySelectorAll(".slick-header-column").forEach(c=>{var _=this.getColumnFromNode(c);_&&this.trigger(this.onBeforeHeaderCellDestroy,{node:c,column:_})}));let e=typeof $!="undefined";e?($(this._headerColsL).empty(),$(this._headerColsR).empty()):(this._headerColsL.innerHTML="",this._headerColsR.innerHTML=""),this.calcHeaderWidths(),this._headerColsL.style.width=this._headersWidthL+"px",this._headerColsR.style.width=this._headersWidthR+"px";for(var t=this._cols,i=this._frozenCols,s=0;s<t.length;s++){var o=t[s],r=i>0&&s>=i?this._headerColsR:this._headerColsL,l=document.createElement("span");l.className="slick-column-name",o.nameIsHtml?l.innerHTML=o.name:l.innerText=o.name;var n=p("div",{class:"slick-header-column"+(this._options.useLegacyUI?" ui-state-default ":""),id:""+this._uid+o.id,title:o.toolTip||"",style:"width: "+(o.width-this._headerColumnWidthDiff)+"px"},l);if(n.dataset.c=s.toString(),e&&$(n).data("column",o),o.headerCssClass&&n.classList.add(o.headerCssClass),s<i&&n.classList.add("frozen"),r.appendChild(n),(this._options.enableColumnReorder||o.sortable)&&this._options.useLegacyUI&&(n.addEventListener("mouseenter",ee),n.addEventListener("mouseleave",te)),o.sortable&&(n.classList.add("slick-header-sortable"),n.appendChild(p("span",{class:"slick-sort-indicator"}))),this.trigger(this.onHeaderCellRendered,{node:n,column:o}),this._options.showHeaderRow){var a=i>0&&s>=i?this._headerRowColsR:this._headerRowColsL,h=p("div",{class:"slick-headerrow-column l"+s+" r"+s+(this._options.useLegacyUI?" ui-state-default":"")});h.dataset.c=s.toString(),e&&$(h).data("column",o),a.appendChild(h),this.trigger(this.onHeaderRowCellRendered,{node:h,column:o})}}this.setSortColumns(this._sortColumns),this.setupColumnResize(),this._options.enableColumnReorder&&this.setupColumnReorder()}setupColumnSort(){[this._headerColsL,this._headerColsR].forEach(e=>e.addEventListener("click",t=>{var i=t.target;if(!i.classList.contains("slick-resizable-handle")){var s=i.closest(".slick-header-column");if(!!s){var o=this.getColumnFromNode(s);if(o.sortable){if(!this.getEditorLock().commitCurrentEdit())return;for(var r=null,l=0;l<this._sortColumns.length;l++)if(this._sortColumns[l].columnId==o.id){r=this._sortColumns[l],r.sortAsc=!r.sortAsc;break}if(t.metaKey&&this._options.multiColumnSort?r&&this._sortColumns.splice(l,1):((!t.shiftKey&&!t.metaKey||!this._options.multiColumnSort)&&(this._sortColumns=[]),r?this._sortColumns.length==0&&this._sortColumns.push(r):(r={columnId:o.id,sortAsc:o.defaultSortAsc},this._sortColumns.push(r))),this.setSortColumns(this._sortColumns),!this._options.multiColumnSort)this.trigger(this.onSort,{multiColumnSort:!1,sortCol:o,sortAsc:r.sortAsc},t);else{var n=this._initCols;this.trigger(this.onSort,{multiColumnSort:!0,sortCols:this._sortColumns.map(a=>({sortCol:n[this.getInitialColumnIndex(a.columnId)],sortAsc:a.sortAsc}))},t)}}}}}))}setupColumnReorder(){$([this._headerColsL,this._headerColsR]).filter(":ui-sortable").sortable("destroy");var e=null,t=()=>{this._scrollContainerX.scrollLeft=this._scrollContainerX.scrollLeft+10},i=()=>{this._scrollContainerX.scrollLeft=this._scrollContainerX.scrollLeft-10},s,o=this._options.groupingPanel;$([this._headerColsL,this._headerColsR]).sortable({containment:o?void 0:"parent",distance:3,axis:o?void 0:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder"+(this._options.useLegacyUI?" ui-state-default":"")+" slick-header-column",forcePlaceholderSize:o?!0:void 0,appendTo:o?"body":void 0,start:(r,l)=>{l.placeholder.width(l.helper.outerWidth()-this._headerColumnWidthDiff),s=!this.hasFrozenColumns()||l.placeholder.offset()[this._rtlS]+Math.round(l.placeholder.width())>$(this._scrollContainerX).offset()[this._rtlS],$(l.helper).addClass("slick-header-column-active")},beforeStop:(r,l)=>{if($(l.helper).removeClass("slick-header-column-active"),o){var n=$(this.getGroupingPanel()),a=n.find(".slick-dropped-grouping").length;a>0&&(n.find(".slick-dropped-placeholder").hide(),n.find(".slick-dropped-grouping").show())}},sort:r=>{s&&r.originalEvent.pageX>this._container.clientWidth?e||(e=setInterval(t,100)):s&&r.originalEvent.pageX<$(this._scrollContainerX).offset().left?e||(e=setInterval(i,100)):(clearInterval(e),e=null)},stop:r=>{var l=!1;if(clearInterval(e),e=null,l||!this.getEditorLock().commitCurrentEdit()){$(r.target).sortable("cancel");return}var n=O(this._initCols,this._headerColsL.sortable("toArray").map(a=>a.substring(this._uid.length)));n=O(n,this._headerColsR.sortable("toArray").map(a=>a.substring(this._uid.length))),this.setColumns(n),this.trigger(this.onColumnsReordered,{}),r.stopPropagation(),this.setupColumnResize()}})}setupColumnResize(){var r,o,l,n=this._cols;let e=Array.from(this._headerColsL.children).concat(Array.from(this._headerColsR.children));var t,i,s,o,r,l,a,h,n=this._cols,a,h;if(e.forEach((c,_)=>{var C;(C=c.querySelector("slick-resizable-handle"))==null||C.remove(),n[_].resizable&&(a===void 0&&(a=_),h=_)}),a===void 0)return;let v=typeof $=="undefined"||!$.fn||!$.fn.drag;e.forEach((c,_)=>{if(_<a||this._options.forceFitColumns&&_>=h)return;let C=c.appendChild(document.createElement("div"));C.classList.add("slick-resizable-handle"),C.draggable=!0;var b=null;let R=y=>{var T;if(!this.getEditorLock().commitCurrentEdit()){!v&&y.preventDefault();return}v&&(b=d=>d.preventDefault(),document.addEventListener("dragover",b)),o=y.pageX,(T=y.target.parentElement)==null||T.classList.add("slick-header-column-active");var L=null,E=null;if(e.forEach((d,S)=>{n[S].previousWidth=d.offsetWidth}),this._options.forceFitColumns)for(L=0,E=0,t=_+1;t<e.length;t++)s=n[t],s.resizable&&(E!=null&&(s.maxWidth?E+=s.maxWidth-s.previousWidth:E=null),L+=s.previousWidth-Math.max(s.minWidth||0,this._absoluteColMinWidth));var g=0,m=0;for(t=0;t<=_;t++)s=n[t],s.resizable&&(m!=null&&(s.maxWidth?m+=s.maxWidth-s.previousWidth:m=null),g+=s.previousWidth-Math.max(s.minWidth||0,this._absoluteColMinWidth));L===null&&(L=1e5),g===null&&(g=1e5),E===null&&(E=1e5),m===null&&(m=1e5),l=o+Math.min(L,m),r=o-Math.min(g,E),v&&(y.dataTransfer.effectAllowed="move")},H=y=>{if(!(!y.pageX&&!y.clientX&&!y.pageY&&!y.clientY)){v&&(y.dataTransfer.effectAllowed="none",y.preventDefault());var L,E=Math.min(l,Math.max(r,y.pageX))-o,g,m,T,d;if(E<0){g=E;var S=0,F=0;for(m=_;m>=0;m--)d=n[m],d.resizable&&(L=Math.max(d.minWidth||0,this._absoluteColMinWidth),g&&d.previousWidth+g<L?(g+=d.previousWidth-L,d.width=L):(d.width=d.previousWidth+g,g=0));var M=this._frozenCols;for(T=0;T<=_;T++)d=n[T],M>0&&T>=M?F+=d.width:S+=d.width;if(this._options.forceFitColumns)for(g=-E,m=_+1;m<e.length;m++)d=n[m],d.resizable&&(g&&d.maxWidth&&d.maxWidth-d.previousWidth<g?(g-=d.maxWidth-d.previousWidth,d.width=d.maxWidth):(d.width=d.previousWidth+g,g=0),M>0&&m>=M?F+=d.width:S+=d.width);else for(m=_+1;m<e.length;m++)d=n[m],M>=0&&m>=M?F+=d.width:S+=d.width}else{g=E;var S=0,F=0;for(m=_;m>=0;m--)d=n[m],d.resizable&&(g&&d.maxWidth&&d.maxWidth-d.previousWidth<g?(g-=d.maxWidth-d.previousWidth,d.width=d.maxWidth):(d.width=d.previousWidth+g,g=0));for(T=0;T<=_;T++)d=n[T],M>0&&T>=M?F+=d.width:S+=d.width;if(this._options.forceFitColumns)for(g=-E,m=_+1;m<e.length;m++)d=n[m],d.resizable&&(L=Math.max(d.minWidth||0,this._absoluteColMinWidth),g&&d.previousWidth+g<L?(g+=d.previousWidth-L,d.width=L):(d.width=d.previousWidth+g,g=0),M&&m>=M?F+=d.width:S+=d.width);else for(m=_+1;m<e.length;m++)d=n[m],M>0&&m>=M?F+=d.width:S+=d.width}this.hasFrozenColumns()&&S!=this._canvasWidthL&&(this._headerColsL.style.width=S+1e3+"px",this._paneHeaderR.style[this._rtlS]=S+"px"),this.applyColumnHeaderWidths(),this._options.syncColumnCellResize&&this.applyColumnWidths()}},w=y=>{var E;for(b&&(document.removeEventListener("dragover",b),b=null),(E=y.target.parentElement)==null||E.classList.remove("slick-header-column-active"),t=0;t<e.length;t++){s=n[t];var L=e[t].offsetWidth;s.previousWidth!==L&&s.rerenderOnResize&&this.invalidateAllRows()}this.updateCanvasWidth(!0),this.render(),this.trigger(this.onColumnsResized)};v?(C.addEventListener("dragstart",R),C.addEventListener("drag",H),C.addEventListener("dragend",w),C.addEventListener("dragover",y=>{y.preventDefault(),y.dataTransfer.effectAllowed="move"})):$(C).on("dragstart",R).on("drag",H).on("dragend",w)})}getVBoxDelta(e){var t=getComputedStyle(e);if(t.boxSizing=="border-box")return 0;var i=["border-top-width","border-bottom-width","padding-top","padding-bottom"],s=0;return i.forEach(o=>s+=parseFloat(t.getPropertyValue(o))||0),s}adjustFrozenRowOption(){if(this._options.frozenRow=this._options.frozenRow>=0&&this._options.frozenRow<this._numVisibleRows?this._options.frozenRow:-1,this._options.frozenRow>-1){this._hasFrozenRows=!0,this._frozenRowsHeight=this._options.frozenRow*this._options.rowHeight;var e=this.getDataLength()||this._data.length;this._actualFrozenRow=this._options.frozenBottom?e-this._options.frozenRow:this._options.frozenRow}else this._hasFrozenRows=!1}setPaneVisibility(){this._paneHeaderR.style.display=this._paneTopR.style.display=this.hasFrozenColumns()?"":"none",this._paneBottomL.style.display=this._hasFrozenRows?"":"none",this._paneBottomR.style.display=this._hasFrozenRows&&this.hasFrozenColumns()?"":"none"}setOverflow(){var e=this._hasFrozenRows,t=this.hasFrozenColumns(),i=this._options.alwaysAllowHorizontalScroll,s=this._options.alwaysShowVerticalScroll;this._viewportTopL.style.overflowX=this._viewportTopR.style.overflowX=e&&!i?"hidden":t?"scroll":"auto",this._viewportTopL.style.overflowY=this._viewportBottomL.style.overflowY=!t&&s?"scroll":t?"hidden":e?"scroll":"auto",this._viewportTopR.style.overflowY=s||e?"scroll":"auto",this._viewportBottomL.style.overflowX=this._viewportBottomR.style.overflowX=t&&!i?"scroll":"auto",this._viewportBottomR.style.overflowY=s?"scroll":"auto",this._options.viewportClass&&this.getViewports().forEach(o=>o.classList.add(this._options.viewportClass))}setScroller(){this.hasFrozenColumns()?this._hasFrozenRows?this._options.frozenBottom?(this._scrollContainerX=this._viewportBottomR,this._scrollContainerY=this._viewportTopR):this._scrollContainerX=this._scrollContainerY=this._viewportBottomR:this._scrollContainerX=this._scrollContainerY=this._viewportTopR:this._hasFrozenRows?this._options.frozenBottom?(this._scrollContainerX=this._viewportBottomL,this._scrollContainerY=this._viewportTopL):this._scrollContainerX=this._scrollContainerY=this._viewportBottomL:this._scrollContainerX=this._scrollContainerY=this._viewportTopL}measureCellPaddingAndBorder(){let e=["border-left-width","border-right-width","padding-left","padding-right"],t=["border-top-width","border-bottom-width","padding-top","padding-bottom"];var i=this._headerColsL.appendChild(p("div",{class:"slick-header-column"+(this._options.useLegacyUI?" ui-state-default":""),style:"visibility:hidden"}));this._headerColumnWidthDiff=0;var s=getComputedStyle(i);s.boxSizing!="border-box"&&e.forEach(r=>this._headerColumnWidthDiff+=parseFloat(s.getPropertyValue(r))||0),i.remove();var o=this._canvasTopL.appendChild(p("div",{class:"slick-row"},i=p("div",{class:"slick-cell",id:"",style:"visibility: hidden"})));i.innerHTML="-",this._cellWidthDiff=this._cellHeightDiff=0,s=getComputedStyle(i),s.boxSizing!="border-box"&&(e.forEach(r=>this._cellWidthDiff+=parseFloat(s.getPropertyValue(r))||0),t.forEach(r=>this._cellHeightDiff+=parseFloat(s.getPropertyValue(r))||0)),o.remove(),this._absoluteColMinWidth=Math.max(this._headerColumnWidthDiff,this._cellWidthDiff)}createCssRules(){var e=this._styleNode=document.createElement("style");e.dataset.uid=this._uid;for(var t=this._options.rowHeight-this._cellHeightDiff,i=["."+this._uid+" .slick-group-header-column { "+this._rtlS+": 1000px; }","."+this._uid+" .slick-header-column { "+this._rtlS+": 1000px; }","."+this._uid+" .slick-top-panel { height:"+this._options.topPanelHeight+"px; }","."+this._uid+" .slick-grouping-panel { height:"+this._options.groupingPanelHeight+"px; }","."+this._uid+" .slick-headerrow-columns { height:"+this._options.headerRowHeight+"px; }","."+this._uid+" .slick-cell { height:"+t+"px; }","."+this._uid+" .slick-row { height:"+this._options.rowHeight+"px; }","."+this._uid+" .slick-footerrow-columns { height:"+this._options.footerRowHeight+"px; }"],s=this._cols,o=0;o<s.length;o++)i.push("."+this._uid+" .l"+o+" { }"),i.push("."+this._uid+" .r"+o+" { }");e.appendChild(document.createTextNode(i.join(" "))),document.head.appendChild(e)}getColumnCssRules(e){if(!this._stylesheet){var t=document.querySelector("style[data-uid='"+this._uid+"']");if(t&&t.sheet)this._stylesheet=t.sheet;else for(var i=document.styleSheets,s=0;s<i.length;s++)if((i[s].ownerNode||i[s].owningElement)==this._styleNode){this._stylesheet=i[s];break}if(!this._stylesheet)throw new Error("Cannot find stylesheet.");this._columnCssRulesL=[],this._columnCssRulesR=[];for(var o=this._stylesheet.cssRules||this._stylesheet.rules,r,l,s=0;s<o.length;s++){var n=o[s].selectorText;(r=/\.l\d+/.exec(n))?(l=parseInt(r[0].substring(2,r[0].length),10),this._columnCssRulesL[l]=o[s]):(r=/\.r\d+/.exec(n))&&(l=parseInt(r[0].substring(2,r[0].length),10),this._columnCssRulesR[l]=o[s])}}return this._rtl?{right:this._columnCssRulesL[e],left:this._columnCssRulesR[e]}:{left:this._columnCssRulesL[e],right:this._columnCssRulesR[e]}}removeCssRules(){this._styleNode.remove(),this._stylesheet=null}destroy(){this.getEditorLock().cancelCurrentEdit(),this.trigger(this.onBeforeDestroy);for(var e=this._plugins.length;e--;)this.unregisterPlugin(this._plugins[e]);this._options.enableColumnReorder&&$([this._headerColsL,this._headerColsR]).filter(":ui-sortable").sortable("destroy"),this.unbindAncestorScrollEvents(),$(this._container).off(".slickgrid"),this.removeCssRules(),this.getCanvases().off("draginit dragstart dragend drag"),$(this._container).empty().removeClass(this._uid);for(var t in this)if(!!Object.prototype.hasOwnProperty.call(this,t)){if(t.startsWith("on")){var i=this[t];(i==null?void 0:i.clear)&&(i==null?void 0:i.subscribe)&&(i==null||i.clear())}delete this[t]}}trigger(e,t,i){return i=i||new j,t=t||{},t.grid=this,e.notify(t,i,this)}getEditorLock(){return this._options.editorLock}getEditController(){return this._editController}getColumnIndex(e){return this._colById[e]}getInitialColumnIndex(e){return this._initColById[e]}autosizeColumns(){var e,t,i=[],s=0,o=0,r,l=this._viewportHasVScroll?this._viewportW-this._scrollDims.width:this._viewportW,n=this._cols;for(e=0;e<n.length;e++)t=n[e],i.push(t.width),o+=t.width,t.resizable&&(s+=t.width-Math.max(t.minWidth,this._absoluteColMinWidth));for(r=o;o>l&&s;){var a=(o-l)/s;for(e=0;e<n.length&&o>l;e++){t=n[e];var h=i[e];if(!(!t.resizable||h<=t.minWidth||h<=this._absoluteColMinWidth)){var v=Math.max(t.minWidth,this._absoluteColMinWidth),c=Math.floor(a*(h-v))||1;c=Math.min(c,h-v),o-=c,s-=c,i[e]-=c}}if(r<=o)break;r=o}for(r=o;o<l;){var _=l/o;for(e=0;e<n.length&&o<l;e++){t=n[e];var C=i[e],b;!t.resizable||t.maxWidth<=C?b=0:b=Math.min(Math.floor(_*C)-C,t.maxWidth-C||1e6)||1,o+=b,i[e]+=o<=l?b:0}if(r>=o)break;r=o}var R=!1;for(e=0;e<n.length;e++)n[e].rerenderOnResize&&n[e].width!=i[e]&&(R=!0),n[e].width=i[e];this.applyColumnHeaderWidths(),this.updateCanvasWidth(!0),R&&(this.invalidateAllRows(),this.render())}applyColumnHeaderWidths(){if(!!this._initialized){for(var e,t=this._cols,i=t.length,s=this._frozenCols,o=this._headerColsL.children,r=this._headerColsR.children,l=0,n=o.length+r.length;l<n&&l<i;l++){e=(s&&l>=s?r:o).item(s>0&&l>=s?l-s:l);var a=t[l].width-this._headerColumnWidthDiff;e.offsetWidth!==a&&(e.style.width=a+"px")}this.updateViewColLeftRight()}}applyColumnWidths(){for(var e=0,t,i,s=this._cols,o=this._frozenCols,r=0;r<s.length;r++)o==r&&(e=0),t=s[r].width,i=this.getColumnCssRules(r),i[this._rtlS].style[this._rtlS]=e+"px",i[this._rtlE].style[this._rtlE]=(o>0&&r>=o?this._canvasWidthR:this._canvasWidthL)-e-t+"px",e+=t}setSortColumn(e,t){this.setSortColumns([{columnId:e,sortAsc:t}])}setSortColumns(e){this._sortColumns=e||[];var t=Array.from(this._headerColsL.children).concat(Array.from(this._headerColsR.children));t.forEach(i=>{i.classList.remove("slick-header-column-sorted");var s=i.querySelector(".slick-sort-indicator");s&&s.classList.remove("slick-sort-indicator-asc","slick-sort-indicator-desc")}),this._sortColumns.forEach(i=>{i.sortAsc==null&&(i.sortAsc=!0);var s=this.getColumnIndex(i.columnId);if(s!=null){var o=t[s];if(o){o.classList.add("slick-header-column-sorted");var r=o.querySelector(".slick-sort-indicator");r&&r.classList.add(i.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}}})}getSortColumns(){return this._sortColumns}getColumns(){return this._cols}getInitialColumns(){return this._initCols}updateViewColLeftRight(){this._colLeft=[],this._colRight=[];for(var e=0,t,i=this._cols,s,o=i.length,r=this._frozenCols,s=0;s<o;s++)r===s&&(e=0),t=e+i[s].width,this._colLeft[s]=e,this._colRight[s]=t,e=t}setInitialCols(e){var t=this._colDefaults,i={},s=[],o=[],r={},l,n,a;for(l=0;l<e.length;l++){n=e[l];for(a in t)n[a]===void 0&&(n[a]=this._colDefaults[a]);n.minWidth&&n.width<n.minWidth&&(n.width=n.minWidth),n.maxWidth&&n.width>n.maxWidth&&(n.width=n.maxWidth),i[n.id]=l,n.visible!==!1&&(n.frozen?s:o).push(n)}for(this._frozenCols=s.length,s.length>0&&(o=s.concat(o)),l=0;l<o.length;l++)n=o[l],r[n.id]=l;this._initCols=e,this._initColById=i,this._cols=o,this._colById=r}setColumns(e){var t;this.setInitialCols(e),this.updateViewColLeftRight(),this._initialized&&(this.setPaneVisibility(),this.setOverflow(),this.invalidateAllRows(),this.createColumnHeaders(),this.createColumnFooters(),this.updateFooterTotals(),this.removeCssRules(),this.createCssRules(),this.resizeCanvas(),this.updateCanvasWidth(),this.applyColumnWidths(),this.handleScroll(),(t=this.getSelectionModel())==null||t.refreshSelections())}getOptions(){return this._options}setOptions(e,t,i,s){var o;!this.getEditorLock().commitCurrentEdit()||(this.makeActiveCellNormal(),e.showColumnHeader!==void 0&&this.setColumnHeaderVisibility(e.showColumnHeader),this._options.enableAddRow!==e.enableAddRow&&this.invalidateRow(this.getDataLength()),this._options=$.extend(this._options,e),this.validateAndEnforceOptions(),this.adjustFrozenRowOption(),this.getViewports().forEach(r=>r.style.overflowY=this._options.autoHeight?"hidden":"auto"),s||this.setOverflow(),e.columns&&!i?(D(e.columns,this._options),this.setColumns((o=e.columns)!=null?o:this._initCols)):e.frozenColumn!=null&&(D(this._initCols,this._options),this.setColumns(this._initCols)),this.setScroller(),t||this.render())}validateAndEnforceOptions(){this._options.autoHeight&&(this._options.leaveSpaceForNewRows=!1)}bindToData(){this._data&&(this._data.onRowCountChanged&&this._data.onRowCountChanged.subscribe(this.viewOnRowCountChanged),this._data.onRowsChanged&&this._data.onRowsChanged.subscribe(this.viewOnRowsChanged),this._data.onDataChanged&&this._data.onDataChanged.subscribe(this.viewOnDataChanged))}unbindFromData(){this._data&&(this._data.onRowCountChanged&&this._data.onRowCountChanged.unsubscribe(this.viewOnRowCountChanged),this._data.onRowsChanged&&this._data.onRowsChanged.unsubscribe(this.viewOnRowsChanged),this._data.onDataChanged&&this._data.onDataChanged.unsubscribe(this.viewOnDataChanged))}setData(e,t){this.unbindFromData(),this._data=e,this.bindToData(),this.invalidateAllRows(),this.updateRowCount(),t&&this.scrollTo(0)}getData(){return this._data}getDataLength(){return this._data.getLength?this._data.getLength():this._data.length}getDataLengthIncludingAddNew(){return this.getDataLength()+(this._options.enableAddRow&&(!this._pagingActive||this._pagingIsLastPage)?1:0)}getDataItem(e){return this._data.getItem?this._data.getItem(e):this._data[e]}getTopPanel(){return this._topPanelL}setTopPanelVisibility(e){this._options.showTopPanel!=e&&(this._options.showTopPanel=!!e,$([this._topPanelL.parentElement,this._topPanelR.parentElement])[e?"slideDown":"slideUp"]("fast",this.resizeCanvas))}setColumnHeaderVisibility(e,t){if(this._options.showColumnHeader!=e){this._options.showColumnHeader=e;var i=$([this._headerColsL.parentElement,this._headerColsR.parentElement]);e?t?i.slideDown("fast",this.resizeCanvas):(i.show(),this.resizeCanvas()):t?i.slideUp("fast",this.resizeCanvas):(i.hide(),this.resizeCanvas())}}setFooterRowVisibility(e){this._options.showFooterRow!=e&&(this._options.showFooterRow=!!e,$([this._footerRowColsL.parentElement,this._footerRowColsR.parentElement])[e?"slideDown":"slideUp"]("fast",this.resizeCanvas))}setGroupingPanelVisibility(e){if(this._options.showGroupingPanel!=e){if(this._options.showGroupingPanel=e,!this._options.groupingPanel)return;e?$(this._groupingPanel).slideDown("fast",this.resizeCanvas):$(this._groupingPanel).slideUp("fast",this.resizeCanvas)}}setPreHeaderPanelVisibility(e){this.setGroupingPanelVisibility(e)}setHeaderRowVisibility(e){this._options.showHeaderRow!=e&&(this._options.showHeaderRow=e,$([this._headerRowColsL.parentElement,this._headerRowColsR.parentElement])[e?"slideDown":"slideUp"]("fast",this.resizeCanvas))}getContainerNode(){return this._container}getUID(){return this._uid}getRowTop(e){return this._options.rowHeight*e-this._pageOffset}getRowFromPosition(e){return Math.floor((e+this._pageOffset)/this._options.rowHeight)}scrollTo(e){e=Math.max(e,0),e=Math.min(e,this._virtualHeight-Math.round($(this._scrollContainerY).height())+(this._viewportHasHScroll||this.hasFrozenColumns()?this._scrollDims.height:0));var t=this._pageOffset;this._page=Math.min(this._numberOfPages-1,Math.floor(e/this._pageHeight)),this._pageOffset=Math.round(this._page*this._jumpinessCoefficient);var i=e-this._pageOffset;if(this._pageOffset!=t){var s=this.getVisibleRange(i);this.cleanupRows(s),this.updateRowPositions()}this._scrollTopPrev!=i&&(this._vScrollDir=this._scrollTopPrev+t<i+this._pageOffset?1:-1,this._scrollTopRendered=this._scrollTop=this._scrollTopPrev=i,this.hasFrozenColumns()&&(this._viewportTopL.scrollTop=i),this._hasFrozenRows&&(this._viewportBottomL.scrollTop=this._viewportBottomR.scrollTop=i),this._scrollContainerY.scrollTop=i,this.trigger(this.onViewportChanged))}getFormatter(e,t){var i=this._data,s=i.getItemMetadata&&i.getItemMetadata(e),o=s&&s.columns,r=o&&(o[t.id]||o[this.getInitialColumnIndex(t.id)]);return r&&r.formatter||s&&s.formatter||t.formatter||this._options.formatterFactory&&this._options.formatterFactory.getFormatter(t)||this._options.defaultFormatter}getEditor(e,t){var i=this._cols[t],s=this._data.getItemMetadata&&this._data.getItemMetadata(e),o=s&&s.columns;return o&&o[i.id]&&o[i.id].editor!==void 0?o[i.id].editor:o&&o[t]&&o[t].editor!==void 0?o[t].editor:i.editor||this._options.editorFactory&&this._options.editorFactory.getEditor(i)}getDataItemValueForColumn(e,t){return this._options.dataItemColumnValueExtractor?this._options.dataItemColumnValueExtractor(e,t):e[t.field]}appendRowHtml(e,t,i,s,o){var r=this.getDataItem(i),l=i<o&&!r,n="slick-row"+(this._hasFrozenRows&&i<=this._options.frozenRow?" frozen":"")+(l?" loading":"")+(i===this._activeRow?" active":"")+(i%2==1?" odd":" even");r||(n+=" "+this._options.addNewRowCssClass);var a=this._data.getItemMetadata&&this._data.getItemMetadata(i);a&&a.cssClasses&&(n+=" "+a.cssClasses);var h=this.getFrozenRowOffset(i),v="<div class='"+(this._options.useLegacyUI?"ui-widget-content ":"")+n+"' style='top:"+(this.getRowTop(i)-h)+"px'>";e.push(v),this.hasFrozenColumns()&&t.push(v);for(var c,_,C=this._cols,b=this._frozenCols,R=0,H=C.length;R<H;R++){var w=null;if(_=C[R],c=1,a&&a.columns&&(w=a.columns[_.id]||a.columns[R],c=w&&w.colspan||1,c==="*"&&(c=H-R)),this._colRight[Math.min(H-1,R+c-1)]>s.leftPx){if(this._colLeft[R]>s.rightPx)break;this.appendCellHtml(b>0&&R>=b?t:e,i,R,c,r,w)}c>1&&(R+=c-1)}e.push("</div>"),this.hasFrozenColumns()&&t.push("</div>")}appendCellHtml(e,t,i,s,o,r){var w,y,L;var l=this._cols,n=this._frozenCols,a=l[i],h="slick-cell l"+i+" r"+Math.min(l.length-1,i+s-1)+(a.cssClass?" "+a.cssClass:"");i<n&&(h+=" frozen"),t===this._activeRow&&i===this._activeCell&&(h+=" active"),r&&r.cssClasses&&(h+=" "+r.cssClasses);for(var v in this._cellCssClasses)this._cellCssClasses[v][t]&&this._cellCssClasses[v][t][a.id]&&(h+=" "+this._cellCssClasses[v][t][a.id]);var c;if(o){var _=this.getDataItemValueForColumn(o,a);c=this.getFormatter(t,a)(t,i,_,a,o,this)}if(c==null)e.push('<div class="'+x(h)+'"></div>');else if(typeof c=="string")e.push('<div class="'+x(h)+'">'+c+"</div>");else{(w=c.addClass)!=null&&w.length&&(h+=" "+c.addClass),e.push('<div class="'+x(h)+'"'),(y=c.addClass)!=null&&y.length&&e.push(' data-fmtcls="'+x(c.addClass)+'"');var C=c.addAttrs;if(C!=null){var b=[];for(var R in C)e.push(R+'="'+x(C[R])+'"'),b.push(R);e.push(' data-fmtatt="'+x(b.join(","))+'"')}var H=c.toolTip;H!=null&&H.length&&e.push('tooltip="'+x(H)+'"'),(L=c.text)!=null&&L.length?e.push(">"+c.text+"</div>"):e.push("></div>")}this._rowsCache[t].cellRenderQueue.push(i),this._rowsCache[t].cellColSpans[i]=s}cleanupRows(e){var t;for(var i in this._rowsCache){var s=!0;t=parseInt(i,10),this._hasFrozenRows&&(this._options.frozenBottom&&t>=this._actualFrozenRow||!this._options.frozenBottom&&t<=this._actualFrozenRow)&&(s=!1),t!==this._activeRow&&(t<e.top||t>e.bottom)&&s&&this.removeRowFromCache(t)}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidate(){this.updateRowCount(),this.invalidateAllRows(),this.render(),this.updateFooterTotals()}invalidateAllRows(){this._currentEditor&&this.makeActiveCellNormal();for(var e in this._rowsCache)this.removeRowFromCache(parseInt(e,10));this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}queuePostProcessedRowForCleanup(e,t,i){var r,l;this._postProcessGroupId++;for(var s in t)if(t.hasOwnProperty(s)){var o=parseInt(s,10);this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,cellNode:e.cellNodesByColumnIdx[o|0],columnIdx:o|0,rowIdx:i})}this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,rowNodeL:e.rowNodeL,rowNodeR:e.rowNodeR}),(r=e.rowNodeL)==null||r.remove(),(l=e.rowNodeR)==null||l.remove()}queuePostProcessedCellForCleanup(e,t,i){this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,cellNode:e,columnIdx:t,rowIdx:i}),$(e).detach()}removeRowFromCache(e){var i,s,o,r;var t=this._rowsCache[e];!t||(this._options.enableAsyncPostRenderCleanup&&this._postProcessedRows[e]?this.queuePostProcessedRowForCleanup(t,this._postProcessedRows[e],e):((s=(i=t.rowNodeL)==null?void 0:i.parentElement)==null||s.removeChild(t.rowNodeL),(r=(o=t.rowNodeR)==null?void 0:o.parentElement)==null||r.removeChild(t.rowNodeR)),delete this._rowsCache[e],delete this._postProcessedRows[e])}invalidateRows(e){var t,i;if(!(!e||!e.length)){for(this._vScrollDir=0,t=0,i=e.length;t<i;t++)this._currentEditor&&this._activeRow===e[t]&&this.makeActiveCellNormal(),this._rowsCache[e[t]]&&this.removeRowFromCache(e[t]);this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}}invalidateRow(e){this.invalidateRows([e])}applyFormatResultToCellNode(e,t){var l,n,a,h;var i=(l=t.dataset)==null?void 0:l.fmtcls;i!=null&&i.length>0&&(t.classList.remove(...i.split(" ")),delete t.dataset.fmtcls);var s=(n=t.dataset)==null?void 0:n.fmtatt;if(s!=null&&s.length>0){for(var o of s.split(","))t.removeAttribute(o);delete t.dataset.fmtatt}if(t.removeAttribute("tooltip"),e==null){t.innerHTML="";return}if(typeof e=="string"){t.innerHTML=e;return}if(t.innerHTML=e.text,(a=e.addClass)!=null&&a.length&&(t.classList.add(...e.addClass.split(" ")),t.dataset.fmtcls=e.addClass),e.addAttrs!=null){var r=Object.keys(e.addAttrs);if(r.length){for(var o of r)t.setAttribute(o,e.addAttrs[o]);t.dataset.fmtatt=r.join(",")}}(h=e.toolTip)!=null&&h.length&&t.setAttribute("tooltip",e.toolTip)}updateCell(e,t){var i=this.getCellNode(e,t);if(!!i){var s=this._cols[t],o=this.getDataItem(e);if(this._currentEditor&&this._activeRow===e&&this._activeCell===t)this._currentEditor.loadValue(o);else{var r=o?this.getFormatter(e,s)(e,t,this.getDataItemValueForColumn(o,s),s,o):"";this.applyFormatResultToCellNode(r,i),this.invalidatePostProcessingResults(e)}}}updateRow(e){var t=this._rowsCache[e];if(!!t){this.ensureCellNodesInRowsCache(e);var i=this.getDataItem(e),s;for(var o in t.cellNodesByColumnIdx)if(!!t.cellNodesByColumnIdx.hasOwnProperty(o)){var r=parseInt(o,10),l=this._cols[r],n=t.cellNodesByColumnIdx[r];e===this._activeRow&&r===this._activeCell&&this._currentEditor?this._currentEditor.loadValue(i):(s=i?this.getFormatter(e,l)(e,r,this.getDataItemValueForColumn(i,l),l,i):"",this.applyFormatResultToCellNode(s,n))}this.invalidatePostProcessingResults(e)}}getViewportHeight(){this._groupingPanelH=this._options.groupingPanel&&this._options.showGroupingPanel?this._options.groupingPanelHeight+this.getVBoxDelta(this._groupingPanel):0,this._topPanelH=this._options.showTopPanel?this._options.topPanelHeight+this.getVBoxDelta(this._topPanelL.parentElement):0,this._headerRowH=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowColsL.parentElement):0,this._footerRowH=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowColsL.parentElement):0;var e=this._options.showColumnHeader?parseFloat(getComputedStyle(this._headerColsL.parentElement).height)+this.getVBoxDelta(this._headerColsL.parentElement):0;if(this._options.autoHeight)this._viewportH=this._options.rowHeight*this.getDataLengthIncludingAddNew(),this.hasFrozenColumns()||(this._viewportH+=this._groupingPanelH,this._viewportH+=e,this._viewportH+=this._headerRowH,this._viewportH+=this._footerRowH,this._viewportH+=this.getCanvasWidth()>this._viewportW?this._scrollDims.height:0);else{var t=getComputedStyle(this._container);this._viewportH=parseFloat(t.height)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-e-this._topPanelH-this._headerRowH-this._footerRowH-this._groupingPanelH}return this._numVisibleRows=Math.ceil(this._viewportH/this._options.rowHeight),this._viewportH}getViewportWidth(){this._viewportW=parseFloat(getComputedStyle(this._container).width)}updatePagingStatusFromView(e){this._pagingActive=e.pageSize!==0,this._pagingIsLastPage=e.pageNum==e.totalPages-1}updateRowCount(){if(!!this._initialized){var e=this.getDataLengthIncludingAddNew(),t=0,i=this._hasFrozenRows&&!this._options.frozenBottom?Math.round(parseFloat(getComputedStyle(this._canvasBottomL).height)):Math.round(parseFloat(getComputedStyle(this._canvasTopL).height));if(this._hasFrozenRows)var t=this.getDataLength()-this._options.frozenRow;else var t=e+(this._options.leaveSpaceForNewRows?this._numVisibleRows-1:0);var s=Math.round(parseFloat(getComputedStyle(this._scrollContainerY).height)),o=this._viewportHasVScroll;this._viewportHasVScroll=!this._options.autoHeight&&t*this._options.rowHeight>s,this.makeActiveCellNormal();var r=e-1;for(var l in this._rowsCache){var n=parseInt(l,10);n>=r&&this.removeRowFromCache(n)}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup(),this._virtualHeight=Math.max(this._options.rowHeight*t,s-this._scrollDims.height),this._activeCellNode&&this._activeRow>r&&this.resetActiveCell(),this._virtualHeight<B()?(this._realScrollHeight=this._pageHeight=this._virtualHeight,this._numberOfPages=1,this._jumpinessCoefficient=0):(this._realScrollHeight=B(),this._pageHeight=this._realScrollHeight/100,this._numberOfPages=Math.floor(this._virtualHeight/this._pageHeight),this._jumpinessCoefficient=(this._virtualHeight-this._realScrollHeight)/(this._numberOfPages-1)),this._realScrollHeight!==i&&(this._hasFrozenRows&&!this._options.frozenBottom?(this._canvasBottomL.style.height=this._realScrollHeight+"px",this.hasFrozenColumns()&&(this._canvasBottomR.style.height=this._realScrollHeight+"px")):(this._canvasTopL.style.height=this._realScrollHeight+"px",this._canvasTopR.style.height=this._realScrollHeight+"px"),this._scrollTop=this._scrollContainerY.scrollTop);var a=this._scrollTop+this._pageOffset<=this._virtualHeight-s;this._virtualHeight==0||this._scrollTop==0?this._page=this._pageOffset=0:a?this.scrollTo(this._scrollTop+this._pageOffset):this.scrollTo(this._virtualHeight-s),this._realScrollHeight!=i&&this._options.autoHeight&&this.resizeCanvas(),this._options.forceFitColumns&&o!=this._viewportHasVScroll&&this.autosizeColumns(),this.updateCanvasWidth(!1)}}getViewport(e,t){return this.getVisibleRange(e,t)}getVisibleRange(e,t){return e==null&&(e=this._scrollTop),t==null&&(t=this._scrollLeft),{top:this.getRowFromPosition(e),bottom:this.getRowFromPosition(e+this._viewportH)+1,leftPx:t,rightPx:t+this._viewportW}}getRenderedRange(e,t){var i=this.getVisibleRange(e,t),s=Math.round(this._viewportH/this._options.rowHeight),o=this._options.minBuffer||3;return this._vScrollDir==-1?(i.top-=s,i.bottom+=o):this._vScrollDir==1?(i.top-=o,i.bottom+=s):(i.top-=o,i.bottom+=o),i.top=Math.max(0,i.top),i.bottom=Math.min(this.getDataLengthIncludingAddNew()-1,i.bottom),this._options.renderAllCells?(i.leftPx=0,i.rightPx=this._canvasWidth):(i.leftPx-=this._viewportW,i.rightPx+=this._viewportW,i.leftPx=Math.max(0,i.leftPx),i.rightPx=Math.min(this._canvasWidth,i.rightPx)),i}ensureCellNodesInRowsCache(e){var o,r,l,n;var t=this._rowsCache[e];if(t&&t.cellRenderQueue.length)for(var i=(l=(o=t.rowNodeR)==null?void 0:o.lastElementChild)!=null?l:(r=t.rowNodeL)==null?void 0:r.lastElementChild;i&&t.cellRenderQueue.length;){var s=t.cellRenderQueue.pop();t.cellNodesByColumnIdx[s]=i,i=i.previousElementSibling,i==null&&(i=(n=t.rowNodeL)==null?void 0:n.lastElementChild)}}cleanUpCells(e,t){if(!(this._hasFrozenRows&&(this._options.frozenBottom&&t>this._actualFrozenRow||t<=this._actualFrozenRow))){var i=0,s=this._rowsCache[t],o=[],r=this._frozenCols;for(var l in s.cellNodesByColumnIdx)if(!!s.cellNodesByColumnIdx.hasOwnProperty(l)){var n=parseInt(l,10);if(!(n<r)){var a=s.cellColSpans[n],h=this._cols;(this._colLeft[n]>e.rightPx||this._colRight[Math.min(h.length-1,n+a-1)]<e.leftPx)&&(t==this._activeRow&&n===this._activeCell||o.push(n))}}var v,c;for(this._postProcessGroupId++;(v=o.pop())!=null;)c=s.cellNodesByColumnIdx[v],this._options.enableAsyncPostRenderCleanup&&this._postProcessedRows[t]&&this._postProcessedRows[t][v]?this.queuePostProcessedCellForCleanup(c,v,t):c.parentElement.removeChild(c),delete s.cellColSpans[v],delete s.cellNodesByColumnIdx[v],this._postProcessedRows[t]&&delete this._postProcessedRows[t][v],i++}}cleanUpAndRenderCells(e){for(var t,i=[],s=[],o,r=0,l,n=this._cols,a=e.top,h=e.bottom;a<=h;a++)if(t=this._rowsCache[a],!!t){this.ensureCellNodesInRowsCache(a),this.cleanUpCells(e,a),o=0;var v=this._data.getItemMetadata&&this._data.getItemMetadata(a);v=v&&v.columns;for(var c=this.getDataItem(a),_=0,C=n.length;_<C&&!(this._colLeft[_]>e.rightPx);_++){if((l=t.cellColSpans[_])!=null){_+=l>1?l-1:0;continue}var b=null;l=1,v&&(b=v[n[_].id]||v[_],l=b&&b.colspan||1,l==="*"&&(l=C-_)),this._colRight[Math.min(C-1,_+l-1)]>e.leftPx&&(this.appendCellHtml(i,a,_,l,c,b),o++),_+=l>1?l-1:0}o&&(r+=o,s.push(a))}if(!!i.length){var R=document.createElement("div");R.innerHTML=i.join("");for(var H,w,y=this._frozenCols;(H=s.pop())!=null;){t=this._rowsCache[H];for(var L;(L=t.cellRenderQueue.pop())!=null;)w=R.lastElementChild,y>0&&L>=y?t.rowNodeR.appendChild(w):t.rowNodeL.appendChild(w),t.cellNodesByColumnIdx[L]=w}}}renderRows(e){for(var t=[],i=[],s=[],o=!1,r=this.getDataLength(),l=e.top,n=e.bottom;l<=n;l++)this._rowsCache[l]||this._hasFrozenRows&&this._options.frozenBottom&&l==r||(s.push(l),this._rowsCache[l]={rowNodeL:null,rowNodeR:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},this.appendRowHtml(t,i,l,e,r),this._activeCellNode&&this._activeRow===l&&(o=!0));if(!!s.length){var a=document.createElement("div"),h=document.createElement("div");a.innerHTML=t.join(""),h.innerHTML=i.join("");for(var v=this._hasFrozenRows,c=this._actualFrozenRow,_=this._frozenCols>0,C=this._canvasTopL,b=this._canvasTopR,R=this._canvasBottomL,H=this._canvasBottomR,l=0,n=s.length;l<n;l++){var w=this._rowsCache[s[l]];w.rowNodeL=a.firstElementChild,w.rowNodeR=h.firstElementChild,v&&s[l]>=c?(w.rowNodeL&&R.appendChild(w.rowNodeL),_&&w.rowNodeR&&H.appendChild(w.rowNodeR)):(w.rowNodeL&&C.appendChild(w.rowNodeL),_&&w.rowNodeR&&b.appendChild(w.rowNodeR))}o&&(this._activeCellNode=this.getCellNode(this._activeRow,this._activeCell))}}startPostProcessing(){!this._options.enableAsyncPostRender||(clearTimeout(this._hPostRender),this._options.asyncPostRenderDelay<0?this.asyncPostProcessRows():this._hPostRender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay))}startPostProcessingCleanup(){!this._options.enableAsyncPostRenderCleanup||(clearTimeout(this._hPostRenderCleanup),this._options.asyncPostCleanupDelay<0?this.asyncPostProcessCleanupRows():this._hPostRenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostCleanupDelay))}invalidatePostProcessingResults(e){if(this._options.enableAsyncPostRenderCleanup)for(var t in this._postProcessedRows[e])this._postProcessedRows[e].hasOwnProperty(t)&&(this._postProcessedRows[e][t]="C");else delete this._postProcessedRows[e];this._postProcessFromRow=Math.min(this._postProcessFromRow,e),this._postProcessToRow=Math.max(this._postProcessToRow,e),this.startPostProcessing()}updateRowPositions(){for(var e in this._rowsCache){var t=this._rowsCache[e],i=this.getRowTop(parseInt(e,10))+"px";t.rowNodeL&&(t.rowNodeL.style.top=i),t.rowNodeR&&(t.rowNodeR.style.top=i)}}updateFooterTotals(){if(!(!this._options.showFooterRow||!this._initialized)){var e=null;this._data.getGrandTotals&&(e=this._data.getGrandTotals());for(var t=this._cols,i=0;i<t.length;i++){var s=t[i],o;s.field&&e&&(o=s.groupTotalsFormatter&&s.groupTotalsFormatter(e,s,this)||this.groupTotalsFormatter&&this.groupTotalsFormatter(e,s)||""),this.getFooterRowColumn(s.id).innerHTML=o}}}render(){if(!!this._initialized){var e=this.getVisibleRange(),t=this.getRenderedRange();if(this.cleanupRows(t),this._scrolLLeftRendered!=this._scrollLeft){if(this._hasFrozenRows){var i=Object.assign({},t);this._options.frozenBottom?(i.top=this._actualFrozenRow,i.bottom=this.getDataLength()):(i.top=0,i.bottom=this._options.frozenRow),this.cleanUpAndRenderCells(i)}this.cleanUpAndRenderCells(t)}this.renderRows(t),this._hasFrozenRows&&(this._options.frozenBottom?this.renderRows({top:this._actualFrozenRow,bottom:this.getDataLength()-1,leftPx:t.leftPx,rightPx:t.rightPx}):this.renderRows({top:0,bottom:this._options.frozenRow-1,leftPx:t.leftPx,rightPx:t.rightPx})),this._postProcessFromRow=e.top,this._postProcessToRow=Math.min(this.getDataLengthIncludingAddNew()-1,e.bottom),this.startPostProcessing(),this._scrollTopRendered=this._scrollTop,this._scrolLLeftRendered=this._scrollLeft,this._hRender=null}}handleMouseWheel(e,t,i,s){i=(typeof i=="undefined"?e.originalEvent.deltaX:i)||0,s=(typeof s=="undefined"?e.originalEvent.deltaY:s)||0,this._scrollTop=Math.max(0,this._scrollContainerY.scrollTop-s*this._options.rowHeight),this._scrollLeft=this._scrollContainerX.scrollLeft+i*10;var o=this._handleScroll(!0);o&&e.preventDefault()}handleScroll(){return this._scrollTop=this._scrollContainerY.scrollTop,this._scrollLeft=this._scrollContainerX.scrollLeft,this._handleScroll(!1)}_handleScroll(e){var t=this._scrollContainerY.scrollHeight-this._scrollContainerY.clientHeight,i=this._scrollContainerY.scrollWidth-this._scrollContainerY.clientWidth;t=Math.max(0,t),i=Math.max(0,i),this._scrollTop>t&&(this._scrollTop=t),this._scrollLeft>i&&(this._scrollLeft=i);var s=Math.abs(this._scrollTop-this._scrollTopPrev),o=Math.abs(this._scrollLeft-this._scrollLeftPrev);if((o||s)&&(this._ignoreScrollUntil=new Date().getTime()+100),o&&(this._scrollLeftPrev=this._scrollLeft,this._scrollContainerX.scrollLeft=this._scrollLeft,this.hasFrozenColumns()?(this._headerColsR.parentElement.scrollLeft=this._scrollLeft,this._topPanelR.parentElement.scrollLeft=this._scrollLeft,this._headerRowColsR.parentElement.scrollLeft=this._scrollLeft,this._footerRowColsR.parentElement.scrollLeft=this._scrollLeft,this._hasFrozenRows&&(this._viewportTopR.scrollLeft=this._scrollLeft)):(this._headerColsL.parentElement.scrollLeft=this._scrollLeft,this._topPanelL.parentElement.scrollLeft=this._scrollLeft,this._headerRowColsL.parentElement.scrollLeft=this._scrollLeft,this._footerRowColsL.parentElement.scrollLeft=this._scrollLeft,this._hasFrozenRows&&(this._viewportTopL.scrollLeft=this._scrollLeft))),s)if(this._vScrollDir=this._scrollTopPrev<this._scrollTop?1:-1,this._scrollTopPrev=this._scrollTop,e&&(this._scrollContainerY.scrollTop=this._scrollTop),this.hasFrozenColumns()&&(this._hasFrozenRows&&!this._options.frozenBottom?this._viewportBottomL.scrollTop=this._scrollTop:this._viewportTopL.scrollTop=this._scrollTop),s<this._viewportH)this.scrollTo(this._scrollTop+this._pageOffset);else{var r=this._pageOffset;this._realScrollHeight==this._viewportH?this._page=0:this._page=Math.min(this._numberOfPages-1,Math.floor(this._scrollTop*((this._virtualHeight-this._viewportH)/(this._realScrollHeight-this._viewportH))*(1/this._pageHeight))),this._pageOffset=Math.round(this._page*this._jumpinessCoefficient),r!=this._pageOffset&&this.invalidateAllRows()}return(o||s)&&(this._hRender&&clearTimeout(this._hRender),(Math.abs(this._scrollTopRendered-this._scrollTop)>20||Math.abs(this._scrolLLeftRendered-this._scrollLeft)>20)&&(this._options.forceSyncScrolling||Math.abs(this._scrollTopRendered-this._scrollTop)<this._viewportH&&Math.abs(this._scrolLLeftRendered-this._scrollLeft)<this._viewportW?this.render():this._hRender=setTimeout(this.render.bind(this),50),this.trigger(this.onViewportChanged))),this.trigger(this.onScroll,{scrollLeft:this._scrollLeft,scrollTop:this._scrollTop}),!!(o||s)}asyncPostProcessRows(){for(var e=this.getDataLength(),t=this._cols;this._postProcessFromRow<=this._postProcessToRow;){var i=this._vScrollDir>=0?this._postProcessFromRow++:this._postProcessToRow--,s=this._rowsCache[i];if(!(!s||i>=e)){this._postProcessedRows[i]||(this._postProcessedRows[i]={}),this.ensureCellNodesInRowsCache(i);for(var o in s.cellNodesByColumnIdx)if(!!s.cellNodesByColumnIdx.hasOwnProperty(o)){var r=parseInt(o,10),l=t[r],n=this._postProcessedRows[i][r];if(n!=="R"){if(l.asyncPostRender||l.asyncPostRenderCleanup){var a=s.cellNodesByColumnIdx[r];a&&l.asyncPostRender&&l.asyncPostRender(a,i,this.getDataItem(i),l,n==="C")}this._postProcessedRows[i][r]="R"}}if(this._options.asyncPostRenderDelay>=0){this._hPostRender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay);return}}}}asyncPostProcessCleanupRows(){for(var e=this._cols;this._postProcessCleanupQueue.length>0;){for(var t=this._postProcessCleanupQueue[0].groupId;this._postProcessCleanupQueue.length>0&&this._postProcessCleanupQueue[0].groupId==t;){var i=this._postProcessCleanupQueue.shift();if(i.rowNodeL&&i.rowNodeL.remove(),i.rowNodeR&&i.rowNodeR.remove(),i.cellNode!=null){var s=e[i.columnIdx];s&&s.asyncPostRenderCleanup&&(s.asyncPostRenderCleanup(i.cellNode,i.rowIdx,s),i.cellNode.remove())}}if(this._options.asyncPostRenderDelay>=0){this._hPostRenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostCleanupDelay);return}}}updateCellCssStylesOnRenderedRows(e,t){var i,s,o,r;for(var l in this._rowsCache){if(r=t&&t[l],o=e&&e[l],r)for(s in r)(!o||r[s]!=o[s])&&(i=this.getCellNode(parseInt(l,10),this.getColumnIndex(s)),i&&$(i).removeClass(r[s]));if(o)for(s in o)(!r||r[s]!=o[s])&&(i=this.getCellNode(parseInt(l,10),this.getColumnIndex(s)),i&&$(i).addClass(o[s]))}}addCellCssStyles(e,t){if(this._cellCssClasses[e])throw"addCellCssStyles: cell CSS hash with key '"+e+"' already exists.";this._cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,null),this.trigger(this.onCellCssStylesChanged,{key:e,hash:t})}removeCellCssStyles(e){!this._cellCssClasses[e]||(this.updateCellCssStylesOnRenderedRows(null,this._cellCssClasses[e]),delete this._cellCssClasses[e],this.trigger(this.onCellCssStylesChanged,{key:e,hash:null}))}setCellCssStyles(e,t){var i=this._cellCssClasses[e];this._cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,i),this.trigger(this.onCellCssStylesChanged,{key:e,hash:t})}getCellCssStyles(e){return this._cellCssClasses[e]}flashCell(e,t,i){if(i=i||100,this._rowsCache[e]){var s=$(this.getCellNode(e,t));r(4)}var o=this._options.cellFlashingCssClass;function r(l){!l||setTimeout(function(){s.queue(function(){s.toggleClass(o).dequeue(),r(l-1)})},i)}}handleDragInit(e,t){var i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;var s=this.trigger(this.onDragInit,t,e);return e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped()?s:!1}handleDragStart(e,t){var i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;var s=this.trigger(this.onDragStart,t,e);return e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped()?s:!1}handleDrag(e,t){return this.trigger(this.onDrag,t,e)}handleDragEnd(e,t){this.trigger(this.onDragEnd,t,e)}handleKeyDown(e){this.trigger(this.onKeyDown,{row:this._activeRow,cell:this._activeCell},e);var t=e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped();if(!t&&!e.shiftKey&&!e.altKey){if(this._options.editable&&this._currentEditor&&this._currentEditor.keyCaptureList&&this._currentEditor.keyCaptureList.indexOf(e.which)>=0)return;e.which==P.HOME?e.ctrlKey?(this.navigateTop(),t=!0):t=this.navigateRowStart():e.which==P.END&&(e.ctrlKey?(this.navigateBottom(),t=!0):t=this.navigateRowEnd())}if(!t)if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(this._options.editable&&this._currentEditor&&this._currentEditor.keyCaptureList&&this._currentEditor.keyCaptureList.indexOf(e.which)>=0)return;if(e.which==P.ESCAPE){if(!this.getEditorLock().isActive())return;this.cancelEditAndSetFocus()}else e.which==P.PAGEDOWN?(this.navigatePageDown(),t=!0):e.which==P.PAGEUP?(this.navigatePageUp(),t=!0):e.which==P.LEFT?t=this.navigateLeft():e.which==P.RIGHT?t=this.navigateRight():e.which==P.UP?t=this.navigateUp():e.which==P.DOWN?t=this.navigateDown():e.which==P.TAB?this._options.enableTabKeyNavigation&&(t=this.navigateNext()):e.which==P.ENTER&&(this._options.editable&&(this._currentEditor?this._activeRow===this.getDataLength()?this.navigateDown():this.commitEditAndSetFocus():this.getEditorLock().commitCurrentEdit()&&this.makeActiveCellEditable()),t=!0)}else e.which==P.TAB&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&(t=this.navigatePrev());if(t){e.stopPropagation(),e.preventDefault();try{e.originalEvent.keyCode=0}catch(i){}}}handleClick(e){this._currentEditor||(e.target!=document.activeElement||$(e.target).hasClass("slick-cell"))&&this.setFocus();var t=this.getCellFromEvent(e);if(!(!t||this._currentEditor!=null&&this._activeRow==t.row&&this._activeCell==t.cell)&&(this.trigger(this.onClick,{row:t.row,cell:t.cell},e),!(e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())&&this.canCellBeActive(t.row,t.cell)&&(!this.getEditorLock().isActive()||this.getEditorLock().commitCurrentEdit()))){var i=e.target&&e.target.classList.contains(Y),s=this._cols[t.cell],o=!!(this._options.editable&&s&&s.editor&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(this.getCellNode(t.row,t.cell),null,i,o,e)}}handleContextMenu(e){var t=$(e.target).closest(".slick-cell",this._container);t.length!==0&&(this._activeCellNode===t[0]&&this._currentEditor!=null||this.trigger(this.onContextMenu,{},e))}handleDblClick(e){var t=this.getCellFromEvent(e);!t||this._currentEditor!=null&&this._activeRow==t.row&&this._activeCell==t.cell||(this.trigger(this.onDblClick,{row:t.row,cell:t.cell},e),!(e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())&&this._options.editable&&this.gotoCell(t.row,t.cell,!0))}handleHeaderMouseEnter(e){let t=this.getColumnFromNode(e.target);t&&this.trigger(this.onHeaderMouseEnter,{column:t},e)}handleHeaderMouseLeave(e){let t=this.getColumnFromNode(e.target);t&&this.trigger(this.onHeaderMouseLeave,{column:t},e)}handleHeaderContextMenu(e){var t=e.target.closest(".slick-header-column"),i=this.getColumnFromNode(t);i&&this.trigger(this.onHeaderContextMenu,{column:i},e)}handleHeaderClick(e){var t=e.target.closest(".slick-header-column"),i=this.getColumnFromNode(t);i&&this.trigger(this.onHeaderClick,{column:i},e)}handleMouseEnter(e){this.trigger(this.onMouseEnter,{},e)}handleMouseLeave(e){this.trigger(this.onMouseLeave,{},e)}cellExists(e,t){return!(e<0||e>=this.getDataLength()||t<0||t>=this._cols.length)}getCellFromPoint(e,t){for(var i=this.getRowFromPosition(t),s=0,o=this._cols,r=0,l=0;l<o.length&&r<e;l++)r+=o[l].width,s++;return s<0&&(s=0),{row:i,cell:s-1}}getCellFromNode(e){if(e==null)return null;var t=e.dataset.c;if(t!=null)return parseInt(t,10);var i=/\sl(\d+)\s/.exec(" "+e.className+" ");return i?parseInt(i[1],10):null}getColumnFromNode(e){if(e==null)return null;var t=this.getCellFromNode(e);return t===null&&typeof $!="undefined"?$(t).data("column"):this._cols[t]}getRowFromNode(e){if(e!=null)for(var t in this._rowsCache){var i=this._rowsCache[t];if(i.rowNodeL===e||i.rowNodeR===e)return parseInt(t,10)}return null}getFrozenRowOffset(e){var t=this._hasFrozenRows?this._options.frozenBottom?e>=this._actualFrozenRow?this._realScrollHeight<this._viewportTopH?this._actualFrozenRow*this._options.rowHeight:this._realScrollHeight:0:e>=this._actualFrozenRow?this._frozenRowsHeight:0:0;return t}getCellFromEvent(e){var t,i,s=e.target.closest(".slick-cell");if(!s)return null;if(t=this.getRowFromNode(s.parentNode),this._hasFrozenRows){var o=s.closest(".grid-canvas").getBoundingClientRect(),r=0,l=s.closest(".grid-canvas-bottom")!=null;l&&(r=this._options.frozenBottom?Math.round(parseFloat(getComputedStyle(this._canvasTopL).height)):this._frozenRowsHeight),t=this.getCellFromPoint(e.clientX-o[this._rtlS]-document.body.scrollLeft,e.clientY-o.top+document.body.scrollTop+r+document.body.scrollTop).row}return i=this.getCellFromNode(s),t==null||i==null?null:{row:t,cell:i}}getCellNodeBox(e,t){if(!this.cellExists(e,t))return null;for(var i=this.getFrozenRowOffset(e),s=this._cols,o=this._frozenCols,r=this.getRowTop(e)-i,l=r+this._options.rowHeight-1,n=0,a=0;a<t;a++)n+=s[a].width,a==o-1&&(n=0);var h=n+s[t].width;return this._rtl?{top:r,right:n,bottom:l,left:h}:{top:r,left:n,bottom:l,right:h}}resetActiveCell(){this.setActiveCellInternal(null,!1)}focus(){this.setFocus()}setFocus(){this._tabbingDirection==-1?this._focusSink1.focus():this._focusSink2.focus()}scrollCellIntoView(e,t,i){if(this.scrollRowIntoView(e,i),!(t<this._frozenCols)){var s=this.getColspan(e,t);this.internalScrollColumnIntoView(this._colLeft[t],this._colRight[t+(s>1?s-1:0)])}}scrollColumnIntoView(e){this.internalScrollColumnIntoView(this._colLeft[e],this._colRight[e])}internalScrollColumnIntoView(e,t){var i=this._scrollLeft+parseFloat(getComputedStyle(this._scrollContainerX).width)-(this._viewportHasVScroll?this._scrollDims.width:0),s;if(e<this._scrollLeft)s=e;else if(t>i)s=Math.min(e,t-this._scrollContainerX.clientWidth);else return;this._scrollContainerX.scrollLeft=s,this.handleScroll(),this.render()}setActiveCellInternal(e,t,i,s,o){if(this._activeCellNode!=null){this.makeActiveCellNormal(),this._activeCellNode.classList.remove("active");var r=this._rowsCache[this._activeRow];r&&(r.rowNodeL&&r.rowNodeL.classList.remove("active"),r.rowNodeR&&r.rowNodeR.classList.remove("active"))}if(this._activeCellNode=e,this._activeCellNode!=null){var l=this._activeCellNode.getBoundingClientRect(),n=Math.floor(this._activeCellNode.closest(".grid-canvas").getBoundingClientRect().top+document.body.scrollTop),a=this._activeCellNode.closest(".grid-canvas-bottom")!=null;this._hasFrozenRows&&a&&(n-=this._options.frozenBottom?Math.round(parseFloat(getComputedStyle(this._canvasTopL).height)):this._frozenRowsHeight);var h=this.getCellFromPoint(l[this._rtlS]+document.body.scrollLeft,Math.ceil(l.top+document.body.scrollTop)-n);if(this._activeRow=h.row,this._activeCell=this._activePosX=this.getCellFromNode(this._activeCellNode),this._options.showCellSelection){this._activeCellNode.classList.add("active");var r=this._rowsCache[this._activeRow];r&&(r.rowNodeL&&r.rowNodeL.classList.add("active"),r.rowNodeR&&r.rowNodeR.classList.add("active"))}t==null&&(t=this._activeRow==this.getDataLength()||this._options.autoEdit),this._options.editable&&t&&this.isCellPotentiallyEditable(this._activeRow,this._activeCell)&&(clearTimeout(this._hEditorLoader),this._options.asyncEditorLoading?this._hEditorLoader=setTimeout(()=>{this.makeActiveCellEditable(void 0,i,o)},this._options.asyncEditorLoadDelay):this.makeActiveCellEditable(void 0,i,o))}else this._activeRow=this._activeCell=null;s||this.trigger(this.onActiveCellChanged,this.getActiveCell())}clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(t){}else if(window.getSelection){var e=window.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}}isCellPotentiallyEditable(e,t){var i=this.getDataLength();return!(e<i&&!this.getDataItem(e)||this._cols[t].cannotTriggerInsert&&e>=i||!this.getEditor(e,t))}makeActiveCellNormal(){if(!!this._currentEditor){if(this.trigger(this.onBeforeCellEditorDestroy,{editor:this._currentEditor}),this._currentEditor.destroy(),this._currentEditor=null,this._activeCellNode){var e=this.getDataItem(this._activeRow);if(this._activeCellNode.classList.remove("editable","invalid"),e){var t=this._cols[this._activeCell],i=e?this.getFormatter(this._activeRow,t)(this._activeRow,this._activeCell,this.getDataItemValueForColumn(e,t),t,e):"";this.applyFormatResultToCellNode(i,this._activeCellNode),this.invalidatePostProcessingResults(this._activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&this.clearTextSelection(),this.getEditorLock().deactivate(this._editController)}}editActiveCell(e){this.makeActiveCellEditable(e)}makeActiveCellEditable(e,t,i){if(!!this._activeCellNode){if(!this._options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";if(clearTimeout(this._hEditorLoader),!!this.isCellPotentiallyEditable(this._activeRow,this._activeCell)){var s=this._cols[this._activeCell],o=this.getDataItem(this._activeRow);if(this.trigger(this.onBeforeEditCell,{row:this._activeRow,cell:this._activeCell,item:o,column:s})===!1){this.setFocus();return}this.getEditorLock().activate(this._editController),this._activeCellNode.classList.add("editable");var r=e||this.getEditor(this._activeRow,this._activeCell);!e&&!r.suppressClearOnEdit&&(this._activeCellNode.innerHTML="");var l=this._data.getItemMetadata&&this._data.getItemMetadata(this._activeRow);l=l&&l.columns;var n=l&&(l[s.id]||l[this._activeCell]);this._currentEditor=new r({grid:this,gridPosition:this.absBox(this._container),position:this.absBox(this._activeCellNode),container:this._activeCellNode,column:s,item:o||{},event:i,commitChanges:this.commitEditAndSetFocus,cancelChanges:this.cancelEditAndSetFocus}),o&&(this._currentEditor.loadValue(o),t&&this._currentEditor.preClick&&this._currentEditor.preClick()),this._serializedEditorValue=this._currentEditor.serializeValue(),this._currentEditor.position&&this.handleActiveCellPositionChange()}}}commitEditAndSetFocus(){this.getEditorLock().commitCurrentEdit()&&(this.setFocus(),this._options.autoEdit&&this.navigateDown())}cancelEditAndSetFocus(){this.getEditorLock().cancelCurrentEdit()&&this.setFocus()}absBox(e){var t={top:e.offsetTop,bottom:0,width:e.offsetWidth,height:e.offsetHeight,visible:!0};t[this._rtlS]=e.offsetLeft,t[this._rtlE]=0,t.bottom=t.top+t.height,t[this._rtlE]=t[this._rtlS]+t.width;for(var i=e.offsetParent;(e=e.parentNode)!=document.body;)t.visible&&e.scrollHeight!=e.offsetHeight&&getComputedStyle(e).overflowY!=="visible"&&(t.visible=t.bottom>e.scrollTop&&t.top<e.scrollTop+e.clientHeight),t.visible&&e.scrollWidth!=e.offsetWidth&&getComputedStyle(e).overflowX!="visible"&&(t.visible=t[this._rtlE]>e.scrollLeft&&t[this._rtlS]<e.scrollLeft+e.clientWidth),t[this._rtlS]-=e.scrollLeft,t.top-=e.scrollTop,e===i&&(t.right+=e.offsetLeft,t.top+=e.offsetTop,i=e.offsetParent),t.bottom=t.top+t.height,t[this._rtlE]=t[this._rtlS]+t.width;return t}getActiveCellPosition(){return this.absBox(this._activeCellNode)}getGridPosition(){return this.absBox(this._container)}getCellEditor(){return this._currentEditor}getActiveCell(){return this._activeCellNode?{row:this._activeRow,cell:this._activeCell}:null}getActiveCellNode(){return this._activeCellNode}scrollActiveCellIntoView(){this._activeRow!=null&&this._activeCell!=null&&this.scrollCellIntoView(this._activeRow,this._activeCell)}scrollRowIntoView(e,t){if(!this._hasFrozenRows||!this._options.frozenBottom&&e>this._actualFrozenRow-1||this._options.frozenBottom&&e<this._actualFrozenRow-1){var i=Math.round(parseFloat(getComputedStyle(this._scrollContainerY).height)),s=this._hasFrozenRows&&!this._options.frozenBottom?e-this._options.frozenRow:e,o=s*this._options.rowHeight,r=(s+1)*this._options.rowHeight-i+(this._viewportHasHScroll?this._scrollDims.height:0);(s+1)*this._options.rowHeight>this._scrollTop+i+this._pageOffset?(this.scrollTo(t?o:r),this.render()):s*this._options.rowHeight<this._scrollTop+this._pageOffset&&(this.scrollTo(t?r:o),this.render())}}scrollRowToTop(e){this.scrollTo(e*this._options.rowHeight),this.render()}scrollPage(e){var t=e*this._numVisibleRows;if(this.scrollTo((this.getRowFromPosition(this._scrollTop)+t)*this._options.rowHeight),this.render(),this._options.enableCellNavigation&&this._activeRow!=null){var i=this._activeRow+t,s=this.getDataLengthIncludingAddNew();i>=s&&(i=s-1),i<0&&(i=0);for(var o=0,r=null,l=this._activePosX;o<=this._activePosX;)this.canCellBeActive(i,o)&&(r=o),o+=this.getColspan(i,o);r!=null?(this.setActiveCellInternal(this.getCellNode(i,r)),this._activePosX=l):this.resetActiveCell()}}navigatePageDown(){this.scrollPage(1)}navigatePageUp(){this.scrollPage(-1)}navigateTop(){this.navigateToRow(0)}navigateBottom(){this.navigateToRow(this.getDataLength()-1)}navigateToRow(e){var t=this.getDataLength();if(!t)return!0;if(e<0?e=0:e>=t&&(e=t-1),this.scrollCellIntoView(e,0,!0),this._options.enableCellNavigation&&this._activeRow!=null){for(var i=0,s=null,o=this._activePosX;i<=this._activePosX;)this.canCellBeActive(e,i)&&(s=i),i+=this.getColspan(e,i);s!=null?(this.setActiveCellInternal(this.getCellNode(e,s)),this._activePosX=o):this.resetActiveCell()}return!0}getColspan(e,t){var i=this._data.getItemMetadata&&this._data.getItemMetadata(e);if(!i||!i.columns)return 1;var s=this._cols,o=s[t]&&(i.columns[s[t].id]||i.columns[t]),r=o&&o.colspan;return r==="*"?r=s.length-t:r=r||1,r}findFirstFocusableCell(e){for(var t=0,i=this._cols;t<i.length;){if(this.canCellBeActive(e,t))return t;t+=this.getColspan(e,t)}return null}findLastFocusableCell(e){for(var t=0,i=null,s=this._cols;t<s.length;)this.canCellBeActive(e,t)&&(i=t),t+=this.getColspan(e,t);return i}gotoRight(e,t,i){var s=this._cols;if(t>=s.length)return null;do t+=this.getColspan(e,t);while(t<s.length&&!this.canCellBeActive(e,t));return t<s.length?{row:e,cell:t,posX:t}:null}gotoLeft(e,t,i){if(t<=0)return null;var s=this.findFirstFocusableCell(e);if(s===null||s>=t)return null;for(var o={row:e,cell:s,posX:s},r;;){if(r=this.gotoRight(o.row,o.cell,o.posX),!r)return null;if(r.cell>=t)return o;o=r}}gotoDown(e,t,i){for(var s,o=this.getDataLengthIncludingAddNew();;){if(++e>=o)return null;for(s=t=0;t<=i;)s=t,t+=this.getColspan(e,t);if(this.canCellBeActive(e,s))return{row:e,cell:s,posX:i}}}gotoUp(e,t,i){for(var s;;){if(--e<0)return null;for(s=t=0;t<=i;)s=t,t+=this.getColspan(e,t);if(this.canCellBeActive(e,s))return{row:e,cell:s,posX:i}}}gotoNext(e,t,i){if(e==null&&t==null&&(e=t=i=0,this.canCellBeActive(e,t)))return{row:e,cell:t,posX:t};var s=this.gotoRight(e,t,i);if(s)return s;for(var o=null,r=this.getDataLengthIncludingAddNew();++e<r;)if(o=this.findFirstFocusableCell(e),o!=null)return{row:e,cell:o,posX:o};return null}gotoPrev(e,t,i){var s=this._cols;if(e==null&&t==null&&(e=this.getDataLengthIncludingAddNew()-1,t=i=s.length-1,this.canCellBeActive(e,t)))return{row:e,cell:t,posX:t};for(var o,r;!o&&(o=this.gotoLeft(e,t,i),!o);){if(--e<0)return null;t=0,r=this.findLastFocusableCell(e),r!=null&&(o={row:e,cell:r,posX:r})}return o}gotoRowStart(e){var t=this.findFirstFocusableCell(e);return t===null?null:{row:e,cell:t,posX:t}}gotoRowEnd(e){var t=this.findLastFocusableCell(e);return t===null?null:{row:e,cell:t,posX:t}}navigateRight(){return this.navigate("right")}navigateLeft(){return this.navigate("left")}navigateDown(){return this.navigate("down")}navigateUp(){return this.navigate("up")}navigateNext(){return this.navigate("next")}navigatePrev(){return this.navigate("prev")}navigateRowStart(){return this.navigate("home")}navigateRowEnd(){return this.navigate("end")}navigate(e){if(!this._options.enableCellNavigation||!this._activeCellNode&&e!="prev"&&e!="next")return!1;if(!this.getEditorLock().commitCurrentEdit())return!0;this.setFocus();var t={up:-1,down:1,prev:-1,next:1,home:-1,end:1};t[this._rtlS]=-1,t[this._rtlE]=1,this._tabbingDirection=t[e];var i={up:this.gotoUp,down:this.gotoDown,prev:this.gotoPrev,next:this.gotoNext,home:this.gotoRowStart,end:this.gotoRowEnd};i[this._rtlS]=this.gotoLeft,i[this._rtlE]=this.gotoRight;var s=i[e].bind(this),o=s(this._activeRow,this._activeCell,this._activePosX);if(o){if(this._hasFrozenRows&&this._options.frozenBottom&&o.row==this.getDataLength())return;var r=o.row==this.getDataLength();return(!this._options.frozenBottom&&o.row>=this._actualFrozenRow||this._options.frozenBottom&&o.row<this._actualFrozenRow)&&this.scrollCellIntoView(o.row,o.cell,!r),this.setActiveCellInternal(this.getCellNode(o.row,o.cell)),this._activePosX=o.posX,!0}else return this.setActiveCellInternal(this.getCellNode(this._activeRow,this._activeCell)),!1}getCellNode(e,t){return this._rowsCache[e]?(this.ensureCellNodesInRowsCache(e),this._rowsCache[e].cellNodesByColumnIdx[t]):null}setActiveCell(e,t){if(!!this._initialized){var i=this._cols;e>this.getDataLength()||e<0||t>=i.length||t<0||!this._options.enableCellNavigation||(this.scrollCellIntoView(e,t,!1),this.setActiveCellInternal(this.getCellNode(e,t),!1))}}canCellBeActive(e,t){var i=this._cols;if(!this._options.enableCellNavigation||e>=this.getDataLengthIncludingAddNew()||e<0||t>=i.length||t<0)return!1;var s=this._data.getItemMetadata&&this._data.getItemMetadata(e);if(s&&typeof s.focusable=="boolean")return s.focusable;var o=s&&s.columns;return o&&i[t]&&o[i[t].id]&&typeof o[i[t].id].focusable=="boolean"?o[i[t].id].focusable:o&&o[t]&&typeof o[t].focusable=="boolean"?o[t].focusable:i[t].focusable}canCellBeSelected(e,t){var i=this._cols;if(e>=this.getDataLength()||e<0||t>=i.length||t<0)return!1;var s=this._data.getItemMetadata&&this._data.getItemMetadata(e);if(s&&typeof s.selectable=="boolean")return s.selectable;var o=s&&s.columns&&(s.columns[i[t].id]||s.columns[t]);return o&&typeof o.selectable=="boolean"?o.selectable:i[t].selectable}gotoCell(e,t,i){if(!!this._initialized&&!!this.canCellBeActive(e,t)&&!!this.getEditorLock().commitCurrentEdit()){this.scrollCellIntoView(e,t,!1);var s=this.getCellNode(e,t);this.setActiveCellInternal(s,i||e===this.getDataLength()||this._options.autoEdit),this._currentEditor||this.setFocus()}}commitCurrentEdit(){var e=this.getDataItem(this._activeRow),t=this._cols[this._activeCell],i=this;if(this._currentEditor){if(this._currentEditor.isValueChanged()){var s=this._currentEditor.validate();if(s.valid){if(this._activeRow<this.getDataLength()){var o={row:this._activeRow,cell:i._activeCell,editor:this._currentEditor,serializedValue:this._currentEditor.serializeValue(),prevSerializedValue:this._serializedEditorValue,execute:function(){this.editor.applyValue(e,this.serializedValue),i.updateRow(this.row),i.trigger(i.onCellChange,{row:this.activeRow,cell:i._activeCell,item:e})},undo:function(){this.editor.applyValue(e,this.prevSerializedValue),i.updateRow(this.row),i.trigger(i.onCellChange,{row:this.activeRow,cell:i._activeCell,item:e})}};this._options.editCommandHandler?(this.makeActiveCellNormal(),this._options.editCommandHandler(e,t,o)):(o.execute(),this.makeActiveCellNormal())}else{var r={};this._currentEditor.applyValue(r,this._currentEditor.serializeValue()),this.makeActiveCellNormal(),this.trigger(this.onAddNewRow,{item:r,column:t})}return!this.getEditorLock().isActive()}else return this._activeCellNode.classList.remove("invalid"),this._activeCellNode.offsetWidth,this._activeCellNode.classList.add("invalid"),this.trigger(this.onValidationError,{editor:this._currentEditor,cellNode:this._activeCellNode,validationResults:s,row:this._activeRow,cell:this._activeCell,column:t}),this._currentEditor.focus(),!1}this.makeActiveCellNormal()}return!0}cancelCurrentEdit(){return this.makeActiveCellNormal(),!0}rowsToRanges(e){for(var t=[],i=this._cols.length-1,s=0;s<e.length;s++)t.push(new J(e[s],0,e[s],i));return t}getSelectedRows(){if(!this._selectionModel)throw"Selection model is not set";return this._selectedRows}setSelectedRows(e){if(!this._selectionModel)throw"Selection model is not set";this._selectionModel.setSelectedRanges(this.rowsToRanges(e))}};return ne(ae);})();
Slick.Plugins = Object.assign(Slick.Plugins || {}, Slick._.Plugins || {}); Object.assign(Slick, Slick._); delete Slick._;
//# sourceMappingURL=slick.grid.min.js.map
